import { r as g, a as Os, R as Ht, j as o, g as Bs, b as Ds } from "./index-Dn41Jttm.js";/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var wr = "popstate"; function Zs(r = {}) { function l(h, u) { let { pathname: d, search: f, hash: y } = h.location; return Vi("", { pathname: d, search: f, hash: y }, u.state && u.state.usr || null, u.state && u.state.key || "default") } function s(h, u) { return typeof u == "string" ? u : Te(u) } return Ws(l, s, null, r) } function $(r, l) { if (r === !1 || r === null || typeof r > "u") throw new Error(l) } function xt(r, l) { if (!r) { typeof console < "u" && console.warn(l); try { throw new Error(l) } catch { } } } function Fs() { return Math.random().toString(36).substring(2, 10) } function br(r, l) { return { usr: r.state, key: r.key, idx: l } } function Vi(r, l, s = null, h) { return { pathname: typeof r == "string" ? r : r.pathname, search: "", hash: "", ...typeof l == "string" ? ae(l) : l, state: s, key: l && l.key || h || Fs() } } function Te({ pathname: r = "/", search: l = "", hash: s = "" }) { return l && l !== "?" && (r += l.charAt(0) === "?" ? l : "?" + l), s && s !== "#" && (r += s.charAt(0) === "#" ? s : "#" + s), r } function ae(r) { let l = {}; if (r) { let s = r.indexOf("#"); s >= 0 && (l.hash = r.substring(s), r = r.substring(0, s)); let h = r.indexOf("?"); h >= 0 && (l.search = r.substring(h), r = r.substring(0, h)), r && (l.pathname = r) } return l } function Ws(r, l, s, h = {}) { let { window: u = document.defaultView, v5Compat: d = !1 } = h, f = u.history, y = "POP", p = null, S = b(); S == null && (S = 0, f.replaceState({ ...f.state, idx: S }, "")); function b() { return (f.state || { idx: null }).idx } function x() { y = "POP"; let M = b(), C = M == null ? null : M - S; S = M, p && p({ action: y, location: E.location, delta: C }) } function j(M, C) { y = "PUSH"; let _ = Vi(E.location, M, C); S = b() + 1; let P = br(_, S), R = E.createHref(_); try { f.pushState(P, "", R) } catch (G) { if (G instanceof DOMException && G.name === "DataCloneError") throw G; u.location.assign(R) } d && p && p({ action: y, location: E.location, delta: 1 }) } function T(M, C) { y = "REPLACE"; let _ = Vi(E.location, M, C); S = b(); let P = br(_, S), R = E.createHref(_); f.replaceState(P, "", R), d && p && p({ action: y, location: E.location, delta: 0 }) } function A(M) { return Hs(M) } let E = { get action() { return y }, get location() { return r(u, f) }, listen(M) { if (p) throw new Error("A history only accepts one active listener"); return u.addEventListener(wr, x), p = M, () => { u.removeEventListener(wr, x), p = null } }, createHref(M) { return l(u, M) }, createURL: A, encodeLocation(M) { let C = A(M); return { pathname: C.pathname, search: C.search, hash: C.hash } }, push: j, replace: T, go(M) { return f.go(M) } }; return E } function Hs(r, l = !1) { let s = "http://localhost"; typeof window < "u" && (s = window.location.origin !== "null" ? window.location.origin : window.location.href), $(s, "No window.location.(origin|href) available to create URL"); let h = typeof r == "string" ? r : Te(r); return h = h.replace(/ $/, "%20"), !l && h.startsWith("//") && (h = s + h), new URL(h, s) } function Mr(r, l, s = "/") { return Us(r, l, s, !1) } function Us(r, l, s, h) { let u = typeof l == "string" ? ae(l) : l, d = Bt(u.pathname || "/", s); if (d == null) return null; let f = zr(r); Vs(f); let y = null; for (let p = 0; y == null && p < f.length; ++p) { let S = ia(d); y = ta(f[p], S, h) } return y } function zr(r, l = [], s = [], h = "", u = !1) { let d = (f, y, p = u, S) => { let b = { relativePath: S === void 0 ? f.path || "" : S, caseSensitive: f.caseSensitive === !0, childrenIndex: y, route: f }; if (b.relativePath.startsWith("/")) { if (!b.relativePath.startsWith(h) && p) return; $(b.relativePath.startsWith(h), `Absolute route path "${b.relativePath}" nested under path "${h}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`), b.relativePath = b.relativePath.slice(h.length) } let x = Ot([h, b.relativePath]), j = s.concat(b); f.children && f.children.length > 0 && ($(f.index !== !0, `Index routes must not have child routes. Please remove all child routes from route path "${x}".`), zr(f.children, l, j, x, p)), !(f.path == null && !f.index) && l.push({ path: x, score: Xs(x, f.index), routesMeta: j }) }; return r.forEach((f, y) => { var p; if (f.path === "" || !((p = f.path) != null && p.includes("?"))) d(f, y); else for (let S of Rr(f.path)) d(f, y, !0, S) }), l } function Rr(r) { let l = r.split("/"); if (l.length === 0) return []; let [s, ...h] = l, u = s.endsWith("?"), d = s.replace(/\?$/, ""); if (h.length === 0) return u ? [d, ""] : [d]; let f = Rr(h.join("/")), y = []; return y.push(...f.map(p => p === "" ? d : [d, p].join("/"))), u && y.push(...f), y.map(p => r.startsWith("/") && p === "" ? "/" : p) } function Vs(r) { r.sort((l, s) => l.score !== s.score ? s.score - l.score : Qs(l.routesMeta.map(h => h.childrenIndex), s.routesMeta.map(h => h.childrenIndex))) } var qs = /^:[\w-]+$/, Gs = 3, Ks = 2, Ys = 1, $s = 10, Js = -2, Sr = r => r === "*"; function Xs(r, l) { let s = r.split("/"), h = s.length; return s.some(Sr) && (h += Js), l && (h += Ks), s.filter(u => !Sr(u)).reduce((u, d) => u + (qs.test(d) ? Gs : d === "" ? Ys : $s), h) } function Qs(r, l) { return r.length === l.length && r.slice(0, -1).every((h, u) => h === l[u]) ? r[r.length - 1] - l[l.length - 1] : 0 } function ta(r, l, s = !1) { let { routesMeta: h } = r, u = {}, d = "/", f = []; for (let y = 0; y < h.length; ++y) { let p = h[y], S = y === h.length - 1, b = d === "/" ? l : l.slice(d.length) || "/", x = ii({ path: p.relativePath, caseSensitive: p.caseSensitive, end: S }, b), j = p.route; if (!x && S && s && !h[h.length - 1].route.index && (x = ii({ path: p.relativePath, caseSensitive: p.caseSensitive, end: !1 }, b)), !x) return null; Object.assign(u, x.params), f.push({ params: u, pathname: Ot([d, x.pathname]), pathnameBase: sa(Ot([d, x.pathnameBase])), route: j }), x.pathnameBase !== "/" && (d = Ot([d, x.pathnameBase])) } return f } function ii(r, l) { typeof r == "string" && (r = { path: r, caseSensitive: !1, end: !0 }); let [s, h] = ea(r.path, r.caseSensitive, r.end), u = l.match(s); if (!u) return null; let d = u[0], f = d.replace(/(.)\/+$/, "$1"), y = u.slice(1); return { params: h.reduce((S, { paramName: b, isOptional: x }, j) => { if (b === "*") { let A = y[j] || ""; f = d.slice(0, d.length - A.length).replace(/(.)\/+$/, "$1") } const T = y[j]; return x && !T ? S[b] = void 0 : S[b] = (T || "").replace(/%2F/g, "/"), S }, {}), pathname: d, pathnameBase: f, pattern: r } } function ea(r, l = !1, s = !0) { xt(r === "*" || !r.endsWith("*") || r.endsWith("/*"), `Route path "${r}" will be treated as if it were "${r.replace(/\*$/, "/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/, "/*")}".`); let h = [], u = "^" + r.replace(/\/*\*?$/, "").replace(/^\/*/, "/").replace(/[\\.*+^${}|()[\]]/g, "\\$&").replace(/\/:([\w-]+)(\?)?/g, (f, y, p) => (h.push({ paramName: y, isOptional: p != null }), p ? "/?([^\\/]+)?" : "/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g, "(/$1)?$2"); return r.endsWith("*") ? (h.push({ paramName: "*" }), u += r === "*" || r === "/*" ? "(.*)$" : "(?:\\/(.+)|\\/*)$") : s ? u += "\\/*$" : r !== "" && r !== "/" && (u += "(?:(?=\\/|$))"), [new RegExp(u, l ? void 0 : "i"), h] } function ia(r) { try { return r.split("/").map(l => decodeURIComponent(l).replace(/\//g, "%2F")).join("/") } catch (l) { return xt(!1, `The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`), r } } function Bt(r, l) { if (l === "/") return r; if (!r.toLowerCase().startsWith(l.toLowerCase())) return null; let s = l.endsWith("/") ? l.length - 1 : l.length, h = r.charAt(s); return h && h !== "/" ? null : r.slice(s) || "/" } var Ir = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, na = r => Ir.test(r); function ra(r, l = "/") { let { pathname: s, search: h = "", hash: u = "" } = typeof r == "string" ? ae(r) : r, d; if (s) if (na(s)) d = s; else { if (s.includes("//")) { let f = s; s = s.replace(/\/\/+/g, "/"), xt(!1, `Pathnames cannot have embedded double slashes - normalizing ${f} -> ${s}`) } s.startsWith("/") ? d = Lr(s.substring(1), "/") : d = Lr(s, l) } else d = l; return { pathname: d, search: aa(h), hash: la(u) } } function Lr(r, l) { let s = l.replace(/\/+$/, "").split("/"); return r.split("/").forEach(u => { u === ".." ? s.length > 1 && s.pop() : u !== "." && s.push(u) }), s.length > 1 ? s.join("/") : "/" } function Wi(r, l, s, h) { return `Cannot include a '${r}' character in a manually specified \`to.${l}\` field [${JSON.stringify(h)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.` } function oa(r) { return r.filter((l, s) => s === 0 || l.route.path && l.route.path.length > 0) } function Yi(r) { let l = oa(r); return l.map((s, h) => h === l.length - 1 ? s.pathname : s.pathnameBase) } function $i(r, l, s, h = !1) { let u; typeof r == "string" ? u = ae(r) : (u = { ...r }, $(!u.pathname || !u.pathname.includes("?"), Wi("?", "pathname", "search", u)), $(!u.pathname || !u.pathname.includes("#"), Wi("#", "pathname", "hash", u)), $(!u.search || !u.search.includes("#"), Wi("#", "search", "hash", u))); let d = r === "" || u.pathname === "", f = d ? "/" : u.pathname, y; if (f == null) y = s; else { let x = l.length - 1; if (!h && f.startsWith("..")) { let j = f.split("/"); for (; j[0] === "..";)j.shift(), x -= 1; u.pathname = j.join("/") } y = x >= 0 ? l[x] : "/" } let p = ra(u, y), S = f && f !== "/" && f.endsWith("/"), b = (d || f === ".") && s.endsWith("/"); return !p.pathname.endsWith("/") && (S || b) && (p.pathname += "/"), p } var Ot = r => r.join("/").replace(/\/\/+/g, "/"), sa = r => r.replace(/\/+$/, "").replace(/^\/*/, "/"), aa = r => !r || r === "?" ? "" : r.startsWith("?") ? r : "?" + r, la = r => !r || r === "#" ? "" : r.startsWith("#") ? r : "#" + r, ca = class { constructor(r, l, s, h = !1) { this.status = r, this.statusText = l || "", this.internal = h, s instanceof Error ? (this.data = s.toString(), this.error = s) : this.data = s } }; function ha(r) { return r != null && typeof r.status == "number" && typeof r.statusText == "string" && typeof r.internal == "boolean" && "data" in r } function ua(r) { return r.map(l => l.route.path).filter(Boolean).join("/").replace(/\/\/*/g, "/") || "/" } var Nr = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u"; function Or(r, l) { let s = r; if (typeof s != "string" || !Ir.test(s)) return { absoluteURL: void 0, isExternal: !1, to: s }; let h = s, u = !1; if (Nr) try { let d = new URL(window.location.href), f = s.startsWith("//") ? new URL(d.protocol + s) : new URL(s), y = Bt(f.pathname, l); f.origin === d.origin && y != null ? s = y + f.search + f.hash : u = !0 } catch { xt(!1, `<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`) } return { absoluteURL: h, isExternal: u, to: s } } Object.getOwnPropertyNames(Object.prototype).sort().join("\0"); var Br = ["POST", "PUT", "PATCH", "DELETE"]; new Set(Br); var da = ["GET", ...Br]; new Set(da); var le = g.createContext(null); le.displayName = "DataRouter"; var oi = g.createContext(null); oi.displayName = "DataRouterState"; var fa = g.createContext(!1), Dr = g.createContext({ isTransitioning: !1 }); Dr.displayName = "ViewTransition"; var ma = g.createContext(new Map); ma.displayName = "Fetchers"; var pa = g.createContext(null); pa.displayName = "Await"; var pt = g.createContext(null); pt.displayName = "Navigation"; var Ee = g.createContext(null); Ee.displayName = "Location"; var wt = g.createContext({ outlet: null, matches: [], isDataRoute: !1 }); wt.displayName = "Route"; var Ji = g.createContext(null); Ji.displayName = "RouteError"; var Zr = "REACT_ROUTER_ERROR", ga = "REDIRECT", _a = "ROUTE_ERROR_RESPONSE"; function va(r) { if (r.startsWith(`${Zr}:${ga}:{`)) try { let l = JSON.parse(r.slice(28)); if (typeof l == "object" && l && typeof l.status == "number" && typeof l.statusText == "string" && typeof l.location == "string" && typeof l.reloadDocument == "boolean" && typeof l.replace == "boolean") return l } catch { } } function ya(r) { if (r.startsWith(`${Zr}:${_a}:{`)) try { let l = JSON.parse(r.slice(40)); if (typeof l == "object" && l && typeof l.status == "number" && typeof l.statusText == "string") return new ca(l.status, l.statusText, l.data) } catch { } } function xa(r, { relative: l } = {}) { $(ce(), "useHref() may be used only in the context of a <Router> component."); let { basename: s, navigator: h } = g.useContext(pt), { hash: u, pathname: d, search: f } = je(r, { relative: l }), y = d; return s !== "/" && (y = d === "/" ? s : Ot([s, d])), h.createHref({ pathname: y, search: f, hash: u }) } function ce() { return g.useContext(Ee) != null } function Ut() { return $(ce(), "useLocation() may be used only in the context of a <Router> component."), g.useContext(Ee).location } var Fr = "You should call navigate() in a React.useEffect(), not when your component is first rendered."; function Wr(r) { g.useContext(pt).static || g.useLayoutEffect(r) } function Jt() { let { isDataRoute: r } = g.useContext(wt); return r ? Ia() : wa() } function wa() { $(ce(), "useNavigate() may be used only in the context of a <Router> component."); let r = g.useContext(le), { basename: l, navigator: s } = g.useContext(pt), { matches: h } = g.useContext(wt), { pathname: u } = Ut(), d = JSON.stringify(Yi(h)), f = g.useRef(!1); return Wr(() => { f.current = !0 }), g.useCallback((p, S = {}) => { if (xt(f.current, Fr), !f.current) return; if (typeof p == "number") { s.go(p); return } let b = $i(p, JSON.parse(d), u, S.relative === "path"); r == null && l !== "/" && (b.pathname = b.pathname === "/" ? l : Ot([l, b.pathname])), (S.replace ? s.replace : s.push)(b, S.state, S) }, [l, s, d, u, r]) } var Hr = g.createContext(null); function Ur() { return g.useContext(Hr) } function ba(r) { let l = g.useContext(wt).outlet; return g.useMemo(() => l && g.createElement(Hr.Provider, { value: r }, l), [l, r]) } function Sa() { let { matches: r } = g.useContext(wt), l = r[r.length - 1]; return l ? l.params : {} } function je(r, { relative: l } = {}) { let { matches: s } = g.useContext(wt), { pathname: h } = Ut(), u = JSON.stringify(Yi(s)); return g.useMemo(() => $i(r, JSON.parse(u), h, l === "path"), [r, u, h, l]) } function La(r, l) { return Vr(r, l) } function Vr(r, l, s, h, u) {
    var _; $(ce(), "useRoutes() may be used only in the context of a <Router> component."); let { navigator: d } = g.useContext(pt), { matches: f } = g.useContext(wt), y = f[f.length - 1], p = y ? y.params : {}, S = y ? y.pathname : "/", b = y ? y.pathnameBase : "/", x = y && y.route; {
        let P = x && x.path || ""; Gr(S, !x || P.endsWith("*") || P.endsWith("*?"), `You rendered descendant <Routes> (or called \`useRoutes()\`) at "${S}" (under <Route path="${P}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${P}"> to <Route path="${P === "/" ? "*" : `${P}/*`}">.`)
    } let j = Ut(), T; if (l) { let P = typeof l == "string" ? ae(l) : l; $(b === "/" || ((_ = P.pathname) == null ? void 0 : _.startsWith(b)), `When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${P.pathname}" was given in the \`location\` prop.`), T = P } else T = j; let A = T.pathname || "/", E = A; if (b !== "/") { let P = b.replace(/^\//, "").split("/"); E = "/" + A.replace(/^\//, "").split("/").slice(P.length).join("/") } let M = Mr(r, { pathname: E }); xt(x || M != null, `No routes matched location "${T.pathname}${T.search}${T.hash}" `), xt(M == null || M[M.length - 1].route.element !== void 0 || M[M.length - 1].route.Component !== void 0 || M[M.length - 1].route.lazy !== void 0, `Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`); let C = Ea(M && M.map(P => Object.assign({}, P, { params: Object.assign({}, p, P.params), pathname: Ot([b, d.encodeLocation ? d.encodeLocation(P.pathname.replace(/\?/g, "%3F").replace(/#/g, "%23")).pathname : P.pathname]), pathnameBase: P.pathnameBase === "/" ? b : Ot([b, d.encodeLocation ? d.encodeLocation(P.pathnameBase.replace(/\?/g, "%3F").replace(/#/g, "%23")).pathname : P.pathnameBase]) })), f, s, h, u); return l && C ? g.createElement(Ee.Provider, { value: { location: { pathname: "/", search: "", hash: "", state: null, key: "default", ...T }, navigationType: "POP" } }, C) : C
} function Ca() { let r = Ra(), l = ha(r) ? `${r.status} ${r.statusText}` : r instanceof Error ? r.message : JSON.stringify(r), s = r instanceof Error ? r.stack : null, h = "rgba(200,200,200, 0.5)", u = { padding: "0.5rem", backgroundColor: h }, d = { padding: "2px 4px", backgroundColor: h }, f = null; return console.error("Error handled by React Router default ErrorBoundary:", r), f = g.createElement(g.Fragment, null, g.createElement("p", null, "ðŸ’¿ Hey developer ðŸ‘‹"), g.createElement("p", null, "You can provide a way better UX than this when your app throws errors by providing your own ", g.createElement("code", { style: d }, "ErrorBoundary"), " or", " ", g.createElement("code", { style: d }, "errorElement"), " prop on your route.")), g.createElement(g.Fragment, null, g.createElement("h2", null, "Unexpected Application Error!"), g.createElement("h3", { style: { fontStyle: "italic" } }, l), s ? g.createElement("pre", { style: u }, s) : null, f) } var Pa = g.createElement(Ca, null), qr = class extends g.Component { constructor(r) { super(r), this.state = { location: r.location, revalidation: r.revalidation, error: r.error } } static getDerivedStateFromError(r) { return { error: r } } static getDerivedStateFromProps(r, l) { return l.location !== r.location || l.revalidation !== "idle" && r.revalidation === "idle" ? { error: r.error, location: r.location, revalidation: r.revalidation } : { error: r.error !== void 0 ? r.error : l.error, location: l.location, revalidation: r.revalidation || l.revalidation } } componentDidCatch(r, l) { this.props.onError ? this.props.onError(r, l) : console.error("React Router caught the following error during render", r) } render() { let r = this.state.error; if (this.context && typeof r == "object" && r && "digest" in r && typeof r.digest == "string") { const s = ya(r.digest); s && (r = s) } let l = r !== void 0 ? g.createElement(wt.Provider, { value: this.props.routeContext }, g.createElement(Ji.Provider, { value: r, children: this.props.component })) : this.props.children; return this.context ? g.createElement(ka, { error: r }, l) : l } }; qr.contextType = fa; var Hi = new WeakMap; function ka({ children: r, error: l }) { let { basename: s } = g.useContext(pt); if (typeof l == "object" && l && "digest" in l && typeof l.digest == "string") { let h = va(l.digest); if (h) { let u = Hi.get(l); if (u) throw u; let d = Or(h.location, s); if (Nr && !Hi.get(l)) if (d.isExternal || h.reloadDocument) window.location.href = d.absoluteURL || d.to; else { const f = Promise.resolve().then(() => window.__reactRouterDataRouter.navigate(d.to, { replace: h.replace })); throw Hi.set(l, f), f } return g.createElement("meta", { httpEquiv: "refresh", content: `0;url=${d.absoluteURL || d.to}` }) } } return r } function Ta({ routeContext: r, match: l, children: s }) { let h = g.useContext(le); return h && h.static && h.staticContext && (l.route.errorElement || l.route.ErrorBoundary) && (h.staticContext._deepestRenderedBoundaryId = l.route.id), g.createElement(wt.Provider, { value: r }, s) } function Ea(r, l = [], s = null, h = null, u = null) { if (r == null) { if (!s) return null; if (s.errors) r = s.matches; else if (l.length === 0 && !s.initialized && s.matches.length > 0) r = s.matches; else return null } let d = r, f = s == null ? void 0 : s.errors; if (f != null) { let b = d.findIndex(x => x.route.id && (f == null ? void 0 : f[x.route.id]) !== void 0); $(b >= 0, `Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`), d = d.slice(0, Math.min(d.length, b + 1)) } let y = !1, p = -1; if (s) for (let b = 0; b < d.length; b++) { let x = d[b]; if ((x.route.HydrateFallback || x.route.hydrateFallbackElement) && (p = b), x.route.id) { let { loaderData: j, errors: T } = s, A = x.route.loader && !j.hasOwnProperty(x.route.id) && (!T || T[x.route.id] === void 0); if (x.route.lazy || A) { y = !0, p >= 0 ? d = d.slice(0, p + 1) : d = [d[0]]; break } } } let S = s && h ? (b, x) => { var j, T; h(b, { location: s.location, params: ((T = (j = s.matches) == null ? void 0 : j[0]) == null ? void 0 : T.params) ?? {}, unstable_pattern: ua(s.matches), errorInfo: x }) } : void 0; return d.reduceRight((b, x, j) => { let T, A = !1, E = null, M = null; s && (T = f && x.route.id ? f[x.route.id] : void 0, E = x.route.errorElement || Pa, y && (p < 0 && j === 0 ? (Gr("route-fallback", !1, "No `HydrateFallback` element provided to render during initial hydration"), A = !0, M = null) : p === j && (A = !0, M = x.route.hydrateFallbackElement || null))); let C = l.concat(d.slice(0, j + 1)), _ = () => { let P; return T ? P = E : A ? P = M : x.route.Component ? P = g.createElement(x.route.Component, null) : x.route.element ? P = x.route.element : P = b, g.createElement(Ta, { match: x, routeContext: { outlet: b, matches: C, isDataRoute: s != null }, children: P }) }; return s && (x.route.ErrorBoundary || x.route.errorElement || j === 0) ? g.createElement(qr, { location: s.location, revalidation: s.revalidation, component: E, error: T, children: _(), routeContext: { outlet: null, matches: C, isDataRoute: !0 }, onError: S }) : _() }, null) } function Xi(r) { return `${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.` } function ja(r) { let l = g.useContext(le); return $(l, Xi(r)), l } function Aa(r) { let l = g.useContext(oi); return $(l, Xi(r)), l } function Ma(r) { let l = g.useContext(wt); return $(l, Xi(r)), l } function Qi(r) { let l = Ma(r), s = l.matches[l.matches.length - 1]; return $(s.route.id, `${r} can only be used on routes that contain a unique "id"`), s.route.id } function za() { return Qi("useRouteId") } function Ra() { var h; let r = g.useContext(Ji), l = Aa("useRouteError"), s = Qi("useRouteError"); return r !== void 0 ? r : (h = l.errors) == null ? void 0 : h[s] } function Ia() { let { router: r } = ja("useNavigate"), l = Qi("useNavigate"), s = g.useRef(!1); return Wr(() => { s.current = !0 }), g.useCallback(async (u, d = {}) => { xt(s.current, Fr), s.current && (typeof u == "number" ? await r.navigate(u) : await r.navigate(u, { fromRouteId: l, ...d })) }, [r, l]) } var Cr = {}; function Gr(r, l, s) { !l && !Cr[r] && (Cr[r] = !0, xt(!1, s)) } g.memo(Na); function Na({ routes: r, future: l, state: s, onError: h }) { return Vr(r, void 0, s, h, l) } function Kr({ to: r, replace: l, state: s, relative: h }) { $(ce(), "<Navigate> may be used only in the context of a <Router> component."); let { static: u } = g.useContext(pt); xt(!u, "<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change."); let { matches: d } = g.useContext(wt), { pathname: f } = Ut(), y = Jt(), p = $i(r, Yi(d), f, h === "path"), S = JSON.stringify(p); return g.useEffect(() => { y(JSON.parse(S), { replace: l, state: s, relative: h }) }, [y, S, h, l, s]), null } function Oa(r) { return ba(r.context) } function Nt(r) { $(!1, "A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.") } function Ba({ basename: r = "/", children: l = null, location: s, navigationType: h = "POP", navigator: u, static: d = !1, unstable_useTransitions: f }) { $(!ce(), "You cannot render a <Router> inside another <Router>. You should never have more than one in your app."); let y = r.replace(/^\/*/, "/"), p = g.useMemo(() => ({ basename: y, navigator: u, static: d, unstable_useTransitions: f, future: {} }), [y, u, d, f]); typeof s == "string" && (s = ae(s)); let { pathname: S = "/", search: b = "", hash: x = "", state: j = null, key: T = "default" } = s, A = g.useMemo(() => { let E = Bt(S, y); return E == null ? null : { location: { pathname: E, search: b, hash: x, state: j, key: T }, navigationType: h } }, [y, S, b, x, j, T, h]); return xt(A != null, `<Router basename="${y}"> is not able to match the URL "${S}${b}${x}" because it does not start with the basename, so the <Router> won't render anything.`), A == null ? null : g.createElement(pt.Provider, { value: p }, g.createElement(Ee.Provider, { children: l, value: A })) } function Da({ children: r, location: l }) { return La(qi(r), l) } function qi(r, l = []) { let s = []; return g.Children.forEach(r, (h, u) => { if (!g.isValidElement(h)) return; let d = [...l, u]; if (h.type === g.Fragment) { s.push.apply(s, qi(h.props.children, d)); return } $(h.type === Nt, `[${typeof h.type == "string" ? h.type : h.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`), $(!h.props.index || !h.props.children, "An index route cannot have child routes."); let f = { id: h.props.id || d.join("-"), caseSensitive: h.props.caseSensitive, element: h.props.element, Component: h.props.Component, index: h.props.index, path: h.props.path, middleware: h.props.middleware, loader: h.props.loader, action: h.props.action, hydrateFallbackElement: h.props.hydrateFallbackElement, HydrateFallback: h.props.HydrateFallback, errorElement: h.props.errorElement, ErrorBoundary: h.props.ErrorBoundary, hasErrorBoundary: h.props.hasErrorBoundary === !0 || h.props.ErrorBoundary != null || h.props.errorElement != null, shouldRevalidate: h.props.shouldRevalidate, handle: h.props.handle, lazy: h.props.lazy }; h.props.children && (f.children = qi(h.props.children, d)), s.push(f) }), s } var Qe = "get", ti = "application/x-www-form-urlencoded"; function si(r) { return typeof HTMLElement < "u" && r instanceof HTMLElement } function Za(r) { return si(r) && r.tagName.toLowerCase() === "button" } function Fa(r) { return si(r) && r.tagName.toLowerCase() === "form" } function Wa(r) { return si(r) && r.tagName.toLowerCase() === "input" } function Ha(r) { return !!(r.metaKey || r.altKey || r.ctrlKey || r.shiftKey) } function Ua(r, l) { return r.button === 0 && (!l || l === "_self") && !Ha(r) } var Je = null; function Va() { if (Je === null) try { new FormData(document.createElement("form"), 0), Je = !1 } catch { Je = !0 } return Je } var qa = new Set(["application/x-www-form-urlencoded", "multipart/form-data", "text/plain"]); function Ui(r) { return r != null && !qa.has(r) ? (xt(!1, `"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ti}"`), null) : r } function Ga(r, l) { let s, h, u, d, f; if (Fa(r)) { let y = r.getAttribute("action"); h = y ? Bt(y, l) : null, s = r.getAttribute("method") || Qe, u = Ui(r.getAttribute("enctype")) || ti, d = new FormData(r) } else if (Za(r) || Wa(r) && (r.type === "submit" || r.type === "image")) { let y = r.form; if (y == null) throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>'); let p = r.getAttribute("formaction") || y.getAttribute("action"); if (h = p ? Bt(p, l) : null, s = r.getAttribute("formmethod") || y.getAttribute("method") || Qe, u = Ui(r.getAttribute("formenctype")) || Ui(y.getAttribute("enctype")) || ti, d = new FormData(y, r), !Va()) { let { name: S, type: b, value: x } = r; if (b === "image") { let j = S ? `${S}.` : ""; d.append(`${j}x`, "0"), d.append(`${j}y`, "0") } else S && d.append(S, x) } } else { if (si(r)) throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">'); s = Qe, h = null, u = ti, f = r } return d && u === "text/plain" && (f = d, d = void 0), { action: h, method: s.toLowerCase(), encType: u, formData: d, body: f } } Object.getOwnPropertyNames(Object.prototype).sort().join("\0"); function tn(r, l) { if (r === !1 || r === null || typeof r > "u") throw new Error(l) } function Ka(r, l, s, h) { let u = typeof r == "string" ? new URL(r, typeof window > "u" ? "server://singlefetch/" : window.location.origin) : r; return s ? u.pathname.endsWith("/") ? u.pathname = `${u.pathname}_.${h}` : u.pathname = `${u.pathname}.${h}` : u.pathname === "/" ? u.pathname = `_root.${h}` : l && Bt(u.pathname, l) === "/" ? u.pathname = `${l.replace(/\/$/, "")}/_root.${h}` : u.pathname = `${u.pathname.replace(/\/$/, "")}.${h}`, u } async function Ya(r, l) { if (r.id in l) return l[r.id]; try { let s = await import(r.module); return l[r.id] = s, s } catch (s) { return console.error(`Error loading route module \`${r.module}\`, reloading page...`), console.error(s), window.__reactRouterContext && window.__reactRouterContext.isSpaMode, window.location.reload(), new Promise(() => { }) } } function $a(r) { return r == null ? !1 : r.href == null ? r.rel === "preload" && typeof r.imageSrcSet == "string" && typeof r.imageSizes == "string" : typeof r.rel == "string" && typeof r.href == "string" } async function Ja(r, l, s) { let h = await Promise.all(r.map(async u => { let d = l.routes[u.route.id]; if (d) { let f = await Ya(d, s); return f.links ? f.links() : [] } return [] })); return el(h.flat(1).filter($a).filter(u => u.rel === "stylesheet" || u.rel === "preload").map(u => u.rel === "stylesheet" ? { ...u, rel: "prefetch", as: "style" } : { ...u, rel: "prefetch" })) } function Pr(r, l, s, h, u, d) { let f = (p, S) => s[S] ? p.route.id !== s[S].route.id : !0, y = (p, S) => { var b; return s[S].pathname !== p.pathname || ((b = s[S].route.path) == null ? void 0 : b.endsWith("*")) && s[S].params["*"] !== p.params["*"] }; return d === "assets" ? l.filter((p, S) => f(p, S) || y(p, S)) : d === "data" ? l.filter((p, S) => { var x; let b = h.routes[p.route.id]; if (!b || !b.hasLoader) return !1; if (f(p, S) || y(p, S)) return !0; if (p.route.shouldRevalidate) { let j = p.route.shouldRevalidate({ currentUrl: new URL(u.pathname + u.search + u.hash, window.origin), currentParams: ((x = s[0]) == null ? void 0 : x.params) || {}, nextUrl: new URL(r, window.origin), nextParams: p.params, defaultShouldRevalidate: !0 }); if (typeof j == "boolean") return j } return !0 }) : [] } function Xa(r, l, { includeHydrateFallback: s } = {}) { return Qa(r.map(h => { let u = l.routes[h.route.id]; if (!u) return []; let d = [u.module]; return u.clientActionModule && (d = d.concat(u.clientActionModule)), u.clientLoaderModule && (d = d.concat(u.clientLoaderModule)), s && u.hydrateFallbackModule && (d = d.concat(u.hydrateFallbackModule)), u.imports && (d = d.concat(u.imports)), d }).flat(1)) } function Qa(r) { return [...new Set(r)] } function tl(r) { let l = {}, s = Object.keys(r).sort(); for (let h of s) l[h] = r[h]; return l } function el(r, l) { let s = new Set; return new Set(l), r.reduce((h, u) => { let d = JSON.stringify(tl(u)); return s.has(d) || (s.add(d), h.push({ key: d, link: u })), h }, []) } function Yr() { let r = g.useContext(le); return tn(r, "You must render this element inside a <DataRouterContext.Provider> element"), r } function il() { let r = g.useContext(oi); return tn(r, "You must render this element inside a <DataRouterStateContext.Provider> element"), r } var en = g.createContext(void 0); en.displayName = "FrameworkContext"; function $r() { let r = g.useContext(en); return tn(r, "You must render this element inside a <HydratedRouter> element"), r } function nl(r, l) { let s = g.useContext(en), [h, u] = g.useState(!1), [d, f] = g.useState(!1), { onFocus: y, onBlur: p, onMouseEnter: S, onMouseLeave: b, onTouchStart: x } = l, j = g.useRef(null); g.useEffect(() => { if (r === "render" && f(!0), r === "viewport") { let E = C => { C.forEach(_ => { f(_.isIntersecting) }) }, M = new IntersectionObserver(E, { threshold: .5 }); return j.current && M.observe(j.current), () => { M.disconnect() } } }, [r]), g.useEffect(() => { if (h) { let E = setTimeout(() => { f(!0) }, 100); return () => { clearTimeout(E) } } }, [h]); let T = () => { u(!0) }, A = () => { u(!1), f(!1) }; return s ? r !== "intent" ? [d, j, {}] : [d, j, { onFocus: Ce(y, T), onBlur: Ce(p, A), onMouseEnter: Ce(S, T), onMouseLeave: Ce(b, A), onTouchStart: Ce(x, T) }] : [!1, j, {}] } function Ce(r, l) { return s => { r && r(s), s.defaultPrevented || l(s) } } function rl({ page: r, ...l }) { let { router: s } = Yr(), h = g.useMemo(() => Mr(s.routes, r, s.basename), [s.routes, r, s.basename]); return h ? g.createElement(sl, { page: r, matches: h, ...l }) : null } function ol(r) { let { manifest: l, routeModules: s } = $r(), [h, u] = g.useState([]); return g.useEffect(() => { let d = !1; return Ja(r, l, s).then(f => { d || u(f) }), () => { d = !0 } }, [r, l, s]), h } function sl({ page: r, matches: l, ...s }) { let h = Ut(), { future: u, manifest: d, routeModules: f } = $r(), { basename: y } = Yr(), { loaderData: p, matches: S } = il(), b = g.useMemo(() => Pr(r, l, S, d, h, "data"), [r, l, S, d, h]), x = g.useMemo(() => Pr(r, l, S, d, h, "assets"), [r, l, S, d, h]), j = g.useMemo(() => { if (r === h.pathname + h.search + h.hash) return []; let E = new Set, M = !1; if (l.forEach(_ => { var R; let P = d.routes[_.route.id]; !P || !P.hasLoader || (!b.some(G => G.route.id === _.route.id) && _.route.id in p && ((R = f[_.route.id]) != null && R.shouldRevalidate) || P.hasClientLoader ? M = !0 : E.add(_.route.id)) }), E.size === 0) return []; let C = Ka(r, y, u.unstable_trailingSlashAwareDataRequests, "data"); return M && E.size > 0 && C.searchParams.set("_routes", l.filter(_ => E.has(_.route.id)).map(_ => _.route.id).join(",")), [C.pathname + C.search] }, [y, u.unstable_trailingSlashAwareDataRequests, p, h, d, b, l, r, f]), T = g.useMemo(() => Xa(x, d), [x, d]), A = ol(x); return g.createElement(g.Fragment, null, j.map(E => g.createElement("link", { key: E, rel: "prefetch", as: "fetch", href: E, ...s })), T.map(E => g.createElement("link", { key: E, rel: "modulepreload", href: E, ...s })), A.map(({ key: E, link: M }) => g.createElement("link", { key: E, nonce: s.nonce, ...M }))) } function al(...r) { return l => { r.forEach(s => { typeof s == "function" ? s(l) : s != null && (s.current = l) }) } } var ll = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u"; try { ll && (window.__reactRouterVersion = "7.12.0") } catch { } function cl({ basename: r, children: l, unstable_useTransitions: s, window: h }) { let u = g.useRef(); u.current == null && (u.current = Zs({ window: h, v5Compat: !0 })); let d = u.current, [f, y] = g.useState({ action: d.action, location: d.location }), p = g.useCallback(S => { s === !1 ? y(S) : g.startTransition(() => y(S)) }, [s]); return g.useLayoutEffect(() => d.listen(p), [d, p]), g.createElement(Ba, { basename: r, children: l, location: f.location, navigationType: f.action, navigator: d, unstable_useTransitions: s }) } var Jr = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, Xr = g.forwardRef(function ({ onClick: l, discover: s = "render", prefetch: h = "none", relative: u, reloadDocument: d, replace: f, state: y, target: p, to: S, preventScrollReset: b, viewTransition: x, unstable_defaultShouldRevalidate: j, ...T }, A) { let { basename: E, unstable_useTransitions: M } = g.useContext(pt), C = typeof S == "string" && Jr.test(S), _ = Or(S, E); S = _.to; let P = xa(S, { relative: u }), [R, G, rt] = nl(h, T), at = dl(S, { replace: f, state: y, target: p, preventScrollReset: b, relative: u, viewTransition: x, unstable_defaultShouldRevalidate: j, unstable_useTransitions: M }); function bt(Dt) { l && l(Dt), Dt.defaultPrevented || at(Dt) } let ft = g.createElement("a", { ...T, ...rt, href: _.absoluteURL || P, onClick: _.isExternal || d ? l : bt, ref: al(A, G), target: p, "data-discover": !C && s === "render" ? "true" : void 0 }); return R && !C ? g.createElement(g.Fragment, null, ft, g.createElement(rl, { page: P })) : ft }); Xr.displayName = "Link"; var ei = g.forwardRef(function ({ "aria-current": l = "page", caseSensitive: s = !1, className: h = "", end: u = !1, style: d, to: f, viewTransition: y, children: p, ...S }, b) { let x = je(f, { relative: S.relative }), j = Ut(), T = g.useContext(oi), { navigator: A, basename: E } = g.useContext(pt), M = T != null && _l(x) && y === !0, C = A.encodeLocation ? A.encodeLocation(x).pathname : x.pathname, _ = j.pathname, P = T && T.navigation && T.navigation.location ? T.navigation.location.pathname : null; s || (_ = _.toLowerCase(), P = P ? P.toLowerCase() : null, C = C.toLowerCase()), P && E && (P = Bt(P, E) || P); const R = C !== "/" && C.endsWith("/") ? C.length - 1 : C.length; let G = _ === C || !u && _.startsWith(C) && _.charAt(R) === "/", rt = P != null && (P === C || !u && P.startsWith(C) && P.charAt(C.length) === "/"), at = { isActive: G, isPending: rt, isTransitioning: M }, bt = G ? l : void 0, ft; typeof h == "function" ? ft = h(at) : ft = [h, G ? "active" : null, rt ? "pending" : null, M ? "transitioning" : null].filter(Boolean).join(" "); let Dt = typeof d == "function" ? d(at) : d; return g.createElement(Xr, { ...S, "aria-current": bt, className: ft, ref: b, style: Dt, to: f, viewTransition: y }, typeof p == "function" ? p(at) : p) }); ei.displayName = "NavLink"; var hl = g.forwardRef(({ discover: r = "render", fetcherKey: l, navigate: s, reloadDocument: h, replace: u, state: d, method: f = Qe, action: y, onSubmit: p, relative: S, preventScrollReset: b, viewTransition: x, unstable_defaultShouldRevalidate: j, ...T }, A) => { let { unstable_useTransitions: E } = g.useContext(pt), M = pl(), C = gl(y, { relative: S }), _ = f.toLowerCase() === "get" ? "get" : "post", P = typeof y == "string" && Jr.test(y), R = G => { if (p && p(G), G.defaultPrevented) return; G.preventDefault(); let rt = G.nativeEvent.submitter, at = (rt == null ? void 0 : rt.getAttribute("formmethod")) || f, bt = () => M(rt || G.currentTarget, { fetcherKey: l, method: at, navigate: s, replace: u, state: d, relative: S, preventScrollReset: b, viewTransition: x, unstable_defaultShouldRevalidate: j }); E && s !== !1 ? g.startTransition(() => bt()) : bt() }; return g.createElement("form", { ref: A, method: _, action: C, onSubmit: h ? p : R, ...T, "data-discover": !P && r === "render" ? "true" : void 0 }) }); hl.displayName = "Form"; function ul(r) { return `${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.` } function Qr(r) { let l = g.useContext(le); return $(l, ul(r)), l } function dl(r, { target: l, replace: s, state: h, preventScrollReset: u, relative: d, viewTransition: f, unstable_defaultShouldRevalidate: y, unstable_useTransitions: p } = {}) { let S = Jt(), b = Ut(), x = je(r, { relative: d }); return g.useCallback(j => { if (Ua(j, l)) { j.preventDefault(); let T = s !== void 0 ? s : Te(b) === Te(x), A = () => S(r, { replace: T, state: h, preventScrollReset: u, relative: d, viewTransition: f, unstable_defaultShouldRevalidate: y }); p ? g.startTransition(() => A()) : A() } }, [b, S, x, s, h, l, r, u, d, f, y, p]) } var fl = 0, ml = () => `__${String(++fl)}__`; function pl() { let { router: r } = Qr("useSubmit"), { basename: l } = g.useContext(pt), s = za(), h = r.fetch, u = r.navigate; return g.useCallback(async (d, f = {}) => { let { action: y, method: p, encType: S, formData: b, body: x } = Ga(d, l); if (f.navigate === !1) { let j = f.fetcherKey || ml(); await h(j, s, f.action || y, { unstable_defaultShouldRevalidate: f.unstable_defaultShouldRevalidate, preventScrollReset: f.preventScrollReset, formData: b, body: x, formMethod: f.method || p, formEncType: f.encType || S, flushSync: f.flushSync }) } else await u(f.action || y, { unstable_defaultShouldRevalidate: f.unstable_defaultShouldRevalidate, preventScrollReset: f.preventScrollReset, formData: b, body: x, formMethod: f.method || p, formEncType: f.encType || S, replace: f.replace, state: f.state, fromRouteId: s, flushSync: f.flushSync, viewTransition: f.viewTransition }) }, [h, u, l, s]) } function gl(r, { relative: l } = {}) { let { basename: s } = g.useContext(pt), h = g.useContext(wt); $(h, "useFormAction must be used inside a RouteContext"); let [u] = h.matches.slice(-1), d = { ...je(r || ".", { relative: l }) }, f = Ut(); if (r == null) { d.search = f.search; let y = new URLSearchParams(d.search), p = y.getAll("index"); if (p.some(b => b === "")) { y.delete("index"), p.filter(x => x).forEach(x => y.append("index", x)); let b = y.toString(); d.search = b ? `?${b}` : "" } } return (!r || r === ".") && u.route.index && (d.search = d.search ? d.search.replace(/^\?/, "?index&") : "?index"), s !== "/" && (d.pathname = d.pathname === "/" ? s : Ot([s, d.pathname])), Te(d) } function _l(r, { relative: l } = {}) { let s = g.useContext(Dr); $(s != null, "`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?"); let { basename: h } = Qr("useViewTransitionState"), u = je(r, { relative: l }); if (!s.isTransitioning) return !1; let d = Bt(s.currentLocation.pathname, h) || s.currentLocation.pathname, f = Bt(s.nextLocation.pathname, h) || s.nextLocation.pathname; return ii(u.pathname, f) != null || ii(u.pathname, d) != null } var vl = Os();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yl = r => r.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase(), to = (...r) => r.filter((l, s, h) => !!l && l.trim() !== "" && h.indexOf(l) === s).join(" ").trim();/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xl = { xmlns: "http://www.w3.org/2000/svg", width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" };/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wl = g.forwardRef(({ color: r = "currentColor", size: l = 24, strokeWidth: s = 2, absoluteStrokeWidth: h, className: u = "", children: d, iconNode: f, ...y }, p) => g.createElement("svg", { ref: p, ...xl, width: l, height: l, stroke: r, strokeWidth: h ? Number(s) * 24 / Number(l) : s, className: to("lucide", u), ...y }, [...f.map(([S, b]) => g.createElement(S, b)), ...Array.isArray(d) ? d : [d]]));/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U = (r, l) => { const s = g.forwardRef(({ className: h, ...u }, d) => g.createElement(wl, { ref: d, iconNode: l, className: to(`lucide-${yl(r)}`, h), ...u })); return s.displayName = `${r}`, s };/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bl = [["path", { d: "M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2", key: "169zse" }]], Gi = U("Activity", bl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl = [["path", { d: "m7 7 10 10", key: "1fmybs" }], ["path", { d: "M17 7v10H7", key: "6fjiku" }]], Ll = U("ArrowDownRight", Sl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl = [["path", { d: "m12 19-7-7 7-7", key: "1l729n" }], ["path", { d: "M19 12H5", key: "x3x0zl" }]], Pl = U("ArrowLeft", Cl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl = [["path", { d: "M5 12h14", key: "1ays0h" }], ["path", { d: "m12 5 7 7-7 7", key: "xquz4c" }]], Tl = U("ArrowRight", kl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El = [["path", { d: "m21 16-4 4-4-4", key: "f6ql7i" }], ["path", { d: "M17 20V4", key: "1ejh1v" }], ["path", { d: "m3 8 4-4 4 4", key: "11wl7u" }], ["path", { d: "M7 4v16", key: "1glfcx" }]], jl = U("ArrowUpDown", El);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al = [["path", { d: "M7 7h10v10", key: "1tivn9" }], ["path", { d: "M7 17 17 7", key: "1vkiza" }]], Ml = U("ArrowUpRight", Al);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl = [["path", { d: "M8 2v4", key: "1cmpym" }], ["path", { d: "M16 2v4", key: "4m81vk" }], ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }], ["path", { d: "M3 10h18", key: "8toen8" }]], eo = U("Calendar", zl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rl = [["path", { d: "M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z", key: "1tc9qg" }], ["circle", { cx: "12", cy: "13", r: "3", key: "1vg3eu" }]], Il = U("Camera", Rl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl = [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]], Ol = U("ChevronRight", Nl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl = [["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }], ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]], Dl = U("CircleCheckBig", Bl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]], Fl = U("CircleCheck", Zl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl = [["rect", { width: "8", height: "4", x: "8", y: "2", rx: "1", ry: "1", key: "tgr4d6" }], ["path", { d: "M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2", key: "116196" }], ["path", { d: "M12 11h4", key: "1jrz19" }], ["path", { d: "M12 16h4", key: "n85exb" }], ["path", { d: "M8 11h.01", key: "1dfujw" }], ["path", { d: "M8 16h.01", key: "18s6g9" }]], Hl = U("ClipboardList", Wl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["polyline", { points: "12 6 12 12 16 14", key: "68esgv" }]], ni = U("Clock", Ul);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl = [["polygon", { points: "22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3", key: "1yg77f" }]], ql = U("Filter", Vl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gl = [["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }], ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }], ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }], ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]], Kl = U("LayoutDashboard", Gl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl = [["rect", { x: "3", y: "5", width: "6", height: "6", rx: "1", key: "1defrl" }], ["path", { d: "m3 17 2 2 4-4", key: "1jhpwq" }], ["path", { d: "M13 6h8", key: "15sg57" }], ["path", { d: "M13 12h8", key: "h98zly" }], ["path", { d: "M13 18h8", key: "oe0vm4" }]], $l = U("ListTodo", Yl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jl = [["rect", { width: "18", height: "11", x: "3", y: "11", rx: "2", ry: "2", key: "1w4ew1" }], ["path", { d: "M7 11V7a5 5 0 0 1 10 0v4", key: "fwvmzm" }]], Xl = U("Lock", Jl);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql = [["path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4", key: "1uf3rs" }], ["polyline", { points: "16 17 21 12 16 7", key: "1gabdz" }], ["line", { x1: "21", x2: "9", y1: "12", y2: "12", key: "1uyos4" }]], tc = U("LogOut", Ql);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec = [["path", { d: "M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0", key: "1r0f0z" }], ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]], io = U("MapPin", ec);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic = [["path", { d: "M5 12h14", key: "1ays0h" }]], nc = U("Minus", ic);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc = [["path", { d: "M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z", key: "1a8usu" }]], oc = U("Pen", rc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc = [["path", { d: "M5 12h14", key: "1ays0h" }], ["path", { d: "M12 5v14", key: "s699le" }]], ac = U("Plus", sc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc = [["path", { d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z", key: "1c8476" }], ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }], ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]], cc = U("Save", lc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc = [["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }], ["path", { d: "m21 21-4.3-4.3", key: "1qie3q" }]], kr = U("Search", hc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc = [["path", { d: "M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z", key: "1qme2f" }], ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]], dc = U("Settings", uc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc = [["path", { d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z", key: "oel41y" }], ["path", { d: "M12 8v4", key: "1got3b" }], ["path", { d: "M12 16h.01", key: "1drbdi" }]], nn = U("ShieldAlert", fc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc = [["path", { d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z", key: "oel41y" }], ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]], no = U("ShieldCheck", mc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc = [["rect", { width: "14", height: "20", x: "5", y: "2", rx: "2", ry: "2", key: "1yt0o3" }], ["path", { d: "M12 18h.01", key: "mhygvu" }]], gc = U("Smartphone", pc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c = [["path", { d: "M3 6h18", key: "d0wm0j" }], ["path", { d: "M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6", key: "4alrt4" }], ["path", { d: "M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2", key: "v07s0e" }], ["line", { x1: "10", x2: "10", y1: "11", y2: "17", key: "1uufr5" }], ["line", { x1: "14", x2: "14", y1: "11", y2: "17", key: "xtxkd" }]], vc = U("Trash2", _c);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yc = [["path", { d: "m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3", key: "wmoenq" }], ["path", { d: "M12 9v4", key: "juzpu7" }], ["path", { d: "M12 17h.01", key: "p32p05" }]], rn = U("TriangleAlert", yc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc = [["path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2", key: "975kel" }], ["circle", { cx: "12", cy: "7", r: "4", key: "17ys0d" }]], ri = U("User", xc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc = [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }], ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }], ["path", { d: "M16 3.13a4 4 0 0 1 0 7.75", key: "1da9ce" }]], ro = U("Users", wc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bc = [["path", { d: "M18 6 6 18", key: "1bl5f8" }], ["path", { d: "m6 6 12 12", key: "d8bk6v" }]], Tr = U("X", bc);/**
 * @license lucide-react v0.473.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc = [["path", { d: "M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z", key: "1xq2db" }]], Lc = U("Zap", Sc), Er = [{ id: "u1", name: "Admin Authority", role: "admin", avatar: "https://ui-avatars.com/api/?name=Admin+Authority&background=0D8ABC&color=fff" }, { id: "u2", name: "Rajesh Kumar", role: "staff", department: "water", avatar: "https://ui-avatars.com/api/?name=Rajesh+Kumar&background=random" }, { id: "u3", name: "Priya Singh", role: "staff", department: "roads", avatar: "https://ui-avatars.com/api/?name=Priya+Singh&background=random" }, { id: "u4", name: "Amit Patel", role: "staff", department: "waste", avatar: "https://ui-avatars.com/api/?name=Amit+Patel&background=random" }, { id: "u5", name: "Suresh Reddi", role: "staff", department: "power", avatar: "https://ui-avatars.com/api/?name=Suresh+Reddi&background=random" }], $t = [{ id: "water", label: "Water Supply", color: "var(--color-blue-500)" }, { id: "roads", label: "Roads & Transport", color: "var(--color-slate-500)" }, { id: "drainage", label: "Drainage & Gutters", color: "var(--color-amber-600)" }, { id: "lighting", label: "Street Lighting", color: "var(--color-yellow-500)" }, { id: "waste", label: "Waste Management", color: "var(--color-green-600)" }, { id: "power", label: "Power Grid", color: "var(--color-orange-500)" }], q = Date.now(), tt = 36e5, Et = 24 * tt, ai = [{ id: "ISS-001", sector: "water", source: "iot", location: { lat: 19.076, lng: 72.8777, address: "12th Main Rd, Block C" }, status: "pending", priority: "High", riskLevel: "Crisis", title: "Major Pipe Burst", description: "Main water supply line burst flooding the street. Immediate attention required.", reportedAt: new Date(q - 15 * 6e4).toISOString(), image: "https://images.unsplash.com/photo-1585976251273-0a786da3734a", aiAnalysis: { isReal: !0, confidence: .98, impacts: ["8,000 residents affected", "Flooding risk"] }, severity: "high" }, { id: "ISS-002", sector: "power", source: "citizen", location: { lat: 19.082, lng: 72.89, address: "Sector 4 Substation" }, status: "pending", priority: "High", riskLevel: "Critical", title: "Live Wire Exposed", description: "Storm damaged pole, live wire hanging near school entrance.", reportedAt: new Date(q - 45 * 6e4).toISOString(), image: "https://images.unsplash.com/photo-1495573258723-29cc7098c8c5?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .95, impacts: ["Safety Hazard", "School Zone"] }, severity: "high" }, { id: "ISS-003", sector: "roads", source: "citizen", location: { lat: 19.085, lng: 72.865, address: "Highway Exit 5" }, status: "in-progress", priority: "High", riskLevel: "Critical", title: "Bridge Wall Collapse", description: "Retaining wall section collapsed blocking left lane.", reportedAt: new Date(q - 1 * tt).toISOString(), assignedTo: "u3", image: "https://images.unsplash.com/photo-1518709414768-a88981a45e5d?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .99, impacts: ["Traffic blocked", "Structural integrity"] }, severity: "high" }, { id: "ISS-004", sector: "waste", source: "citizen", location: { lat: 19.065, lng: 72.86, address: "Residential Zone A" }, status: "pending", priority: "Medium", riskLevel: "Moderate", title: "Missed Garbage Collection", description: "Bin overflowing, truck did not arrive today.", reportedAt: new Date(q - 3 * tt).toISOString(), image: "https://images.unsplash.com/photo-1530587191325-3db32d826c18?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .88 }, severity: "medium" }, { id: "ISS-007", sector: "roads", source: "citizen", location: { lat: 19.088, lng: 72.87, address: "Link Road" }, status: "pending", priority: "Medium", riskLevel: "Moderate", title: "Deep Pothole", description: "Large pothole in middle of junction causing slow traffic.", reportedAt: new Date(q - 5 * tt).toISOString(), image: "https://images.unsplash.com/photo-1515162816999-a0c47dc192f7?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .94 }, severity: "medium" }, { id: "ISS-020", sector: "lighting", source: "citizen", location: { lat: 19.091, lng: 72.855, address: "Gandhi Market" }, status: "pending", priority: "Low", riskLevel: "Low", title: "Streetlight Flickering", description: "Light flickering constantly, annoying residents.", reportedAt: new Date(q - 6 * tt).toISOString(), image: null, severity: "low" }, { id: "ISS-FAKE-01", sector: "waste", source: "citizen", location: { lat: 19.07, lng: 72.88, address: "Market Road" }, status: "rejected", priority: "Low", riskLevel: "Low", title: "Garbage Dump Overflow", description: "Reported massive dump, AI verification failed.", reportedAt: new Date(q - 2 * tt).toISOString(), image: "https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !1, confidence: .99, details: "Generative artifacts detected." }, severity: "low" }, { id: "ISS-FAKE-02", sector: "roads", source: "citizen", location: { lat: 19.09, lng: 72.85, address: "North Avenue" }, status: "rejected", priority: "Medium", riskLevel: "Low", title: "Sinkhole", description: "Claim of massive sinkhole.", reportedAt: new Date(q - 4 * tt).toISOString(), image: "https://images.unsplash.com/photo-1621503837267-36e355c42345?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !1, confidence: .96, details: "Inconsistent lighting shadows." }, severity: "medium" }, { id: "ISS-005", sector: "lighting", source: "iot", location: { lat: 19.078, lng: 72.882, address: "Central Park" }, status: "in-progress", priority: "Medium", riskLevel: "Moderate", title: "Streetlight Cluster Failure", description: "Automated alert: 5 lights offline in sector.", reportedAt: new Date(q - 8 * tt).toISOString(), assignedTo: "u5", severity: "medium" }, { id: "ISS-008", sector: "drainage", source: "iot", location: { lat: 19.074, lng: 72.868, address: "Low Lying Area 2" }, status: "normal", priority: "Low", riskLevel: "Low", title: "Water Level Check", description: "Routine check pass. Level at 45%.", reportedAt: new Date(q - 30 * 6e4).toISOString(), severity: "low" }, { id: "ISS-006", sector: "water", source: "citizen", location: { lat: 19.071, lng: 72.875, address: "5th Cross Road" }, status: "resolved", priority: "Low", riskLevel: "Low", title: "Minor Leakage", description: "Water dripping from valve.", reportedAt: new Date(q - 2 * Et).toISOString(), image: "https://images.unsplash.com/photo-1610555356070-d0efb6505f81?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .92 }, severity: "low" }, { id: "ISS-012", sector: "roads", source: "citizen", location: { lat: 19.086, lng: 72.895, address: "Eastern Express Hwy" }, status: "completed", priority: "Low", riskLevel: "Low", title: "Signage Damaged", description: "Direction board leaning dangerously.", reportedAt: new Date(q - 3 * Et).toISOString(), severity: "low" }, { id: "SCH-001", sector: "water", source: "system", location: { address: "Sector 7 Reservoir" }, status: "pending", priority: "Medium", title: "Quarterly Reservoir Cleaning", description: "Routine cleaning and water quality testing.", scheduledStart: new Date(q).toISOString(), scheduledEnd: new Date(q + 4 * tt).toISOString(), assignedTo: "u2", severity: "medium" }, { id: "SCH-002", sector: "power", source: "system", location: { address: "Main Grid Station" }, status: "pending", priority: "High", title: "Transformer Maintenance", description: "Oil replacement and contact cleaning.", scheduledStart: new Date(q + 1 * Et).toISOString(), scheduledEnd: new Date(q + 1 * Et + 4 * tt).toISOString(), assignedTo: "u5", severity: "high" }, { id: "SCH-003", sector: "roads", source: "system", location: { address: "Highway Overpass" }, status: "in-progress", priority: "Medium", title: "Structural Inspection", description: "Annual structural integrity check.", scheduledStart: new Date(q - 1 * Et).toISOString(), scheduledEnd: new Date(q - 1 * Et + 5 * tt).toISOString(), assignedTo: "u3", severity: "medium" }, { id: "SCH-004", sector: "waste", source: "system", location: { address: "Zone B Collection Point" }, status: "pending", priority: "Low", title: "Bin Replacement Drive", description: "Replacing damaged community bins in Zone B.", scheduledStart: new Date(q + 3 * Et).toISOString(), scheduledEnd: new Date(q + 3 * Et + 8 * tt).toISOString(), assignedTo: "u4", severity: "low" }, { id: "SCH-005", sector: "lighting", source: "system", location: { address: "Central Park Perimeter" }, status: "completed", priority: "Low", title: "LED Upgrade Phase 2", description: "Replacing old sodium vapor lamps with LEDs.", scheduledStart: new Date(q - 2 * Et).toISOString(), scheduledEnd: new Date(q - 2 * Et + 6 * tt).toISOString(), assignedTo: "u5", severity: "low" }, { id: "ISS-ENV-01", sector: "drainage", source: "citizen", location: { lat: 19.068, lng: 72.865, address: "Industrial Zone Creek" }, status: "pending", priority: "High", riskLevel: "Crisis", title: "Chemical Spill in Creek", description: "Green toxic liquid seen entering the stormwater drain. Terrible smell, fish dying.", reportedAt: new Date(q - 1 * tt).toISOString(), image: "https://images.unsplash.com/photo-1621451537084-482c73073a0f?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .96 }, severity: "high" }, { id: "ISS-SOC-01", sector: "water", source: "citizen", location: { lat: 19.055, lng: 72.85, address: "Dharavi Sector 5" }, status: "pending", priority: "High", riskLevel: "Crisis", title: "No Water in Slum Colony", description: "300+ families without drinking water for 24 hours. Vulnerable elderly affected.", reportedAt: new Date(q - 2 * tt).toISOString(), image: "https://images.unsplash.com/photo-1594488518004-948f2197486a?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .92 }, severity: "high" }, { id: "ISS-FIN-01", sector: "roads", source: "citizen", location: { lat: 19.095, lng: 72.84, address: "Main Market Junction" }, status: "in-progress", priority: "High", riskLevel: "Critical", title: "Market Access Blocked", description: "Road cave-in blocking entry to wholesale market. Heavy financial loss expected for traders.", reportedAt: new Date(q - 4 * tt).toISOString(), image: "https://images.unsplash.com/photo-1584467142646-3b320df6af8a?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .95 }, severity: "high" }, { id: "ISS-SYS-01", sector: "power", source: "iot", location: { lat: 19.08, lng: 72.89, address: "Central Control Grid" }, status: "pending", priority: "High", riskLevel: "Crisis", title: "Substation Fire Risk", description: "Transformer overheating significantly. Risk of cascading failure to Metro line power.", reportedAt: new Date(q - 10 * 6e4).toISOString(), aiAnalysis: { isReal: !0, confidence: .99 }, severity: "high" }, { id: "ISS-REP-01", sector: "waste", source: "citizen", location: { lat: 19.07, lng: 72.83, address: "Tourist Promenade" }, status: "pending", priority: "Medium", riskLevel: "Critical", title: "Garbage Pile on Beach", description: "Huge pile of rotting waste on tourist beach. Trending on Twitter.", reportedAt: new Date(q - 3 * tt).toISOString(), image: "https://images.unsplash.com/photo-1605218427360-1288aa0b5559?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .94 }, severity: "medium" }, { id: "ISS-INF-01", sector: "roads", source: "citizen", location: { lat: 19.06, lng: 72.85, address: "City General Hospital" }, status: "pending", priority: "High", riskLevel: "Critical", title: "Ambulance Route Potholes", description: "Deep potholes at hospital entrance slowing down emergency vehicles.", reportedAt: new Date(q - 5 * tt).toISOString(), image: "https://images.unsplash.com/photo-1541457523724-95f00f7c9b0e?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !0, confidence: .91 }, severity: "medium" }, { id: "ISS-JUR-01", sector: "drainage", source: "citizen", location: { lat: 19.085, lng: 72.845, address: "Railway Crossing 4" }, status: "pending", priority: "Medium", riskLevel: "High", title: "Track Flooding Imminent", description: "Drain clogging near railway tracks. Needs coordination with Railway Authority.", reportedAt: new Date(q - 45 * 6e4).toISOString(), aiAnalysis: { isReal: !0, confidence: .89 }, severity: "medium" }, { id: "ISS-VIG-01", sector: "roads", source: "citizen", location: { lat: 19.075, lng: 72.885, address: "Sector 3" }, status: "rejected", priority: "Low", riskLevel: "Low", title: "Monster Pothole", description: "There is a dinosaur in the pothole.", reportedAt: new Date(q - 1 * tt).toISOString(), image: "https://images.unsplash.com/photo-1534237710431-e2fc698436d0?auto=format&fit=crop&q=80", aiAnalysis: { isReal: !1, confidence: .99, details: "Clearly modified image." }, severity: "low" }, { id: "ISS-TEMP-01", sector: "lighting", source: "citizen", location: { lat: 19.09, lng: 72.86, address: "Women Safety Zone" }, status: "pending", priority: "High", riskLevel: "Critical", title: "Dark Spot in Safety Zone", description: "Streetlights off in designated women safety corridor. Urgent fix needed.", reportedAt: new Date(q - 6 * tt).toISOString(), severity: "high" }, { id: "ISS-REC-01", sector: "water", source: "citizen", location: { lat: 19.062, lng: 72.87, address: "B-Wing Housing" }, status: "pending", priority: "Medium", riskLevel: "Moderate", title: "Recurring Contamination", description: "Water smells like sewage again properly. Third complaint in a month.", reportedAt: new Date(q - 2 * tt).toISOString(), aiAnalysis: { isReal: !0, confidence: .88 }, severity: "medium" }], Cc = [{ id: "SEN-W-001", type: "pressure", sector: "water", label: "Main Line Pressure Monitor", value: 12.5, unit: "bar", range: { min: 15, max: 25 }, status: "critical", trend: "falling", lastUpdated: "Just now", location: { lat: 19.076, lng: 72.8777, address: "12th Main Rd, Block C" } }, { id: "SEN-W-002", type: "flow", sector: "water", label: "Distribution Flow Rate", value: 2400, unit: "L/min", range: { min: 800, max: 1500 }, status: "warning", trend: "rising", lastUpdated: "5 mins ago", location: { lat: 19.0765, lng: 72.878, address: "12th Main Rd, Junction" } }, { id: "SEN-D-001", type: "level", sector: "drainage", label: "Sewer Level S-4", value: 45, unit: "%", range: { min: 0, max: 75 }, status: "normal", trend: "stable", lastUpdated: "10 mins ago", location: { lat: 19.075, lng: 72.875, address: "Market Road" } }, { id: "SEN-L-001", type: "voltage", sector: "lighting", label: "Pole 45 Controller", value: 180, unit: "V", range: { min: 210, max: 240 }, status: "warning", trend: "unstable", lastUpdated: "1 hour ago", location: { lat: 19.08, lng: 72.88, address: "Sector 4 Park" } }, { id: "SEN-P-001", type: "load", sector: "power", label: "Substation Load Monitor", value: 92, unit: "%", range: { min: 0, max: 90 }, status: "warning", trend: "rising", lastUpdated: "15 mins ago", location: { lat: 19.082, lng: 72.89, address: "Sector 4 Substation" } }, { id: "SEN-R-001", type: "vibration", sector: "roads", label: "Bridge 4 Structural Monitor", value: .1, unit: "g", range: { min: 0, max: .5 }, status: "normal", trend: "stable", lastUpdated: "2 mins ago", location: { lat: 19.085, lng: 72.89, address: "City Bridge" } }, { id: "SEN-E-001", type: "flood_risk", sector: "drainage", label: "Low-lying Area Flood Sensor", value: "Low", unit: "Risk", status: "normal", trend: "stable", lastUpdated: "30 mins ago", location: { lat: 19.07, lng: 72.86, address: "Coastal Road" } }], Pc = (r, l, s) => Cc.filter(h => h.sector === s || Math.abs(h.location.lat - r) < .005 && Math.abs(h.location.lng - l) < .005), kc = () => { Jt(); const r = () => { localStorage.removeItem("user"), window.location.href = "./" }; return o.jsxs("div", { className: "sidebar", children: [o.jsxs("div", { style: { padding: "0 0.5rem 2rem 0.5rem", display: "flex", alignItems: "center", gap: "0.75rem" }, children: [o.jsx("div", { style: { width: 32, height: 32, background: "var(--color-primary)", borderRadius: 8, display: "grid", placeItems: "center", color: "white" }, children: o.jsx(nn, { size: 20 }) }), o.jsxs("div", { children: [o.jsx("h3", { style: { fontSize: "1.1rem" }, children: "MuniSafe" }), o.jsx("span", { style: { fontSize: "0.75rem", color: "var(--color-text-muted)" }, children: "Admin Dashboard" })] })] }), o.jsxs("nav", { style: { flex: 1 }, children: [o.jsxs(ei, { to: "/", className: ({ isActive: l }) => `nav-item ${l ? "active" : ""}`, children: [o.jsx(Kl, { size: 20 }), o.jsx("span", { children: "Overview" })] }), o.jsxs(ei, { to: "/issues", className: ({ isActive: l }) => `nav-item ${l ? "active" : ""}`, children: [o.jsx($l, { size: 20 }), o.jsx("span", { children: "Issue Management" })] }), o.jsxs("div", { className: "nav-item", style: { opacity: .5, cursor: "not-allowed" }, children: [o.jsx(dc, { size: 20 }), o.jsx("span", { children: "Settings (Locked)" })] })] }), o.jsxs("button", { onClick: r, className: "nav-item", style: { marginTop: "auto", border: "none", background: "transparent", cursor: "pointer", width: "100%" }, children: [o.jsx(tc, { size: 20 }), o.jsx("span", { children: "Logout" })] })] }) }, Tc = () => { const [r, l] = Ht.useState(ai); return o.jsxs("div", { className: "layout-container", children: [o.jsx(kc, {}), o.jsx("main", { className: "main-content", children: o.jsx(Oa, { context: { issues: r, setIssues: l } }) })] }) }, Ec = () => { const [r, l] = g.useState("admin@city.gov"), [s, h] = g.useState("password"), [u, d] = g.useState("admin"), [f, y] = g.useState(!1), [p, S] = g.useState(""), b = Jt(), x = g.useRef(null), j = g.useRef(null); g.useEffect(() => { const A = x.current; if (!A) return; const E = M => { const C = (window.innerWidth / 2 - M.pageX) / 25, _ = (window.innerHeight / 2 - M.pageY) / 25; A.style.transform = `rotateY(${C}deg) rotateX(${_}deg)` }; return document.addEventListener("mousemove", E), () => { document.removeEventListener("mousemove", E) } }, []), g.useEffect(() => { const A = j.current; if (!A) return; const E = C => { const _ = A.getBoundingClientRect(), P = C.clientX - _.left - _.width / 2, R = C.clientY - _.top - _.height / 2; A.style.transform = `translate(${P * .2}px, ${R * .2}px) translateZ(20px)` }, M = () => { A.style.transform = "translate(0px, 0px) translateZ(20px)" }; return A.addEventListener("mousemove", E), A.addEventListener("mouseleave", M), () => { A.removeEventListener("mousemove", E), A.removeEventListener("mouseleave", M) } }, []); const T = async A => { var E, M; A.preventDefault(), y(!0), S(""); try { await new Promise(_ => setTimeout(_, 1e3)); const C = { role: u, name: "Admin User" }; localStorage.setItem("user", JSON.stringify(C)), localStorage.setItem("user_role", C.role), localStorage.setItem("is_authenticated", "true"), b("/") } catch (C) { S(((M = (E = C.response) == null ? void 0 : E.data) == null ? void 0 : M.message) || "Login failed") } finally { y(!1) } }; return o.jsxs("div", { className: "h-screen w-full flex items-center justify-center overflow-hidden relative", style: { background: "#0f172a" }, children: [" ", o.jsxs("div", { className: "absolute inset-0 z-0", children: [o.jsx("img", { src: "https://images.unsplash.com/photo-1480714378408-67cf0d13bc1b?q=80&w=2070&auto=format&fit=crop", className: "w-full h-full object-cover opacity-40", alt: "City Background" }), o.jsx("div", { className: "absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/80 to-slate-900/40" })] }), o.jsxs("div", { id: "login-card", ref: x, className: "glass-card z-10 p-10 rounded-2xl w-full max-w-md transform transition-all duration-100 ease-out", style: { transformStyle: "preserve-3d" }, children: [o.jsxs("div", { className: "text-center mb-8 levitate-icon", style: { transform: "translateZ(30px)" }, children: [o.jsx("div", { className: "inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-600/20 text-blue-400 mb-4 ring-1 ring-blue-500/50 shadow-[0_0_30px_rgba(59,130,246,0.5)]", children: o.jsx(no, { size: 32 }) }), o.jsx("h1", { className: "text-3xl font-bold text-white tracking-tight mt-2", children: "Nagarsevak AI" }), o.jsx("p", { className: "text-slate-400 text-sm mt-1", children: "Unified Municipal Command" })] }), o.jsx("div", { className: "flex justify-center mb-8", style: { transform: "translateZ(20px)" }, children: o.jsxs("div", { className: "bg-slate-800/80 p-1 rounded-full flex relative", children: [o.jsx("div", { className: "absolute top-1 left-1 w-[calc(50%-4px)] h-[calc(100%-8px)] bg-blue-600 rounded-full transition-all duration-300", style: { transform: u === "staff" ? "translateX(100%)" : "translateX(0%)", width: "92px" } }), o.jsx("button", { onClick: () => d("admin"), className: `relative z-10 w-24 py-1.5 text-sm font-medium transition-colors ${u === "admin" ? "text-white" : "text-slate-400 hover:text-white"}`, children: "Admin" }), o.jsx("button", { onClick: () => d("staff"), className: `relative z-10 w-24 py-1.5 text-sm font-medium transition-colors ${u === "staff" ? "text-white" : "text-slate-400 hover:text-white"}`, children: "Staff" })] }) }), o.jsxs("form", { onSubmit: T, className: "space-y-5", style: { transform: "translateZ(10px)" }, children: [p && o.jsx("div", { className: "bg-red-500/10 border border-red-500/50 text-red-200 text-sm p-3 rounded-xl text-center", children: p }), o.jsxs("div", { className: "relative group", children: [o.jsx(ri, { className: "absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors", size: 18 }), o.jsx("input", { type: "text", placeholder: "Username", value: r, onChange: A => l(A.target.value), className: "w-full bg-slate-800/50 text-white pl-12 pr-4 py-3.5 rounded-xl border border-slate-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-slate-800 transition-all outline-none placeholder:text-slate-500" })] }), o.jsxs("div", { className: "relative group", children: [o.jsx(Xl, { className: "absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-focus-within:text-blue-400 transition-colors", size: 18 }), o.jsx("input", { type: "password", placeholder: "Password", value: s, onChange: A => h(A.target.value), className: "w-full bg-slate-800/50 text-white pl-12 pr-4 py-3.5 rounded-xl border border-slate-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:bg-slate-800 transition-all outline-none placeholder:text-slate-500" })] }), o.jsxs("button", { ref: j, type: "submit", disabled: f, className: "w-full mt-8 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-600/30 hover:shadow-blue-600/50 transition-all relative overflow-hidden group disabled:opacity-70 disabled:cursor-not-allowed", style: { transform: "translateZ(20px)" }, children: [o.jsx("span", { className: "relative z-10", children: f ? "Authenticating..." : "Initialize System" }), o.jsx("div", { className: "absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300" })] })] })] })] }) }; function oo(r, l) { const s = g.useRef(l); g.useEffect(function () { l !== s.current && r.attributionControl != null && (s.current != null && r.attributionControl.removeAttribution(s.current), l != null && r.attributionControl.addAttribution(l)), s.current = l }, [r, l]) } const jc = 1; function Ac(r) { return Object.freeze({ __version: jc, map: r }) } function Mc(r, l) { return Object.freeze({ ...r, ...l }) } const so = g.createContext(null), ao = so.Provider; function on() { const r = g.useContext(so); if (r == null) throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>"); return r } function zc(r) { function l(s, h) { const { instance: u, context: d } = r(s).current; return g.useImperativeHandle(h, () => u), s.children == null ? null : Ht.createElement(ao, { value: d }, s.children) } return g.forwardRef(l) } function Rc(r) { function l(s, h) { const [u, d] = g.useState(!1), { instance: f } = r(s, d).current; g.useImperativeHandle(h, () => f), g.useEffect(function () { u && f.update() }, [f, u, s.children]); const y = f._contentNode; return y ? vl.createPortal(s.children, y) : null } return g.forwardRef(l) } function Ic(r) { function l(s, h) { const { instance: u } = r(s).current; return g.useImperativeHandle(h, () => u), null } return g.forwardRef(l) } function lo(r, l) { const s = g.useRef(); g.useEffect(function () { return l != null && r.instance.on(l), s.current = l, function () { s.current != null && r.instance.off(s.current), s.current = null } }, [r, l]) } function sn(r, l) { const s = r.pane ?? l.pane; return s ? { ...r, pane: s } : r } function Nc(r, l) { return function (h, u) { const d = on(), f = r(sn(h, d), d); return oo(d.map, h.attribution), lo(f.current, h.eventHandlers), l(f.current, d, h, u), f } } var ke = { exports: {} };/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Oc = ke.exports, jr; function Bc() { return jr || (jr = 1, (function (r, l) { (function (s, h) { h(l) })(Oc, (function (s) { var h = "1.9.4"; function u(t) { var e, i, n, a; for (i = 1, n = arguments.length; i < n; i++) { a = arguments[i]; for (e in a) t[e] = a[e] } return t } var d = Object.create || (function () { function t() { } return function (e) { return t.prototype = e, new t } })(); function f(t, e) { var i = Array.prototype.slice; if (t.bind) return t.bind.apply(t, i.call(arguments, 1)); var n = i.call(arguments, 2); return function () { return t.apply(e, n.length ? n.concat(i.call(arguments)) : arguments) } } var y = 0; function p(t) { return "_leaflet_id" in t || (t._leaflet_id = ++y), t._leaflet_id } function S(t, e, i) { var n, a, c, m; return m = function () { n = !1, a && (c.apply(i, a), a = !1) }, c = function () { n ? a = arguments : (t.apply(i, arguments), setTimeout(m, e), n = !0) }, c } function b(t, e, i) { var n = e[1], a = e[0], c = n - a; return t === n && i ? t : ((t - a) % c + c) % c + a } function x() { return !1 } function j(t, e) { if (e === !1) return t; var i = Math.pow(10, e === void 0 ? 6 : e); return Math.round(t * i) / i } function T(t) { return t.trim ? t.trim() : t.replace(/^\s+|\s+$/g, "") } function A(t) { return T(t).split(/\s+/) } function E(t, e) { Object.prototype.hasOwnProperty.call(t, "options") || (t.options = t.options ? d(t.options) : {}); for (var i in e) t.options[i] = e[i]; return t.options } function M(t, e, i) { var n = []; for (var a in t) n.push(encodeURIComponent(i ? a.toUpperCase() : a) + "=" + encodeURIComponent(t[a])); return (!e || e.indexOf("?") === -1 ? "?" : "&") + n.join("&") } var C = /\{ *([\w_ -]+) *\}/g; function _(t, e) { return t.replace(C, function (i, n) { var a = e[n]; if (a === void 0) throw new Error("No value provided for variable " + i); return typeof a == "function" && (a = a(e)), a }) } var P = Array.isArray || function (t) { return Object.prototype.toString.call(t) === "[object Array]" }; function R(t, e) { for (var i = 0; i < t.length; i++)if (t[i] === e) return i; return -1 } var G = "data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="; function rt(t) { return window["webkit" + t] || window["moz" + t] || window["ms" + t] } var at = 0; function bt(t) { var e = +new Date, i = Math.max(0, 16 - (e - at)); return at = e + i, window.setTimeout(t, i) } var ft = window.requestAnimationFrame || rt("RequestAnimationFrame") || bt, Dt = window.cancelAnimationFrame || rt("CancelAnimationFrame") || rt("CancelRequestAnimationFrame") || function (t) { window.clearTimeout(t) }; function ct(t, e, i) { if (i && ft === bt) t.call(e); else return ft.call(window, f(t, e)) } function gt(t) { t && Dt.call(window, t) } var ho = { __proto__: null, extend: u, create: d, bind: f, get lastId() { return y }, stamp: p, throttle: S, wrapNum: b, falseFn: x, formatNum: j, trim: T, splitWords: A, setOptions: E, getParamString: M, template: _, isArray: P, indexOf: R, emptyImageUrl: G, requestFn: ft, cancelFn: Dt, requestAnimFrame: ct, cancelAnimFrame: gt }; function jt() { } jt.extend = function (t) { var e = function () { E(this), this.initialize && this.initialize.apply(this, arguments), this.callInitHooks() }, i = e.__super__ = this.prototype, n = d(i); n.constructor = e, e.prototype = n; for (var a in this) Object.prototype.hasOwnProperty.call(this, a) && a !== "prototype" && a !== "__super__" && (e[a] = this[a]); return t.statics && u(e, t.statics), t.includes && (uo(t.includes), u.apply(null, [n].concat(t.includes))), u(n, t), delete n.statics, delete n.includes, n.options && (n.options = i.options ? d(i.options) : {}, u(n.options, t.options)), n._initHooks = [], n.callInitHooks = function () { if (!this._initHooksCalled) { i.callInitHooks && i.callInitHooks.call(this), this._initHooksCalled = !0; for (var c = 0, m = n._initHooks.length; c < m; c++)n._initHooks[c].call(this) } }, e }, jt.include = function (t) { var e = this.prototype.options; return u(this.prototype, t), t.options && (this.prototype.options = e, this.mergeOptions(t.options)), this }, jt.mergeOptions = function (t) { return u(this.prototype.options, t), this }, jt.addInitHook = function (t) { var e = Array.prototype.slice.call(arguments, 1), i = typeof t == "function" ? t : function () { this[t].apply(this, e) }; return this.prototype._initHooks = this.prototype._initHooks || [], this.prototype._initHooks.push(i), this }; function uo(t) { if (!(typeof L > "u" || !L || !L.Mixin)) { t = P(t) ? t : [t]; for (var e = 0; e < t.length; e++)t[e] === L.Mixin.Events && console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.", new Error().stack) } } var mt = { on: function (t, e, i) { if (typeof t == "object") for (var n in t) this._on(n, t[n], e); else { t = A(t); for (var a = 0, c = t.length; a < c; a++)this._on(t[a], e, i) } return this }, off: function (t, e, i) { if (!arguments.length) delete this._events; else if (typeof t == "object") for (var n in t) this._off(n, t[n], e); else { t = A(t); for (var a = arguments.length === 1, c = 0, m = t.length; c < m; c++)a ? this._off(t[c]) : this._off(t[c], e, i) } return this }, _on: function (t, e, i, n) { if (typeof e != "function") { console.warn("wrong listener type: " + typeof e); return } if (this._listens(t, e, i) === !1) { i === this && (i = void 0); var a = { fn: e, ctx: i }; n && (a.once = !0), this._events = this._events || {}, this._events[t] = this._events[t] || [], this._events[t].push(a) } }, _off: function (t, e, i) { var n, a, c; if (this._events && (n = this._events[t], !!n)) { if (arguments.length === 1) { if (this._firingCount) for (a = 0, c = n.length; a < c; a++)n[a].fn = x; delete this._events[t]; return } if (typeof e != "function") { console.warn("wrong listener type: " + typeof e); return } var m = this._listens(t, e, i); if (m !== !1) { var v = n[m]; this._firingCount && (v.fn = x, this._events[t] = n = n.slice()), n.splice(m, 1) } } }, fire: function (t, e, i) { if (!this.listens(t, i)) return this; var n = u({}, e, { type: t, target: this, sourceTarget: e && e.sourceTarget || this }); if (this._events) { var a = this._events[t]; if (a) { this._firingCount = this._firingCount + 1 || 1; for (var c = 0, m = a.length; c < m; c++) { var v = a[c], w = v.fn; v.once && this.off(t, w, v.ctx), w.call(v.ctx || this, n) } this._firingCount-- } } return i && this._propagateEvent(n), this }, listens: function (t, e, i, n) { typeof t != "string" && console.warn('"string" type argument expected'); var a = e; typeof e != "function" && (n = !!e, a = void 0, i = void 0); var c = this._events && this._events[t]; if (c && c.length && this._listens(t, a, i) !== !1) return !0; if (n) { for (var m in this._eventParents) if (this._eventParents[m].listens(t, e, i, n)) return !0 } return !1 }, _listens: function (t, e, i) { if (!this._events) return !1; var n = this._events[t] || []; if (!e) return !!n.length; i === this && (i = void 0); for (var a = 0, c = n.length; a < c; a++)if (n[a].fn === e && n[a].ctx === i) return a; return !1 }, once: function (t, e, i) { if (typeof t == "object") for (var n in t) this._on(n, t[n], e, !0); else { t = A(t); for (var a = 0, c = t.length; a < c; a++)this._on(t[a], e, i, !0) } return this }, addEventParent: function (t) { return this._eventParents = this._eventParents || {}, this._eventParents[p(t)] = t, this }, removeEventParent: function (t) { return this._eventParents && delete this._eventParents[p(t)], this }, _propagateEvent: function (t) { for (var e in this._eventParents) this._eventParents[e].fire(t.type, u({ layer: t.target, propagatedFrom: t.target }, t), !0) } }; mt.addEventListener = mt.on, mt.removeEventListener = mt.clearAllEventListeners = mt.off, mt.addOneTimeEventListener = mt.once, mt.fireEvent = mt.fire, mt.hasEventListeners = mt.listens; var he = jt.extend(mt); function B(t, e, i) { this.x = i ? Math.round(t) : t, this.y = i ? Math.round(e) : e } var hn = Math.trunc || function (t) { return t > 0 ? Math.floor(t) : Math.ceil(t) }; B.prototype = { clone: function () { return new B(this.x, this.y) }, add: function (t) { return this.clone()._add(O(t)) }, _add: function (t) { return this.x += t.x, this.y += t.y, this }, subtract: function (t) { return this.clone()._subtract(O(t)) }, _subtract: function (t) { return this.x -= t.x, this.y -= t.y, this }, divideBy: function (t) { return this.clone()._divideBy(t) }, _divideBy: function (t) { return this.x /= t, this.y /= t, this }, multiplyBy: function (t) { return this.clone()._multiplyBy(t) }, _multiplyBy: function (t) { return this.x *= t, this.y *= t, this }, scaleBy: function (t) { return new B(this.x * t.x, this.y * t.y) }, unscaleBy: function (t) { return new B(this.x / t.x, this.y / t.y) }, round: function () { return this.clone()._round() }, _round: function () { return this.x = Math.round(this.x), this.y = Math.round(this.y), this }, floor: function () { return this.clone()._floor() }, _floor: function () { return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this }, ceil: function () { return this.clone()._ceil() }, _ceil: function () { return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this }, trunc: function () { return this.clone()._trunc() }, _trunc: function () { return this.x = hn(this.x), this.y = hn(this.y), this }, distanceTo: function (t) { t = O(t); var e = t.x - this.x, i = t.y - this.y; return Math.sqrt(e * e + i * i) }, equals: function (t) { return t = O(t), t.x === this.x && t.y === this.y }, contains: function (t) { return t = O(t), Math.abs(t.x) <= Math.abs(this.x) && Math.abs(t.y) <= Math.abs(this.y) }, toString: function () { return "Point(" + j(this.x) + ", " + j(this.y) + ")" } }; function O(t, e, i) { return t instanceof B ? t : P(t) ? new B(t[0], t[1]) : t == null ? t : typeof t == "object" && "x" in t && "y" in t ? new B(t.x, t.y) : new B(t, e, i) } function J(t, e) { if (t) for (var i = e ? [t, e] : t, n = 0, a = i.length; n < a; n++)this.extend(i[n]) } J.prototype = { extend: function (t) { var e, i; if (!t) return this; if (t instanceof B || typeof t[0] == "number" || "x" in t) e = i = O(t); else if (t = ht(t), e = t.min, i = t.max, !e || !i) return this; return !this.min && !this.max ? (this.min = e.clone(), this.max = i.clone()) : (this.min.x = Math.min(e.x, this.min.x), this.max.x = Math.max(i.x, this.max.x), this.min.y = Math.min(e.y, this.min.y), this.max.y = Math.max(i.y, this.max.y)), this }, getCenter: function (t) { return O((this.min.x + this.max.x) / 2, (this.min.y + this.max.y) / 2, t) }, getBottomLeft: function () { return O(this.min.x, this.max.y) }, getTopRight: function () { return O(this.max.x, this.min.y) }, getTopLeft: function () { return this.min }, getBottomRight: function () { return this.max }, getSize: function () { return this.max.subtract(this.min) }, contains: function (t) { var e, i; return typeof t[0] == "number" || t instanceof B ? t = O(t) : t = ht(t), t instanceof J ? (e = t.min, i = t.max) : e = i = t, e.x >= this.min.x && i.x <= this.max.x && e.y >= this.min.y && i.y <= this.max.y }, intersects: function (t) { t = ht(t); var e = this.min, i = this.max, n = t.min, a = t.max, c = a.x >= e.x && n.x <= i.x, m = a.y >= e.y && n.y <= i.y; return c && m }, overlaps: function (t) { t = ht(t); var e = this.min, i = this.max, n = t.min, a = t.max, c = a.x > e.x && n.x < i.x, m = a.y > e.y && n.y < i.y; return c && m }, isValid: function () { return !!(this.min && this.max) }, pad: function (t) { var e = this.min, i = this.max, n = Math.abs(e.x - i.x) * t, a = Math.abs(e.y - i.y) * t; return ht(O(e.x - n, e.y - a), O(i.x + n, i.y + a)) }, equals: function (t) { return t ? (t = ht(t), this.min.equals(t.getTopLeft()) && this.max.equals(t.getBottomRight())) : !1 } }; function ht(t, e) { return !t || t instanceof J ? t : new J(t, e) } function ut(t, e) { if (t) for (var i = e ? [t, e] : t, n = 0, a = i.length; n < a; n++)this.extend(i[n]) } ut.prototype = { extend: function (t) { var e = this._southWest, i = this._northEast, n, a; if (t instanceof K) n = t, a = t; else if (t instanceof ut) { if (n = t._southWest, a = t._northEast, !n || !a) return this } else return t ? this.extend(W(t) || et(t)) : this; return !e && !i ? (this._southWest = new K(n.lat, n.lng), this._northEast = new K(a.lat, a.lng)) : (e.lat = Math.min(n.lat, e.lat), e.lng = Math.min(n.lng, e.lng), i.lat = Math.max(a.lat, i.lat), i.lng = Math.max(a.lng, i.lng)), this }, pad: function (t) { var e = this._southWest, i = this._northEast, n = Math.abs(e.lat - i.lat) * t, a = Math.abs(e.lng - i.lng) * t; return new ut(new K(e.lat - n, e.lng - a), new K(i.lat + n, i.lng + a)) }, getCenter: function () { return new K((this._southWest.lat + this._northEast.lat) / 2, (this._southWest.lng + this._northEast.lng) / 2) }, getSouthWest: function () { return this._southWest }, getNorthEast: function () { return this._northEast }, getNorthWest: function () { return new K(this.getNorth(), this.getWest()) }, getSouthEast: function () { return new K(this.getSouth(), this.getEast()) }, getWest: function () { return this._southWest.lng }, getSouth: function () { return this._southWest.lat }, getEast: function () { return this._northEast.lng }, getNorth: function () { return this._northEast.lat }, contains: function (t) { typeof t[0] == "number" || t instanceof K || "lat" in t ? t = W(t) : t = et(t); var e = this._southWest, i = this._northEast, n, a; return t instanceof ut ? (n = t.getSouthWest(), a = t.getNorthEast()) : n = a = t, n.lat >= e.lat && a.lat <= i.lat && n.lng >= e.lng && a.lng <= i.lng }, intersects: function (t) { t = et(t); var e = this._southWest, i = this._northEast, n = t.getSouthWest(), a = t.getNorthEast(), c = a.lat >= e.lat && n.lat <= i.lat, m = a.lng >= e.lng && n.lng <= i.lng; return c && m }, overlaps: function (t) { t = et(t); var e = this._southWest, i = this._northEast, n = t.getSouthWest(), a = t.getNorthEast(), c = a.lat > e.lat && n.lat < i.lat, m = a.lng > e.lng && n.lng < i.lng; return c && m }, toBBoxString: function () { return [this.getWest(), this.getSouth(), this.getEast(), this.getNorth()].join(",") }, equals: function (t, e) { return t ? (t = et(t), this._southWest.equals(t.getSouthWest(), e) && this._northEast.equals(t.getNorthEast(), e)) : !1 }, isValid: function () { return !!(this._southWest && this._northEast) } }; function et(t, e) { return t instanceof ut ? t : new ut(t, e) } function K(t, e, i) { if (isNaN(t) || isNaN(e)) throw new Error("Invalid LatLng object: (" + t + ", " + e + ")"); this.lat = +t, this.lng = +e, i !== void 0 && (this.alt = +i) } K.prototype = { equals: function (t, e) { if (!t) return !1; t = W(t); var i = Math.max(Math.abs(this.lat - t.lat), Math.abs(this.lng - t.lng)); return i <= (e === void 0 ? 1e-9 : e) }, toString: function (t) { return "LatLng(" + j(this.lat, t) + ", " + j(this.lng, t) + ")" }, distanceTo: function (t) { return Zt.distance(this, W(t)) }, wrap: function () { return Zt.wrapLatLng(this) }, toBounds: function (t) { var e = 180 * t / 40075017, i = e / Math.cos(Math.PI / 180 * this.lat); return et([this.lat - e, this.lng - i], [this.lat + e, this.lng + i]) }, clone: function () { return new K(this.lat, this.lng, this.alt) } }; function W(t, e, i) { return t instanceof K ? t : P(t) && typeof t[0] != "object" ? t.length === 3 ? new K(t[0], t[1], t[2]) : t.length === 2 ? new K(t[0], t[1]) : null : t == null ? t : typeof t == "object" && "lat" in t ? new K(t.lat, "lng" in t ? t.lng : t.lon, t.alt) : e === void 0 ? null : new K(t, e, i) } var At = { latLngToPoint: function (t, e) { var i = this.projection.project(t), n = this.scale(e); return this.transformation._transform(i, n) }, pointToLatLng: function (t, e) { var i = this.scale(e), n = this.transformation.untransform(t, i); return this.projection.unproject(n) }, project: function (t) { return this.projection.project(t) }, unproject: function (t) { return this.projection.unproject(t) }, scale: function (t) { return 256 * Math.pow(2, t) }, zoom: function (t) { return Math.log(t / 256) / Math.LN2 }, getProjectedBounds: function (t) { if (this.infinite) return null; var e = this.projection.bounds, i = this.scale(t), n = this.transformation.transform(e.min, i), a = this.transformation.transform(e.max, i); return new J(n, a) }, infinite: !1, wrapLatLng: function (t) { var e = this.wrapLng ? b(t.lng, this.wrapLng, !0) : t.lng, i = this.wrapLat ? b(t.lat, this.wrapLat, !0) : t.lat, n = t.alt; return new K(i, e, n) }, wrapLatLngBounds: function (t) { var e = t.getCenter(), i = this.wrapLatLng(e), n = e.lat - i.lat, a = e.lng - i.lng; if (n === 0 && a === 0) return t; var c = t.getSouthWest(), m = t.getNorthEast(), v = new K(c.lat - n, c.lng - a), w = new K(m.lat - n, m.lng - a); return new ut(v, w) } }, Zt = u({}, At, { wrapLng: [-180, 180], R: 6371e3, distance: function (t, e) { var i = Math.PI / 180, n = t.lat * i, a = e.lat * i, c = Math.sin((e.lat - t.lat) * i / 2), m = Math.sin((e.lng - t.lng) * i / 2), v = c * c + Math.cos(n) * Math.cos(a) * m * m, w = 2 * Math.atan2(Math.sqrt(v), Math.sqrt(1 - v)); return this.R * w } }), un = 6378137, li = { R: un, MAX_LATITUDE: 85.0511287798, project: function (t) { var e = Math.PI / 180, i = this.MAX_LATITUDE, n = Math.max(Math.min(i, t.lat), -i), a = Math.sin(n * e); return new B(this.R * t.lng * e, this.R * Math.log((1 + a) / (1 - a)) / 2) }, unproject: function (t) { var e = 180 / Math.PI; return new K((2 * Math.atan(Math.exp(t.y / this.R)) - Math.PI / 2) * e, t.x * e / this.R) }, bounds: (function () { var t = un * Math.PI; return new J([-t, -t], [t, t]) })() }; function ci(t, e, i, n) { if (P(t)) { this._a = t[0], this._b = t[1], this._c = t[2], this._d = t[3]; return } this._a = t, this._b = e, this._c = i, this._d = n } ci.prototype = { transform: function (t, e) { return this._transform(t.clone(), e) }, _transform: function (t, e) { return e = e || 1, t.x = e * (this._a * t.x + this._b), t.y = e * (this._c * t.y + this._d), t }, untransform: function (t, e) { return e = e || 1, new B((t.x / e - this._b) / this._a, (t.y / e - this._d) / this._c) } }; function ue(t, e, i, n) { return new ci(t, e, i, n) } var hi = u({}, Zt, { code: "EPSG:3857", projection: li, transformation: (function () { var t = .5 / (Math.PI * li.R); return ue(t, .5, -t, .5) })() }), fo = u({}, hi, { code: "EPSG:900913" }); function dn(t) { return document.createElementNS("http://www.w3.org/2000/svg", t) } function fn(t, e) { var i = "", n, a, c, m, v, w; for (n = 0, c = t.length; n < c; n++) { for (v = t[n], a = 0, m = v.length; a < m; a++)w = v[a], i += (a ? "L" : "M") + w.x + " " + w.y; i += e ? I.svg ? "z" : "x" : "" } return i || "M0 0" } var ui = document.documentElement.style, Me = "ActiveXObject" in window, mo = Me && !document.addEventListener, mn = "msLaunchUri" in navigator && !("documentMode" in document), di = Ct("webkit"), pn = Ct("android"), gn = Ct("android 2") || Ct("android 3"), po = parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1], 10), go = pn && Ct("Google") && po < 537 && !("AudioNode" in window), fi = !!window.opera, _n = !mn && Ct("chrome"), vn = Ct("gecko") && !di && !fi && !Me, _o = !_n && Ct("safari"), yn = Ct("phantom"), xn = "OTransition" in ui, vo = navigator.platform.indexOf("Win") === 0, wn = Me && "transition" in ui, mi = "WebKitCSSMatrix" in window && "m11" in new window.WebKitCSSMatrix && !gn, bn = "MozPerspective" in ui, yo = !window.L_DISABLE_3D && (wn || mi || bn) && !xn && !yn, de = typeof orientation < "u" || Ct("mobile"), xo = de && di, wo = de && mi, Sn = !window.PointerEvent && window.MSPointerEvent, Ln = !!(window.PointerEvent || Sn), Cn = "ontouchstart" in window || !!window.TouchEvent, bo = !window.L_NO_TOUCH && (Cn || Ln), So = de && fi, Lo = de && vn, Co = (window.devicePixelRatio || window.screen.deviceXDPI / window.screen.logicalXDPI) > 1, Po = (function () { var t = !1; try { var e = Object.defineProperty({}, "passive", { get: function () { t = !0 } }); window.addEventListener("testPassiveEventSupport", x, e), window.removeEventListener("testPassiveEventSupport", x, e) } catch { } return t })(), ko = (function () { return !!document.createElement("canvas").getContext })(), pi = !!(document.createElementNS && dn("svg").createSVGRect), To = !!pi && (function () { var t = document.createElement("div"); return t.innerHTML = "<svg/>", (t.firstChild && t.firstChild.namespaceURI) === "http://www.w3.org/2000/svg" })(), Eo = !pi && (function () { try { var t = document.createElement("div"); t.innerHTML = '<v:shape adj="1"/>'; var e = t.firstChild; return e.style.behavior = "url(#default#VML)", e && typeof e.adj == "object" } catch { return !1 } })(), jo = navigator.platform.indexOf("Mac") === 0, Ao = navigator.platform.indexOf("Linux") === 0; function Ct(t) { return navigator.userAgent.toLowerCase().indexOf(t) >= 0 } var I = { ie: Me, ielt9: mo, edge: mn, webkit: di, android: pn, android23: gn, androidStock: go, opera: fi, chrome: _n, gecko: vn, safari: _o, phantom: yn, opera12: xn, win: vo, ie3d: wn, webkit3d: mi, gecko3d: bn, any3d: yo, mobile: de, mobileWebkit: xo, mobileWebkit3d: wo, msPointer: Sn, pointer: Ln, touch: bo, touchNative: Cn, mobileOpera: So, mobileGecko: Lo, retina: Co, passiveEvents: Po, canvas: ko, svg: pi, vml: Eo, inlineSvg: To, mac: jo, linux: Ao }, Pn = I.msPointer ? "MSPointerDown" : "pointerdown", kn = I.msPointer ? "MSPointerMove" : "pointermove", Tn = I.msPointer ? "MSPointerUp" : "pointerup", En = I.msPointer ? "MSPointerCancel" : "pointercancel", gi = { touchstart: Pn, touchmove: kn, touchend: Tn, touchcancel: En }, jn = { touchstart: Oo, touchmove: ze, touchend: ze, touchcancel: ze }, Xt = {}, An = !1; function Mo(t, e, i) { return e === "touchstart" && No(), jn[e] ? (i = jn[e].bind(this, i), t.addEventListener(gi[e], i, !1), i) : (console.warn("wrong event specified:", e), x) } function zo(t, e, i) { if (!gi[e]) { console.warn("wrong event specified:", e); return } t.removeEventListener(gi[e], i, !1) } function Ro(t) { Xt[t.pointerId] = t } function Io(t) { Xt[t.pointerId] && (Xt[t.pointerId] = t) } function Mn(t) { delete Xt[t.pointerId] } function No() { An || (document.addEventListener(Pn, Ro, !0), document.addEventListener(kn, Io, !0), document.addEventListener(Tn, Mn, !0), document.addEventListener(En, Mn, !0), An = !0) } function ze(t, e) { if (e.pointerType !== (e.MSPOINTER_TYPE_MOUSE || "mouse")) { e.touches = []; for (var i in Xt) e.touches.push(Xt[i]); e.changedTouches = [e], t(e) } } function Oo(t, e) { e.MSPOINTER_TYPE_TOUCH && e.pointerType === e.MSPOINTER_TYPE_TOUCH && st(e), ze(t, e) } function Bo(t) { var e = {}, i, n; for (n in t) i = t[n], e[n] = i && i.bind ? i.bind(t) : i; return t = e, e.type = "dblclick", e.detail = 2, e.isTrusted = !1, e._simulated = !0, e } var Do = 200; function Zo(t, e) { t.addEventListener("dblclick", e); var i = 0, n; function a(c) { if (c.detail !== 1) { n = c.detail; return } if (!(c.pointerType === "mouse" || c.sourceCapabilities && !c.sourceCapabilities.firesTouchEvents)) { var m = On(c); if (!(m.some(function (w) { return w instanceof HTMLLabelElement && w.attributes.for }) && !m.some(function (w) { return w instanceof HTMLInputElement || w instanceof HTMLSelectElement }))) { var v = Date.now(); v - i <= Do ? (n++, n === 2 && e(Bo(c))) : n = 1, i = v } } } return t.addEventListener("click", a), { dblclick: e, simDblclick: a } } function Fo(t, e) { t.removeEventListener("dblclick", e.dblclick), t.removeEventListener("click", e.simDblclick) } var _i = Ne(["transform", "webkitTransform", "OTransform", "MozTransform", "msTransform"]), fe = Ne(["webkitTransition", "transition", "OTransition", "MozTransition", "msTransition"]), zn = fe === "webkitTransition" || fe === "OTransition" ? fe + "End" : "transitionend"; function Rn(t) { return typeof t == "string" ? document.getElementById(t) : t } function me(t, e) { var i = t.style[e] || t.currentStyle && t.currentStyle[e]; if ((!i || i === "auto") && document.defaultView) { var n = document.defaultView.getComputedStyle(t, null); i = n ? n[e] : null } return i === "auto" ? null : i } function V(t, e, i) { var n = document.createElement(t); return n.className = e || "", i && i.appendChild(n), n } function X(t) { var e = t.parentNode; e && e.removeChild(t) } function Re(t) { for (; t.firstChild;)t.removeChild(t.firstChild) } function Qt(t) { var e = t.parentNode; e && e.lastChild !== t && e.appendChild(t) } function te(t) { var e = t.parentNode; e && e.firstChild !== t && e.insertBefore(t, e.firstChild) } function vi(t, e) { if (t.classList !== void 0) return t.classList.contains(e); var i = Ie(t); return i.length > 0 && new RegExp("(^|\\s)" + e + "(\\s|$)").test(i) } function Z(t, e) { if (t.classList !== void 0) for (var i = A(e), n = 0, a = i.length; n < a; n++)t.classList.add(i[n]); else if (!vi(t, e)) { var c = Ie(t); yi(t, (c ? c + " " : "") + e) } } function Q(t, e) { t.classList !== void 0 ? t.classList.remove(e) : yi(t, T((" " + Ie(t) + " ").replace(" " + e + " ", " "))) } function yi(t, e) { t.className.baseVal === void 0 ? t.className = e : t.className.baseVal = e } function Ie(t) { return t.correspondingElement && (t = t.correspondingElement), t.className.baseVal === void 0 ? t.className : t.className.baseVal } function _t(t, e) { "opacity" in t.style ? t.style.opacity = e : "filter" in t.style && Wo(t, e) } function Wo(t, e) { var i = !1, n = "DXImageTransform.Microsoft.Alpha"; try { i = t.filters.item(n) } catch { if (e === 1) return } e = Math.round(e * 100), i ? (i.Enabled = e !== 100, i.Opacity = e) : t.style.filter += " progid:" + n + "(opacity=" + e + ")" } function Ne(t) { for (var e = document.documentElement.style, i = 0; i < t.length; i++)if (t[i] in e) return t[i]; return !1 } function Vt(t, e, i) { var n = e || new B(0, 0); t.style[_i] = (I.ie3d ? "translate(" + n.x + "px," + n.y + "px)" : "translate3d(" + n.x + "px," + n.y + "px,0)") + (i ? " scale(" + i + ")" : "") } function it(t, e) { t._leaflet_pos = e, I.any3d ? Vt(t, e) : (t.style.left = e.x + "px", t.style.top = e.y + "px") } function qt(t) { return t._leaflet_pos || new B(0, 0) } var pe, ge, xi; if ("onselectstart" in document) pe = function () { D(window, "selectstart", st) }, ge = function () { Y(window, "selectstart", st) }; else { var _e = Ne(["userSelect", "WebkitUserSelect", "OUserSelect", "MozUserSelect", "msUserSelect"]); pe = function () { if (_e) { var t = document.documentElement.style; xi = t[_e], t[_e] = "none" } }, ge = function () { _e && (document.documentElement.style[_e] = xi, xi = void 0) } } function wi() { D(window, "dragstart", st) } function bi() { Y(window, "dragstart", st) } var Oe, Si; function Li(t) { for (; t.tabIndex === -1;)t = t.parentNode; t.style && (Be(), Oe = t, Si = t.style.outlineStyle, t.style.outlineStyle = "none", D(window, "keydown", Be)) } function Be() { Oe && (Oe.style.outlineStyle = Si, Oe = void 0, Si = void 0, Y(window, "keydown", Be)) } function In(t) { do t = t.parentNode; while ((!t.offsetWidth || !t.offsetHeight) && t !== document.body); return t } function Ci(t) { var e = t.getBoundingClientRect(); return { x: e.width / t.offsetWidth || 1, y: e.height / t.offsetHeight || 1, boundingClientRect: e } } var Ho = { __proto__: null, TRANSFORM: _i, TRANSITION: fe, TRANSITION_END: zn, get: Rn, getStyle: me, create: V, remove: X, empty: Re, toFront: Qt, toBack: te, hasClass: vi, addClass: Z, removeClass: Q, setClass: yi, getClass: Ie, setOpacity: _t, testProp: Ne, setTransform: Vt, setPosition: it, getPosition: qt, get disableTextSelection() { return pe }, get enableTextSelection() { return ge }, disableImageDrag: wi, enableImageDrag: bi, preventOutline: Li, restoreOutline: Be, getSizedParentNode: In, getScale: Ci }; function D(t, e, i, n) { if (e && typeof e == "object") for (var a in e) ki(t, a, e[a], i); else { e = A(e); for (var c = 0, m = e.length; c < m; c++)ki(t, e[c], i, n) } return this } var Pt = "_leaflet_events"; function Y(t, e, i, n) { if (arguments.length === 1) Nn(t), delete t[Pt]; else if (e && typeof e == "object") for (var a in e) Ti(t, a, e[a], i); else if (e = A(e), arguments.length === 2) Nn(t, function (v) { return R(e, v) !== -1 }); else for (var c = 0, m = e.length; c < m; c++)Ti(t, e[c], i, n); return this } function Nn(t, e) { for (var i in t[Pt]) { var n = i.split(/\d/)[0]; (!e || e(n)) && Ti(t, n, null, null, i) } } var Pi = { mouseenter: "mouseover", mouseleave: "mouseout", wheel: !("onwheel" in window) && "mousewheel" }; function ki(t, e, i, n) { var a = e + p(i) + (n ? "_" + p(n) : ""); if (t[Pt] && t[Pt][a]) return this; var c = function (v) { return i.call(n || t, v || window.event) }, m = c; !I.touchNative && I.pointer && e.indexOf("touch") === 0 ? c = Mo(t, e, c) : I.touch && e === "dblclick" ? c = Zo(t, c) : "addEventListener" in t ? e === "touchstart" || e === "touchmove" || e === "wheel" || e === "mousewheel" ? t.addEventListener(Pi[e] || e, c, I.passiveEvents ? { passive: !1 } : !1) : e === "mouseenter" || e === "mouseleave" ? (c = function (v) { v = v || window.event, ji(t, v) && m(v) }, t.addEventListener(Pi[e], c, !1)) : t.addEventListener(e, m, !1) : t.attachEvent("on" + e, c), t[Pt] = t[Pt] || {}, t[Pt][a] = c } function Ti(t, e, i, n, a) { a = a || e + p(i) + (n ? "_" + p(n) : ""); var c = t[Pt] && t[Pt][a]; if (!c) return this; !I.touchNative && I.pointer && e.indexOf("touch") === 0 ? zo(t, e, c) : I.touch && e === "dblclick" ? Fo(t, c) : "removeEventListener" in t ? t.removeEventListener(Pi[e] || e, c, !1) : t.detachEvent("on" + e, c), t[Pt][a] = null } function Gt(t) { return t.stopPropagation ? t.stopPropagation() : t.originalEvent ? t.originalEvent._stopped = !0 : t.cancelBubble = !0, this } function Ei(t) { return ki(t, "wheel", Gt), this } function ve(t) { return D(t, "mousedown touchstart dblclick contextmenu", Gt), t._leaflet_disable_click = !0, this } function st(t) { return t.preventDefault ? t.preventDefault() : t.returnValue = !1, this } function Kt(t) { return st(t), Gt(t), this } function On(t) { if (t.composedPath) return t.composedPath(); for (var e = [], i = t.target; i;)e.push(i), i = i.parentNode; return e } function Bn(t, e) { if (!e) return new B(t.clientX, t.clientY); var i = Ci(e), n = i.boundingClientRect; return new B((t.clientX - n.left) / i.x - e.clientLeft, (t.clientY - n.top) / i.y - e.clientTop) } var Uo = I.linux && I.chrome ? window.devicePixelRatio : I.mac ? window.devicePixelRatio * 3 : window.devicePixelRatio > 0 ? 2 * window.devicePixelRatio : 1; function Dn(t) { return I.edge ? t.wheelDeltaY / 2 : t.deltaY && t.deltaMode === 0 ? -t.deltaY / Uo : t.deltaY && t.deltaMode === 1 ? -t.deltaY * 20 : t.deltaY && t.deltaMode === 2 ? -t.deltaY * 60 : t.deltaX || t.deltaZ ? 0 : t.wheelDelta ? (t.wheelDeltaY || t.wheelDelta) / 2 : t.detail && Math.abs(t.detail) < 32765 ? -t.detail * 20 : t.detail ? t.detail / -32765 * 60 : 0 } function ji(t, e) { var i = e.relatedTarget; if (!i) return !0; try { for (; i && i !== t;)i = i.parentNode } catch { return !1 } return i !== t } var Vo = { __proto__: null, on: D, off: Y, stopPropagation: Gt, disableScrollPropagation: Ei, disableClickPropagation: ve, preventDefault: st, stop: Kt, getPropagationPath: On, getMousePosition: Bn, getWheelDelta: Dn, isExternalTarget: ji, addListener: D, removeListener: Y }, Zn = he.extend({ run: function (t, e, i, n) { this.stop(), this._el = t, this._inProgress = !0, this._duration = i || .25, this._easeOutPower = 1 / Math.max(n || .5, .2), this._startPos = qt(t), this._offset = e.subtract(this._startPos), this._startTime = +new Date, this.fire("start"), this._animate() }, stop: function () { this._inProgress && (this._step(!0), this._complete()) }, _animate: function () { this._animId = ct(this._animate, this), this._step() }, _step: function (t) { var e = +new Date - this._startTime, i = this._duration * 1e3; e < i ? this._runFrame(this._easeOut(e / i), t) : (this._runFrame(1), this._complete()) }, _runFrame: function (t, e) { var i = this._startPos.add(this._offset.multiplyBy(t)); e && i._round(), it(this._el, i), this.fire("step") }, _complete: function () { gt(this._animId), this._inProgress = !1, this.fire("end") }, _easeOut: function (t) { return 1 - Math.pow(1 - t, this._easeOutPower) } }), H = he.extend({ options: { crs: hi, center: void 0, zoom: void 0, minZoom: void 0, maxZoom: void 0, layers: [], maxBounds: void 0, renderer: void 0, zoomAnimation: !0, zoomAnimationThreshold: 4, fadeAnimation: !0, markerZoomAnimation: !0, transform3DLimit: 8388608, zoomSnap: 1, zoomDelta: 1, trackResize: !0 }, initialize: function (t, e) { e = E(this, e), this._handlers = [], this._layers = {}, this._zoomBoundLayers = {}, this._sizeChanged = !0, this._initContainer(t), this._initLayout(), this._onResize = f(this._onResize, this), this._initEvents(), e.maxBounds && this.setMaxBounds(e.maxBounds), e.zoom !== void 0 && (this._zoom = this._limitZoom(e.zoom)), e.center && e.zoom !== void 0 && this.setView(W(e.center), e.zoom, { reset: !0 }), this.callInitHooks(), this._zoomAnimated = fe && I.any3d && !I.mobileOpera && this.options.zoomAnimation, this._zoomAnimated && (this._createAnimProxy(), D(this._proxy, zn, this._catchTransitionEnd, this)), this._addLayers(this.options.layers) }, setView: function (t, e, i) { if (e = e === void 0 ? this._zoom : this._limitZoom(e), t = this._limitCenter(W(t), e, this.options.maxBounds), i = i || {}, this._stop(), this._loaded && !i.reset && i !== !0) { i.animate !== void 0 && (i.zoom = u({ animate: i.animate }, i.zoom), i.pan = u({ animate: i.animate, duration: i.duration }, i.pan)); var n = this._zoom !== e ? this._tryAnimatedZoom && this._tryAnimatedZoom(t, e, i.zoom) : this._tryAnimatedPan(t, i.pan); if (n) return clearTimeout(this._sizeTimer), this } return this._resetView(t, e, i.pan && i.pan.noMoveStart), this }, setZoom: function (t, e) { return this._loaded ? this.setView(this.getCenter(), t, { zoom: e }) : (this._zoom = t, this) }, zoomIn: function (t, e) { return t = t || (I.any3d ? this.options.zoomDelta : 1), this.setZoom(this._zoom + t, e) }, zoomOut: function (t, e) { return t = t || (I.any3d ? this.options.zoomDelta : 1), this.setZoom(this._zoom - t, e) }, setZoomAround: function (t, e, i) { var n = this.getZoomScale(e), a = this.getSize().divideBy(2), c = t instanceof B ? t : this.latLngToContainerPoint(t), m = c.subtract(a).multiplyBy(1 - 1 / n), v = this.containerPointToLatLng(a.add(m)); return this.setView(v, e, { zoom: i }) }, _getBoundsCenterZoom: function (t, e) { e = e || {}, t = t.getBounds ? t.getBounds() : et(t); var i = O(e.paddingTopLeft || e.padding || [0, 0]), n = O(e.paddingBottomRight || e.padding || [0, 0]), a = this.getBoundsZoom(t, !1, i.add(n)); if (a = typeof e.maxZoom == "number" ? Math.min(e.maxZoom, a) : a, a === 1 / 0) return { center: t.getCenter(), zoom: a }; var c = n.subtract(i).divideBy(2), m = this.project(t.getSouthWest(), a), v = this.project(t.getNorthEast(), a), w = this.unproject(m.add(v).divideBy(2).add(c), a); return { center: w, zoom: a } }, fitBounds: function (t, e) { if (t = et(t), !t.isValid()) throw new Error("Bounds are not valid."); var i = this._getBoundsCenterZoom(t, e); return this.setView(i.center, i.zoom, e) }, fitWorld: function (t) { return this.fitBounds([[-90, -180], [90, 180]], t) }, panTo: function (t, e) { return this.setView(t, this._zoom, { pan: e }) }, panBy: function (t, e) { if (t = O(t).round(), e = e || {}, !t.x && !t.y) return this.fire("moveend"); if (e.animate !== !0 && !this.getSize().contains(t)) return this._resetView(this.unproject(this.project(this.getCenter()).add(t)), this.getZoom()), this; if (this._panAnim || (this._panAnim = new Zn, this._panAnim.on({ step: this._onPanTransitionStep, end: this._onPanTransitionEnd }, this)), e.noMoveStart || this.fire("movestart"), e.animate !== !1) { Z(this._mapPane, "leaflet-pan-anim"); var i = this._getMapPanePos().subtract(t).round(); this._panAnim.run(this._mapPane, i, e.duration || .25, e.easeLinearity) } else this._rawPanBy(t), this.fire("move").fire("moveend"); return this }, flyTo: function (t, e, i) { if (i = i || {}, i.animate === !1 || !I.any3d) return this.setView(t, e, i); this._stop(); var n = this.project(this.getCenter()), a = this.project(t), c = this.getSize(), m = this._zoom; t = W(t), e = e === void 0 ? m : e; var v = Math.max(c.x, c.y), w = v * this.getZoomScale(m, e), k = a.distanceTo(n) || 1, z = 1.42, N = z * z; function F(nt) { var $e = nt ? -1 : 1, zs = nt ? w : v, Rs = w * w - v * v + $e * N * N * k * k, Is = 2 * zs * N * k, Fi = Rs / Is, xr = Math.sqrt(Fi * Fi + 1) - Fi, Ns = xr < 1e-9 ? -18 : Math.log(xr); return Ns } function lt(nt) { return (Math.exp(nt) - Math.exp(-nt)) / 2 } function ot(nt) { return (Math.exp(nt) + Math.exp(-nt)) / 2 } function yt(nt) { return lt(nt) / ot(nt) } var dt = F(0); function se(nt) { return v * (ot(dt) / ot(dt + z * nt)) } function Es(nt) { return v * (ot(dt) * yt(dt + z * nt) - lt(dt)) / N } function js(nt) { return 1 - Math.pow(1 - nt, 1.5) } var As = Date.now(), vr = (F(1) - dt) / z, Ms = i.duration ? 1e3 * i.duration : 1e3 * vr * .8; function yr() { var nt = (Date.now() - As) / Ms, $e = js(nt) * vr; nt <= 1 ? (this._flyToFrame = ct(yr, this), this._move(this.unproject(n.add(a.subtract(n).multiplyBy(Es($e) / k)), m), this.getScaleZoom(v / se($e), m), { flyTo: !0 })) : this._move(t, e)._moveEnd(!0) } return this._moveStart(!0, i.noMoveStart), yr.call(this), this }, flyToBounds: function (t, e) { var i = this._getBoundsCenterZoom(t, e); return this.flyTo(i.center, i.zoom, e) }, setMaxBounds: function (t) { return t = et(t), this.listens("moveend", this._panInsideMaxBounds) && this.off("moveend", this._panInsideMaxBounds), t.isValid() ? (this.options.maxBounds = t, this._loaded && this._panInsideMaxBounds(), this.on("moveend", this._panInsideMaxBounds)) : (this.options.maxBounds = null, this) }, setMinZoom: function (t) { var e = this.options.minZoom; return this.options.minZoom = t, this._loaded && e !== t && (this.fire("zoomlevelschange"), this.getZoom() < this.options.minZoom) ? this.setZoom(t) : this }, setMaxZoom: function (t) { var e = this.options.maxZoom; return this.options.maxZoom = t, this._loaded && e !== t && (this.fire("zoomlevelschange"), this.getZoom() > this.options.maxZoom) ? this.setZoom(t) : this }, panInsideBounds: function (t, e) { this._enforcingBounds = !0; var i = this.getCenter(), n = this._limitCenter(i, this._zoom, et(t)); return i.equals(n) || this.panTo(n, e), this._enforcingBounds = !1, this }, panInside: function (t, e) { e = e || {}; var i = O(e.paddingTopLeft || e.padding || [0, 0]), n = O(e.paddingBottomRight || e.padding || [0, 0]), a = this.project(this.getCenter()), c = this.project(t), m = this.getPixelBounds(), v = ht([m.min.add(i), m.max.subtract(n)]), w = v.getSize(); if (!v.contains(c)) { this._enforcingBounds = !0; var k = c.subtract(v.getCenter()), z = v.extend(c).getSize().subtract(w); a.x += k.x < 0 ? -z.x : z.x, a.y += k.y < 0 ? -z.y : z.y, this.panTo(this.unproject(a), e), this._enforcingBounds = !1 } return this }, invalidateSize: function (t) { if (!this._loaded) return this; t = u({ animate: !1, pan: !0 }, t === !0 ? { animate: !0 } : t); var e = this.getSize(); this._sizeChanged = !0, this._lastCenter = null; var i = this.getSize(), n = e.divideBy(2).round(), a = i.divideBy(2).round(), c = n.subtract(a); return !c.x && !c.y ? this : (t.animate && t.pan ? this.panBy(c) : (t.pan && this._rawPanBy(c), this.fire("move"), t.debounceMoveend ? (clearTimeout(this._sizeTimer), this._sizeTimer = setTimeout(f(this.fire, this, "moveend"), 200)) : this.fire("moveend")), this.fire("resize", { oldSize: e, newSize: i })) }, stop: function () { return this.setZoom(this._limitZoom(this._zoom)), this.options.zoomSnap || this.fire("viewreset"), this._stop() }, locate: function (t) { if (t = this._locateOptions = u({ timeout: 1e4, watch: !1 }, t), !("geolocation" in navigator)) return this._handleGeolocationError({ code: 0, message: "Geolocation not supported." }), this; var e = f(this._handleGeolocationResponse, this), i = f(this._handleGeolocationError, this); return t.watch ? this._locationWatchId = navigator.geolocation.watchPosition(e, i, t) : navigator.geolocation.getCurrentPosition(e, i, t), this }, stopLocate: function () { return navigator.geolocation && navigator.geolocation.clearWatch && navigator.geolocation.clearWatch(this._locationWatchId), this._locateOptions && (this._locateOptions.setView = !1), this }, _handleGeolocationError: function (t) { if (this._container._leaflet_id) { var e = t.code, i = t.message || (e === 1 ? "permission denied" : e === 2 ? "position unavailable" : "timeout"); this._locateOptions.setView && !this._loaded && this.fitWorld(), this.fire("locationerror", { code: e, message: "Geolocation error: " + i + "." }) } }, _handleGeolocationResponse: function (t) { if (this._container._leaflet_id) { var e = t.coords.latitude, i = t.coords.longitude, n = new K(e, i), a = n.toBounds(t.coords.accuracy * 2), c = this._locateOptions; if (c.setView) { var m = this.getBoundsZoom(a); this.setView(n, c.maxZoom ? Math.min(m, c.maxZoom) : m) } var v = { latlng: n, bounds: a, timestamp: t.timestamp }; for (var w in t.coords) typeof t.coords[w] == "number" && (v[w] = t.coords[w]); this.fire("locationfound", v) } }, addHandler: function (t, e) { if (!e) return this; var i = this[t] = new e(this); return this._handlers.push(i), this.options[t] && i.enable(), this }, remove: function () { if (this._initEvents(!0), this.options.maxBounds && this.off("moveend", this._panInsideMaxBounds), this._containerId !== this._container._leaflet_id) throw new Error("Map container is being reused by another instance"); try { delete this._container._leaflet_id, delete this._containerId } catch { this._container._leaflet_id = void 0, this._containerId = void 0 } this._locationWatchId !== void 0 && this.stopLocate(), this._stop(), X(this._mapPane), this._clearControlPos && this._clearControlPos(), this._resizeRequest && (gt(this._resizeRequest), this._resizeRequest = null), this._clearHandlers(), this._loaded && this.fire("unload"); var t; for (t in this._layers) this._layers[t].remove(); for (t in this._panes) X(this._panes[t]); return this._layers = [], this._panes = [], delete this._mapPane, delete this._renderer, this }, createPane: function (t, e) { var i = "leaflet-pane" + (t ? " leaflet-" + t.replace("Pane", "") + "-pane" : ""), n = V("div", i, e || this._mapPane); return t && (this._panes[t] = n), n }, getCenter: function () { return this._checkIfLoaded(), this._lastCenter && !this._moved() ? this._lastCenter.clone() : this.layerPointToLatLng(this._getCenterLayerPoint()) }, getZoom: function () { return this._zoom }, getBounds: function () { var t = this.getPixelBounds(), e = this.unproject(t.getBottomLeft()), i = this.unproject(t.getTopRight()); return new ut(e, i) }, getMinZoom: function () { return this.options.minZoom === void 0 ? this._layersMinZoom || 0 : this.options.minZoom }, getMaxZoom: function () { return this.options.maxZoom === void 0 ? this._layersMaxZoom === void 0 ? 1 / 0 : this._layersMaxZoom : this.options.maxZoom }, getBoundsZoom: function (t, e, i) { t = et(t), i = O(i || [0, 0]); var n = this.getZoom() || 0, a = this.getMinZoom(), c = this.getMaxZoom(), m = t.getNorthWest(), v = t.getSouthEast(), w = this.getSize().subtract(i), k = ht(this.project(v, n), this.project(m, n)).getSize(), z = I.any3d ? this.options.zoomSnap : 1, N = w.x / k.x, F = w.y / k.y, lt = e ? Math.max(N, F) : Math.min(N, F); return n = this.getScaleZoom(lt, n), z && (n = Math.round(n / (z / 100)) * (z / 100), n = e ? Math.ceil(n / z) * z : Math.floor(n / z) * z), Math.max(a, Math.min(c, n)) }, getSize: function () { return (!this._size || this._sizeChanged) && (this._size = new B(this._container.clientWidth || 0, this._container.clientHeight || 0), this._sizeChanged = !1), this._size.clone() }, getPixelBounds: function (t, e) { var i = this._getTopLeftPoint(t, e); return new J(i, i.add(this.getSize())) }, getPixelOrigin: function () { return this._checkIfLoaded(), this._pixelOrigin }, getPixelWorldBounds: function (t) { return this.options.crs.getProjectedBounds(t === void 0 ? this.getZoom() : t) }, getPane: function (t) { return typeof t == "string" ? this._panes[t] : t }, getPanes: function () { return this._panes }, getContainer: function () { return this._container }, getZoomScale: function (t, e) { var i = this.options.crs; return e = e === void 0 ? this._zoom : e, i.scale(t) / i.scale(e) }, getScaleZoom: function (t, e) { var i = this.options.crs; e = e === void 0 ? this._zoom : e; var n = i.zoom(t * i.scale(e)); return isNaN(n) ? 1 / 0 : n }, project: function (t, e) { return e = e === void 0 ? this._zoom : e, this.options.crs.latLngToPoint(W(t), e) }, unproject: function (t, e) { return e = e === void 0 ? this._zoom : e, this.options.crs.pointToLatLng(O(t), e) }, layerPointToLatLng: function (t) { var e = O(t).add(this.getPixelOrigin()); return this.unproject(e) }, latLngToLayerPoint: function (t) { var e = this.project(W(t))._round(); return e._subtract(this.getPixelOrigin()) }, wrapLatLng: function (t) { return this.options.crs.wrapLatLng(W(t)) }, wrapLatLngBounds: function (t) { return this.options.crs.wrapLatLngBounds(et(t)) }, distance: function (t, e) { return this.options.crs.distance(W(t), W(e)) }, containerPointToLayerPoint: function (t) { return O(t).subtract(this._getMapPanePos()) }, layerPointToContainerPoint: function (t) { return O(t).add(this._getMapPanePos()) }, containerPointToLatLng: function (t) { var e = this.containerPointToLayerPoint(O(t)); return this.layerPointToLatLng(e) }, latLngToContainerPoint: function (t) { return this.layerPointToContainerPoint(this.latLngToLayerPoint(W(t))) }, mouseEventToContainerPoint: function (t) { return Bn(t, this._container) }, mouseEventToLayerPoint: function (t) { return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t)) }, mouseEventToLatLng: function (t) { return this.layerPointToLatLng(this.mouseEventToLayerPoint(t)) }, _initContainer: function (t) { var e = this._container = Rn(t); if (e) { if (e._leaflet_id) throw new Error("Map container is already initialized.") } else throw new Error("Map container not found."); D(e, "scroll", this._onScroll, this), this._containerId = p(e) }, _initLayout: function () { var t = this._container; this._fadeAnimated = this.options.fadeAnimation && I.any3d, Z(t, "leaflet-container" + (I.touch ? " leaflet-touch" : "") + (I.retina ? " leaflet-retina" : "") + (I.ielt9 ? " leaflet-oldie" : "") + (I.safari ? " leaflet-safari" : "") + (this._fadeAnimated ? " leaflet-fade-anim" : "")); var e = me(t, "position"); e !== "absolute" && e !== "relative" && e !== "fixed" && e !== "sticky" && (t.style.position = "relative"), this._initPanes(), this._initControlPos && this._initControlPos() }, _initPanes: function () { var t = this._panes = {}; this._paneRenderers = {}, this._mapPane = this.createPane("mapPane", this._container), it(this._mapPane, new B(0, 0)), this.createPane("tilePane"), this.createPane("overlayPane"), this.createPane("shadowPane"), this.createPane("markerPane"), this.createPane("tooltipPane"), this.createPane("popupPane"), this.options.markerZoomAnimation || (Z(t.markerPane, "leaflet-zoom-hide"), Z(t.shadowPane, "leaflet-zoom-hide")) }, _resetView: function (t, e, i) { it(this._mapPane, new B(0, 0)); var n = !this._loaded; this._loaded = !0, e = this._limitZoom(e), this.fire("viewprereset"); var a = this._zoom !== e; this._moveStart(a, i)._move(t, e)._moveEnd(a), this.fire("viewreset"), n && this.fire("load") }, _moveStart: function (t, e) { return t && this.fire("zoomstart"), e || this.fire("movestart"), this }, _move: function (t, e, i, n) { e === void 0 && (e = this._zoom); var a = this._zoom !== e; return this._zoom = e, this._lastCenter = t, this._pixelOrigin = this._getNewPixelOrigin(t), n ? i && i.pinch && this.fire("zoom", i) : ((a || i && i.pinch) && this.fire("zoom", i), this.fire("move", i)), this }, _moveEnd: function (t) { return t && this.fire("zoomend"), this.fire("moveend") }, _stop: function () { return gt(this._flyToFrame), this._panAnim && this._panAnim.stop(), this }, _rawPanBy: function (t) { it(this._mapPane, this._getMapPanePos().subtract(t)) }, _getZoomSpan: function () { return this.getMaxZoom() - this.getMinZoom() }, _panInsideMaxBounds: function () { this._enforcingBounds || this.panInsideBounds(this.options.maxBounds) }, _checkIfLoaded: function () { if (!this._loaded) throw new Error("Set map center and zoom first.") }, _initEvents: function (t) { this._targets = {}, this._targets[p(this._container)] = this; var e = t ? Y : D; e(this._container, "click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup", this._handleDOMEvent, this), this.options.trackResize && e(window, "resize", this._onResize, this), I.any3d && this.options.transform3DLimit && (t ? this.off : this.on).call(this, "moveend", this._onMoveEnd) }, _onResize: function () { gt(this._resizeRequest), this._resizeRequest = ct(function () { this.invalidateSize({ debounceMoveend: !0 }) }, this) }, _onScroll: function () { this._container.scrollTop = 0, this._container.scrollLeft = 0 }, _onMoveEnd: function () { var t = this._getMapPanePos(); Math.max(Math.abs(t.x), Math.abs(t.y)) >= this.options.transform3DLimit && this._resetView(this.getCenter(), this.getZoom()) }, _findEventTargets: function (t, e) { for (var i = [], n, a = e === "mouseout" || e === "mouseover", c = t.target || t.srcElement, m = !1; c;) { if (n = this._targets[p(c)], n && (e === "click" || e === "preclick") && this._draggableMoved(n)) { m = !0; break } if (n && n.listens(e, !0) && (a && !ji(c, t) || (i.push(n), a)) || c === this._container) break; c = c.parentNode } return !i.length && !m && !a && this.listens(e, !0) && (i = [this]), i }, _isClickDisabled: function (t) { for (; t && t !== this._container;) { if (t._leaflet_disable_click) return !0; t = t.parentNode } }, _handleDOMEvent: function (t) { var e = t.target || t.srcElement; if (!(!this._loaded || e._leaflet_disable_events || t.type === "click" && this._isClickDisabled(e))) { var i = t.type; i === "mousedown" && Li(e), this._fireDOMEvent(t, i) } }, _mouseEvents: ["click", "dblclick", "mouseover", "mouseout", "contextmenu"], _fireDOMEvent: function (t, e, i) { if (t.type === "click") { var n = u({}, t); n.type = "preclick", this._fireDOMEvent(n, n.type, i) } var a = this._findEventTargets(t, e); if (i) { for (var c = [], m = 0; m < i.length; m++)i[m].listens(e, !0) && c.push(i[m]); a = c.concat(a) } if (a.length) { e === "contextmenu" && st(t); var v = a[0], w = { originalEvent: t }; if (t.type !== "keypress" && t.type !== "keydown" && t.type !== "keyup") { var k = v.getLatLng && (!v._radius || v._radius <= 10); w.containerPoint = k ? this.latLngToContainerPoint(v.getLatLng()) : this.mouseEventToContainerPoint(t), w.layerPoint = this.containerPointToLayerPoint(w.containerPoint), w.latlng = k ? v.getLatLng() : this.layerPointToLatLng(w.layerPoint) } for (m = 0; m < a.length; m++)if (a[m].fire(e, w, !0), w.originalEvent._stopped || a[m].options.bubblingMouseEvents === !1 && R(this._mouseEvents, e) !== -1) return } }, _draggableMoved: function (t) { return t = t.dragging && t.dragging.enabled() ? t : this, t.dragging && t.dragging.moved() || this.boxZoom && this.boxZoom.moved() }, _clearHandlers: function () { for (var t = 0, e = this._handlers.length; t < e; t++)this._handlers[t].disable() }, whenReady: function (t, e) { return this._loaded ? t.call(e || this, { target: this }) : this.on("load", t, e), this }, _getMapPanePos: function () { return qt(this._mapPane) || new B(0, 0) }, _moved: function () { var t = this._getMapPanePos(); return t && !t.equals([0, 0]) }, _getTopLeftPoint: function (t, e) { var i = t && e !== void 0 ? this._getNewPixelOrigin(t, e) : this.getPixelOrigin(); return i.subtract(this._getMapPanePos()) }, _getNewPixelOrigin: function (t, e) { var i = this.getSize()._divideBy(2); return this.project(t, e)._subtract(i)._add(this._getMapPanePos())._round() }, _latLngToNewLayerPoint: function (t, e, i) { var n = this._getNewPixelOrigin(i, e); return this.project(t, e)._subtract(n) }, _latLngBoundsToNewLayerBounds: function (t, e, i) { var n = this._getNewPixelOrigin(i, e); return ht([this.project(t.getSouthWest(), e)._subtract(n), this.project(t.getNorthWest(), e)._subtract(n), this.project(t.getSouthEast(), e)._subtract(n), this.project(t.getNorthEast(), e)._subtract(n)]) }, _getCenterLayerPoint: function () { return this.containerPointToLayerPoint(this.getSize()._divideBy(2)) }, _getCenterOffset: function (t) { return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint()) }, _limitCenter: function (t, e, i) { if (!i) return t; var n = this.project(t, e), a = this.getSize().divideBy(2), c = new J(n.subtract(a), n.add(a)), m = this._getBoundsOffset(c, i, e); return Math.abs(m.x) <= 1 && Math.abs(m.y) <= 1 ? t : this.unproject(n.add(m), e) }, _limitOffset: function (t, e) { if (!e) return t; var i = this.getPixelBounds(), n = new J(i.min.add(t), i.max.add(t)); return t.add(this._getBoundsOffset(n, e)) }, _getBoundsOffset: function (t, e, i) { var n = ht(this.project(e.getNorthEast(), i), this.project(e.getSouthWest(), i)), a = n.min.subtract(t.min), c = n.max.subtract(t.max), m = this._rebound(a.x, -c.x), v = this._rebound(a.y, -c.y); return new B(m, v) }, _rebound: function (t, e) { return t + e > 0 ? Math.round(t - e) / 2 : Math.max(0, Math.ceil(t)) - Math.max(0, Math.floor(e)) }, _limitZoom: function (t) { var e = this.getMinZoom(), i = this.getMaxZoom(), n = I.any3d ? this.options.zoomSnap : 1; return n && (t = Math.round(t / n) * n), Math.max(e, Math.min(i, t)) }, _onPanTransitionStep: function () { this.fire("move") }, _onPanTransitionEnd: function () { Q(this._mapPane, "leaflet-pan-anim"), this.fire("moveend") }, _tryAnimatedPan: function (t, e) { var i = this._getCenterOffset(t)._trunc(); return (e && e.animate) !== !0 && !this.getSize().contains(i) ? !1 : (this.panBy(i, e), !0) }, _createAnimProxy: function () { var t = this._proxy = V("div", "leaflet-proxy leaflet-zoom-animated"); this._panes.mapPane.appendChild(t), this.on("zoomanim", function (e) { var i = _i, n = this._proxy.style[i]; Vt(this._proxy, this.project(e.center, e.zoom), this.getZoomScale(e.zoom, 1)), n === this._proxy.style[i] && this._animatingZoom && this._onZoomTransitionEnd() }, this), this.on("load moveend", this._animMoveEnd, this), this._on("unload", this._destroyAnimProxy, this) }, _destroyAnimProxy: function () { X(this._proxy), this.off("load moveend", this._animMoveEnd, this), delete this._proxy }, _animMoveEnd: function () { var t = this.getCenter(), e = this.getZoom(); Vt(this._proxy, this.project(t, e), this.getZoomScale(e, 1)) }, _catchTransitionEnd: function (t) { this._animatingZoom && t.propertyName.indexOf("transform") >= 0 && this._onZoomTransitionEnd() }, _nothingToAnimate: function () { return !this._container.getElementsByClassName("leaflet-zoom-animated").length }, _tryAnimatedZoom: function (t, e, i) { if (this._animatingZoom) return !0; if (i = i || {}, !this._zoomAnimated || i.animate === !1 || this._nothingToAnimate() || Math.abs(e - this._zoom) > this.options.zoomAnimationThreshold) return !1; var n = this.getZoomScale(e), a = this._getCenterOffset(t)._divideBy(1 - 1 / n); return i.animate !== !0 && !this.getSize().contains(a) ? !1 : (ct(function () { this._moveStart(!0, i.noMoveStart || !1)._animateZoom(t, e, !0) }, this), !0) }, _animateZoom: function (t, e, i, n) { this._mapPane && (i && (this._animatingZoom = !0, this._animateToCenter = t, this._animateToZoom = e, Z(this._mapPane, "leaflet-zoom-anim")), this.fire("zoomanim", { center: t, zoom: e, noUpdate: n }), this._tempFireZoomEvent || (this._tempFireZoomEvent = this._zoom !== this._animateToZoom), this._move(this._animateToCenter, this._animateToZoom, void 0, !0), setTimeout(f(this._onZoomTransitionEnd, this), 250)) }, _onZoomTransitionEnd: function () { this._animatingZoom && (this._mapPane && Q(this._mapPane, "leaflet-zoom-anim"), this._animatingZoom = !1, this._move(this._animateToCenter, this._animateToZoom, void 0, !0), this._tempFireZoomEvent && this.fire("zoom"), delete this._tempFireZoomEvent, this.fire("move"), this._moveEnd(!0)) } }); function qo(t, e) { return new H(t, e) } var St = jt.extend({ options: { position: "topright" }, initialize: function (t) { E(this, t) }, getPosition: function () { return this.options.position }, setPosition: function (t) { var e = this._map; return e && e.removeControl(this), this.options.position = t, e && e.addControl(this), this }, getContainer: function () { return this._container }, addTo: function (t) { this.remove(), this._map = t; var e = this._container = this.onAdd(t), i = this.getPosition(), n = t._controlCorners[i]; return Z(e, "leaflet-control"), i.indexOf("bottom") !== -1 ? n.insertBefore(e, n.firstChild) : n.appendChild(e), this._map.on("unload", this.remove, this), this }, remove: function () { return this._map ? (X(this._container), this.onRemove && this.onRemove(this._map), this._map.off("unload", this.remove, this), this._map = null, this) : this }, _refocusOnMap: function (t) { this._map && t && t.screenX > 0 && t.screenY > 0 && this._map.getContainer().focus() } }), ye = function (t) { return new St(t) }; H.include({ addControl: function (t) { return t.addTo(this), this }, removeControl: function (t) { return t.remove(), this }, _initControlPos: function () { var t = this._controlCorners = {}, e = "leaflet-", i = this._controlContainer = V("div", e + "control-container", this._container); function n(a, c) { var m = e + a + " " + e + c; t[a + c] = V("div", m, i) } n("top", "left"), n("top", "right"), n("bottom", "left"), n("bottom", "right") }, _clearControlPos: function () { for (var t in this._controlCorners) X(this._controlCorners[t]); X(this._controlContainer), delete this._controlCorners, delete this._controlContainer } }); var Fn = St.extend({ options: { collapsed: !0, position: "topright", autoZIndex: !0, hideSingleBase: !1, sortLayers: !1, sortFunction: function (t, e, i, n) { return i < n ? -1 : n < i ? 1 : 0 } }, initialize: function (t, e, i) { E(this, i), this._layerControlInputs = [], this._layers = [], this._lastZIndex = 0, this._handlingClick = !1, this._preventClick = !1; for (var n in t) this._addLayer(t[n], n); for (n in e) this._addLayer(e[n], n, !0) }, onAdd: function (t) { this._initLayout(), this._update(), this._map = t, t.on("zoomend", this._checkDisabledLayers, this); for (var e = 0; e < this._layers.length; e++)this._layers[e].layer.on("add remove", this._onLayerChange, this); return this._container }, addTo: function (t) { return St.prototype.addTo.call(this, t), this._expandIfNotCollapsed() }, onRemove: function () { this._map.off("zoomend", this._checkDisabledLayers, this); for (var t = 0; t < this._layers.length; t++)this._layers[t].layer.off("add remove", this._onLayerChange, this) }, addBaseLayer: function (t, e) { return this._addLayer(t, e), this._map ? this._update() : this }, addOverlay: function (t, e) { return this._addLayer(t, e, !0), this._map ? this._update() : this }, removeLayer: function (t) { t.off("add remove", this._onLayerChange, this); var e = this._getLayer(p(t)); return e && this._layers.splice(this._layers.indexOf(e), 1), this._map ? this._update() : this }, expand: function () { Z(this._container, "leaflet-control-layers-expanded"), this._section.style.height = null; var t = this._map.getSize().y - (this._container.offsetTop + 50); return t < this._section.clientHeight ? (Z(this._section, "leaflet-control-layers-scrollbar"), this._section.style.height = t + "px") : Q(this._section, "leaflet-control-layers-scrollbar"), this._checkDisabledLayers(), this }, collapse: function () { return Q(this._container, "leaflet-control-layers-expanded"), this }, _initLayout: function () { var t = "leaflet-control-layers", e = this._container = V("div", t), i = this.options.collapsed; e.setAttribute("aria-haspopup", !0), ve(e), Ei(e); var n = this._section = V("section", t + "-list"); i && (this._map.on("click", this.collapse, this), D(e, { mouseenter: this._expandSafely, mouseleave: this.collapse }, this)); var a = this._layersLink = V("a", t + "-toggle", e); a.href = "#", a.title = "Layers", a.setAttribute("role", "button"), D(a, { keydown: function (c) { c.keyCode === 13 && this._expandSafely() }, click: function (c) { st(c), this._expandSafely() } }, this), i || this.expand(), this._baseLayersList = V("div", t + "-base", n), this._separator = V("div", t + "-separator", n), this._overlaysList = V("div", t + "-overlays", n), e.appendChild(n) }, _getLayer: function (t) { for (var e = 0; e < this._layers.length; e++)if (this._layers[e] && p(this._layers[e].layer) === t) return this._layers[e] }, _addLayer: function (t, e, i) { this._map && t.on("add remove", this._onLayerChange, this), this._layers.push({ layer: t, name: e, overlay: i }), this.options.sortLayers && this._layers.sort(f(function (n, a) { return this.options.sortFunction(n.layer, a.layer, n.name, a.name) }, this)), this.options.autoZIndex && t.setZIndex && (this._lastZIndex++, t.setZIndex(this._lastZIndex)), this._expandIfNotCollapsed() }, _update: function () { if (!this._container) return this; Re(this._baseLayersList), Re(this._overlaysList), this._layerControlInputs = []; var t, e, i, n, a = 0; for (i = 0; i < this._layers.length; i++)n = this._layers[i], this._addItem(n), e = e || n.overlay, t = t || !n.overlay, a += n.overlay ? 0 : 1; return this.options.hideSingleBase && (t = t && a > 1, this._baseLayersList.style.display = t ? "" : "none"), this._separator.style.display = e && t ? "" : "none", this }, _onLayerChange: function (t) { this._handlingClick || this._update(); var e = this._getLayer(p(t.target)), i = e.overlay ? t.type === "add" ? "overlayadd" : "overlayremove" : t.type === "add" ? "baselayerchange" : null; i && this._map.fire(i, e) }, _createRadioElement: function (t, e) { var i = '<input type="radio" class="leaflet-control-layers-selector" name="' + t + '"' + (e ? ' checked="checked"' : "") + "/>", n = document.createElement("div"); return n.innerHTML = i, n.firstChild }, _addItem: function (t) { var e = document.createElement("label"), i = this._map.hasLayer(t.layer), n; t.overlay ? (n = document.createElement("input"), n.type = "checkbox", n.className = "leaflet-control-layers-selector", n.defaultChecked = i) : n = this._createRadioElement("leaflet-base-layers_" + p(this), i), this._layerControlInputs.push(n), n.layerId = p(t.layer), D(n, "click", this._onInputClick, this); var a = document.createElement("span"); a.innerHTML = " " + t.name; var c = document.createElement("span"); e.appendChild(c), c.appendChild(n), c.appendChild(a); var m = t.overlay ? this._overlaysList : this._baseLayersList; return m.appendChild(e), this._checkDisabledLayers(), e }, _onInputClick: function () { if (!this._preventClick) { var t = this._layerControlInputs, e, i, n = [], a = []; this._handlingClick = !0; for (var c = t.length - 1; c >= 0; c--)e = t[c], i = this._getLayer(e.layerId).layer, e.checked ? n.push(i) : e.checked || a.push(i); for (c = 0; c < a.length; c++)this._map.hasLayer(a[c]) && this._map.removeLayer(a[c]); for (c = 0; c < n.length; c++)this._map.hasLayer(n[c]) || this._map.addLayer(n[c]); this._handlingClick = !1, this._refocusOnMap() } }, _checkDisabledLayers: function () { for (var t = this._layerControlInputs, e, i, n = this._map.getZoom(), a = t.length - 1; a >= 0; a--)e = t[a], i = this._getLayer(e.layerId).layer, e.disabled = i.options.minZoom !== void 0 && n < i.options.minZoom || i.options.maxZoom !== void 0 && n > i.options.maxZoom }, _expandIfNotCollapsed: function () { return this._map && !this.options.collapsed && this.expand(), this }, _expandSafely: function () { var t = this._section; this._preventClick = !0, D(t, "click", st), this.expand(); var e = this; setTimeout(function () { Y(t, "click", st), e._preventClick = !1 }) } }), Go = function (t, e, i) { return new Fn(t, e, i) }, Ai = St.extend({ options: { position: "topleft", zoomInText: '<span aria-hidden="true">+</span>', zoomInTitle: "Zoom in", zoomOutText: '<span aria-hidden="true">&#x2212;</span>', zoomOutTitle: "Zoom out" }, onAdd: function (t) { var e = "leaflet-control-zoom", i = V("div", e + " leaflet-bar"), n = this.options; return this._zoomInButton = this._createButton(n.zoomInText, n.zoomInTitle, e + "-in", i, this._zoomIn), this._zoomOutButton = this._createButton(n.zoomOutText, n.zoomOutTitle, e + "-out", i, this._zoomOut), this._updateDisabled(), t.on("zoomend zoomlevelschange", this._updateDisabled, this), i }, onRemove: function (t) { t.off("zoomend zoomlevelschange", this._updateDisabled, this) }, disable: function () { return this._disabled = !0, this._updateDisabled(), this }, enable: function () { return this._disabled = !1, this._updateDisabled(), this }, _zoomIn: function (t) { !this._disabled && this._map._zoom < this._map.getMaxZoom() && this._map.zoomIn(this._map.options.zoomDelta * (t.shiftKey ? 3 : 1)) }, _zoomOut: function (t) { !this._disabled && this._map._zoom > this._map.getMinZoom() && this._map.zoomOut(this._map.options.zoomDelta * (t.shiftKey ? 3 : 1)) }, _createButton: function (t, e, i, n, a) { var c = V("a", i, n); return c.innerHTML = t, c.href = "#", c.title = e, c.setAttribute("role", "button"), c.setAttribute("aria-label", e), ve(c), D(c, "click", Kt), D(c, "click", a, this), D(c, "click", this._refocusOnMap, this), c }, _updateDisabled: function () { var t = this._map, e = "leaflet-disabled"; Q(this._zoomInButton, e), Q(this._zoomOutButton, e), this._zoomInButton.setAttribute("aria-disabled", "false"), this._zoomOutButton.setAttribute("aria-disabled", "false"), (this._disabled || t._zoom === t.getMinZoom()) && (Z(this._zoomOutButton, e), this._zoomOutButton.setAttribute("aria-disabled", "true")), (this._disabled || t._zoom === t.getMaxZoom()) && (Z(this._zoomInButton, e), this._zoomInButton.setAttribute("aria-disabled", "true")) } }); H.mergeOptions({ zoomControl: !0 }), H.addInitHook(function () { this.options.zoomControl && (this.zoomControl = new Ai, this.addControl(this.zoomControl)) }); var Ko = function (t) { return new Ai(t) }, Wn = St.extend({ options: { position: "bottomleft", maxWidth: 100, metric: !0, imperial: !0 }, onAdd: function (t) { var e = "leaflet-control-scale", i = V("div", e), n = this.options; return this._addScales(n, e + "-line", i), t.on(n.updateWhenIdle ? "moveend" : "move", this._update, this), t.whenReady(this._update, this), i }, onRemove: function (t) { t.off(this.options.updateWhenIdle ? "moveend" : "move", this._update, this) }, _addScales: function (t, e, i) { t.metric && (this._mScale = V("div", e, i)), t.imperial && (this._iScale = V("div", e, i)) }, _update: function () { var t = this._map, e = t.getSize().y / 2, i = t.distance(t.containerPointToLatLng([0, e]), t.containerPointToLatLng([this.options.maxWidth, e])); this._updateScales(i) }, _updateScales: function (t) { this.options.metric && t && this._updateMetric(t), this.options.imperial && t && this._updateImperial(t) }, _updateMetric: function (t) { var e = this._getRoundNum(t), i = e < 1e3 ? e + " m" : e / 1e3 + " km"; this._updateScale(this._mScale, i, e / t) }, _updateImperial: function (t) { var e = t * 3.2808399, i, n, a; e > 5280 ? (i = e / 5280, n = this._getRoundNum(i), this._updateScale(this._iScale, n + " mi", n / i)) : (a = this._getRoundNum(e), this._updateScale(this._iScale, a + " ft", a / e)) }, _updateScale: function (t, e, i) { t.style.width = Math.round(this.options.maxWidth * i) + "px", t.innerHTML = e }, _getRoundNum: function (t) { var e = Math.pow(10, (Math.floor(t) + "").length - 1), i = t / e; return i = i >= 10 ? 10 : i >= 5 ? 5 : i >= 3 ? 3 : i >= 2 ? 2 : 1, e * i } }), Yo = function (t) { return new Wn(t) }, $o = '<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>', Mi = St.extend({ options: { position: "bottomright", prefix: '<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">' + (I.inlineSvg ? $o + " " : "") + "Leaflet</a>" }, initialize: function (t) { E(this, t), this._attributions = {} }, onAdd: function (t) { t.attributionControl = this, this._container = V("div", "leaflet-control-attribution"), ve(this._container); for (var e in t._layers) t._layers[e].getAttribution && this.addAttribution(t._layers[e].getAttribution()); return this._update(), t.on("layeradd", this._addAttribution, this), this._container }, onRemove: function (t) { t.off("layeradd", this._addAttribution, this) }, _addAttribution: function (t) { t.layer.getAttribution && (this.addAttribution(t.layer.getAttribution()), t.layer.once("remove", function () { this.removeAttribution(t.layer.getAttribution()) }, this)) }, setPrefix: function (t) { return this.options.prefix = t, this._update(), this }, addAttribution: function (t) { return t ? (this._attributions[t] || (this._attributions[t] = 0), this._attributions[t]++, this._update(), this) : this }, removeAttribution: function (t) { return t ? (this._attributions[t] && (this._attributions[t]--, this._update()), this) : this }, _update: function () { if (this._map) { var t = []; for (var e in this._attributions) this._attributions[e] && t.push(e); var i = []; this.options.prefix && i.push(this.options.prefix), t.length && i.push(t.join(", ")), this._container.innerHTML = i.join(' <span aria-hidden="true">|</span> ') } } }); H.mergeOptions({ attributionControl: !0 }), H.addInitHook(function () { this.options.attributionControl && new Mi().addTo(this) }); var Jo = function (t) { return new Mi(t) }; St.Layers = Fn, St.Zoom = Ai, St.Scale = Wn, St.Attribution = Mi, ye.layers = Go, ye.zoom = Ko, ye.scale = Yo, ye.attribution = Jo; var kt = jt.extend({ initialize: function (t) { this._map = t }, enable: function () { return this._enabled ? this : (this._enabled = !0, this.addHooks(), this) }, disable: function () { return this._enabled ? (this._enabled = !1, this.removeHooks(), this) : this }, enabled: function () { return !!this._enabled } }); kt.addTo = function (t, e) { return t.addHandler(e, this), this }; var Xo = { Events: mt }, Hn = I.touch ? "touchstart mousedown" : "mousedown", Ft = he.extend({ options: { clickTolerance: 3 }, initialize: function (t, e, i, n) { E(this, n), this._element = t, this._dragStartTarget = e || t, this._preventOutline = i }, enable: function () { this._enabled || (D(this._dragStartTarget, Hn, this._onDown, this), this._enabled = !0) }, disable: function () { this._enabled && (Ft._dragging === this && this.finishDrag(!0), Y(this._dragStartTarget, Hn, this._onDown, this), this._enabled = !1, this._moved = !1) }, _onDown: function (t) { if (this._enabled && (this._moved = !1, !vi(this._element, "leaflet-zoom-anim"))) { if (t.touches && t.touches.length !== 1) { Ft._dragging === this && this.finishDrag(); return } if (!(Ft._dragging || t.shiftKey || t.which !== 1 && t.button !== 1 && !t.touches) && (Ft._dragging = this, this._preventOutline && Li(this._element), wi(), pe(), !this._moving)) { this.fire("down"); var e = t.touches ? t.touches[0] : t, i = In(this._element); this._startPoint = new B(e.clientX, e.clientY), this._startPos = qt(this._element), this._parentScale = Ci(i); var n = t.type === "mousedown"; D(document, n ? "mousemove" : "touchmove", this._onMove, this), D(document, n ? "mouseup" : "touchend touchcancel", this._onUp, this) } } }, _onMove: function (t) { if (this._enabled) { if (t.touches && t.touches.length > 1) { this._moved = !0; return } var e = t.touches && t.touches.length === 1 ? t.touches[0] : t, i = new B(e.clientX, e.clientY)._subtract(this._startPoint); !i.x && !i.y || Math.abs(i.x) + Math.abs(i.y) < this.options.clickTolerance || (i.x /= this._parentScale.x, i.y /= this._parentScale.y, st(t), this._moved || (this.fire("dragstart"), this._moved = !0, Z(document.body, "leaflet-dragging"), this._lastTarget = t.target || t.srcElement, window.SVGElementInstance && this._lastTarget instanceof window.SVGElementInstance && (this._lastTarget = this._lastTarget.correspondingUseElement), Z(this._lastTarget, "leaflet-drag-target")), this._newPos = this._startPos.add(i), this._moving = !0, this._lastEvent = t, this._updatePosition()) } }, _updatePosition: function () { var t = { originalEvent: this._lastEvent }; this.fire("predrag", t), it(this._element, this._newPos), this.fire("drag", t) }, _onUp: function () { this._enabled && this.finishDrag() }, finishDrag: function (t) { Q(document.body, "leaflet-dragging"), this._lastTarget && (Q(this._lastTarget, "leaflet-drag-target"), this._lastTarget = null), Y(document, "mousemove touchmove", this._onMove, this), Y(document, "mouseup touchend touchcancel", this._onUp, this), bi(), ge(); var e = this._moved && this._moving; this._moving = !1, Ft._dragging = !1, e && this.fire("dragend", { noInertia: t, distance: this._newPos.distanceTo(this._startPos) }) } }); function Un(t, e, i) { var n, a = [1, 4, 2, 8], c, m, v, w, k, z, N, F; for (c = 0, z = t.length; c < z; c++)t[c]._code = Yt(t[c], e); for (v = 0; v < 4; v++) { for (N = a[v], n = [], c = 0, z = t.length, m = z - 1; c < z; m = c++)w = t[c], k = t[m], w._code & N ? k._code & N || (F = De(k, w, N, e, i), F._code = Yt(F, e), n.push(F)) : (k._code & N && (F = De(k, w, N, e, i), F._code = Yt(F, e), n.push(F)), n.push(w)); t = n } return t } function Vn(t, e) { var i, n, a, c, m, v, w, k, z; if (!t || t.length === 0) throw new Error("latlngs not passed"); vt(t) || (console.warn("latlngs are not flat! Only the first ring will be used"), t = t[0]); var N = W([0, 0]), F = et(t), lt = F.getNorthWest().distanceTo(F.getSouthWest()) * F.getNorthEast().distanceTo(F.getNorthWest()); lt < 1700 && (N = zi(t)); var ot = t.length, yt = []; for (i = 0; i < ot; i++) { var dt = W(t[i]); yt.push(e.project(W([dt.lat - N.lat, dt.lng - N.lng]))) } for (v = w = k = 0, i = 0, n = ot - 1; i < ot; n = i++)a = yt[i], c = yt[n], m = a.y * c.x - c.y * a.x, w += (a.x + c.x) * m, k += (a.y + c.y) * m, v += m * 3; v === 0 ? z = yt[0] : z = [w / v, k / v]; var se = e.unproject(O(z)); return W([se.lat + N.lat, se.lng + N.lng]) } function zi(t) { for (var e = 0, i = 0, n = 0, a = 0; a < t.length; a++) { var c = W(t[a]); e += c.lat, i += c.lng, n++ } return W([e / n, i / n]) } var Qo = { __proto__: null, clipPolygon: Un, polygonCenter: Vn, centroid: zi }; function qn(t, e) { if (!e || !t.length) return t.slice(); var i = e * e; return t = is(t, i), t = es(t, i), t } function Gn(t, e, i) { return Math.sqrt(xe(t, e, i, !0)) } function ts(t, e, i) { return xe(t, e, i) } function es(t, e) { var i = t.length, n = typeof Uint8Array < "u" ? Uint8Array : Array, a = new n(i); a[0] = a[i - 1] = 1, Ri(t, a, e, 0, i - 1); var c, m = []; for (c = 0; c < i; c++)a[c] && m.push(t[c]); return m } function Ri(t, e, i, n, a) { var c = 0, m, v, w; for (v = n + 1; v <= a - 1; v++)w = xe(t[v], t[n], t[a], !0), w > c && (m = v, c = w); c > i && (e[m] = 1, Ri(t, e, i, n, m), Ri(t, e, i, m, a)) } function is(t, e) { for (var i = [t[0]], n = 1, a = 0, c = t.length; n < c; n++)ns(t[n], t[a]) > e && (i.push(t[n]), a = n); return a < c - 1 && i.push(t[c - 1]), i } var Kn; function Yn(t, e, i, n, a) { var c = n ? Kn : Yt(t, i), m = Yt(e, i), v, w, k; for (Kn = m; ;) { if (!(c | m)) return [t, e]; if (c & m) return !1; v = c || m, w = De(t, e, v, i, a), k = Yt(w, i), v === c ? (t = w, c = k) : (e = w, m = k) } } function De(t, e, i, n, a) { var c = e.x - t.x, m = e.y - t.y, v = n.min, w = n.max, k, z; return i & 8 ? (k = t.x + c * (w.y - t.y) / m, z = w.y) : i & 4 ? (k = t.x + c * (v.y - t.y) / m, z = v.y) : i & 2 ? (k = w.x, z = t.y + m * (w.x - t.x) / c) : i & 1 && (k = v.x, z = t.y + m * (v.x - t.x) / c), new B(k, z, a) } function Yt(t, e) { var i = 0; return t.x < e.min.x ? i |= 1 : t.x > e.max.x && (i |= 2), t.y < e.min.y ? i |= 4 : t.y > e.max.y && (i |= 8), i } function ns(t, e) { var i = e.x - t.x, n = e.y - t.y; return i * i + n * n } function xe(t, e, i, n) { var a = e.x, c = e.y, m = i.x - a, v = i.y - c, w = m * m + v * v, k; return w > 0 && (k = ((t.x - a) * m + (t.y - c) * v) / w, k > 1 ? (a = i.x, c = i.y) : k > 0 && (a += m * k, c += v * k)), m = t.x - a, v = t.y - c, n ? m * m + v * v : new B(a, c) } function vt(t) { return !P(t[0]) || typeof t[0][0] != "object" && typeof t[0][0] < "u" } function $n(t) { return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."), vt(t) } function Jn(t, e) { var i, n, a, c, m, v, w, k; if (!t || t.length === 0) throw new Error("latlngs not passed"); vt(t) || (console.warn("latlngs are not flat! Only the first ring will be used"), t = t[0]); var z = W([0, 0]), N = et(t), F = N.getNorthWest().distanceTo(N.getSouthWest()) * N.getNorthEast().distanceTo(N.getNorthWest()); F < 1700 && (z = zi(t)); var lt = t.length, ot = []; for (i = 0; i < lt; i++) { var yt = W(t[i]); ot.push(e.project(W([yt.lat - z.lat, yt.lng - z.lng]))) } for (i = 0, n = 0; i < lt - 1; i++)n += ot[i].distanceTo(ot[i + 1]) / 2; if (n === 0) k = ot[0]; else for (i = 0, c = 0; i < lt - 1; i++)if (m = ot[i], v = ot[i + 1], a = m.distanceTo(v), c += a, c > n) { w = (c - n) / a, k = [v.x - w * (v.x - m.x), v.y - w * (v.y - m.y)]; break } var dt = e.unproject(O(k)); return W([dt.lat + z.lat, dt.lng + z.lng]) } var rs = { __proto__: null, simplify: qn, pointToSegmentDistance: Gn, closestPointOnSegment: ts, clipSegment: Yn, _getEdgeIntersection: De, _getBitCode: Yt, _sqClosestPointOnSegment: xe, isFlat: vt, _flat: $n, polylineCenter: Jn }, Ii = { project: function (t) { return new B(t.lng, t.lat) }, unproject: function (t) { return new K(t.y, t.x) }, bounds: new J([-180, -90], [180, 90]) }, Ni = { R: 6378137, R_MINOR: 6356752314245179e-9, bounds: new J([-2003750834279e-5, -1549657073972e-5], [2003750834279e-5, 1876465623138e-5]), project: function (t) { var e = Math.PI / 180, i = this.R, n = t.lat * e, a = this.R_MINOR / i, c = Math.sqrt(1 - a * a), m = c * Math.sin(n), v = Math.tan(Math.PI / 4 - n / 2) / Math.pow((1 - m) / (1 + m), c / 2); return n = -i * Math.log(Math.max(v, 1e-10)), new B(t.lng * e * i, n) }, unproject: function (t) { for (var e = 180 / Math.PI, i = this.R, n = this.R_MINOR / i, a = Math.sqrt(1 - n * n), c = Math.exp(-t.y / i), m = Math.PI / 2 - 2 * Math.atan(c), v = 0, w = .1, k; v < 15 && Math.abs(w) > 1e-7; v++)k = a * Math.sin(m), k = Math.pow((1 - k) / (1 + k), a / 2), w = Math.PI / 2 - 2 * Math.atan(c * k) - m, m += w; return new K(m * e, t.x * e / i) } }, os = { __proto__: null, LonLat: Ii, Mercator: Ni, SphericalMercator: li }, ss = u({}, Zt, { code: "EPSG:3395", projection: Ni, transformation: (function () { var t = .5 / (Math.PI * Ni.R); return ue(t, .5, -t, .5) })() }), Xn = u({}, Zt, { code: "EPSG:4326", projection: Ii, transformation: ue(1 / 180, 1, -1 / 180, .5) }), as = u({}, At, { projection: Ii, transformation: ue(1, 0, -1, 0), scale: function (t) { return Math.pow(2, t) }, zoom: function (t) { return Math.log(t) / Math.LN2 }, distance: function (t, e) { var i = e.lng - t.lng, n = e.lat - t.lat; return Math.sqrt(i * i + n * n) }, infinite: !0 }); At.Earth = Zt, At.EPSG3395 = ss, At.EPSG3857 = hi, At.EPSG900913 = fo, At.EPSG4326 = Xn, At.Simple = as; var Lt = he.extend({ options: { pane: "overlayPane", attribution: null, bubblingMouseEvents: !0 }, addTo: function (t) { return t.addLayer(this), this }, remove: function () { return this.removeFrom(this._map || this._mapToAdd) }, removeFrom: function (t) { return t && t.removeLayer(this), this }, getPane: function (t) { return this._map.getPane(t ? this.options[t] || t : this.options.pane) }, addInteractiveTarget: function (t) { return this._map._targets[p(t)] = this, this }, removeInteractiveTarget: function (t) { return delete this._map._targets[p(t)], this }, getAttribution: function () { return this.options.attribution }, _layerAdd: function (t) { var e = t.target; if (e.hasLayer(this)) { if (this._map = e, this._zoomAnimated = e._zoomAnimated, this.getEvents) { var i = this.getEvents(); e.on(i, this), this.once("remove", function () { e.off(i, this) }, this) } this.onAdd(e), this.fire("add"), e.fire("layeradd", { layer: this }) } } }); H.include({ addLayer: function (t) { if (!t._layerAdd) throw new Error("The provided object is not a Layer."); var e = p(t); return this._layers[e] ? this : (this._layers[e] = t, t._mapToAdd = this, t.beforeAdd && t.beforeAdd(this), this.whenReady(t._layerAdd, t), this) }, removeLayer: function (t) { var e = p(t); return this._layers[e] ? (this._loaded && t.onRemove(this), delete this._layers[e], this._loaded && (this.fire("layerremove", { layer: t }), t.fire("remove")), t._map = t._mapToAdd = null, this) : this }, hasLayer: function (t) { return p(t) in this._layers }, eachLayer: function (t, e) { for (var i in this._layers) t.call(e, this._layers[i]); return this }, _addLayers: function (t) { t = t ? P(t) ? t : [t] : []; for (var e = 0, i = t.length; e < i; e++)this.addLayer(t[e]) }, _addZoomLimit: function (t) { (!isNaN(t.options.maxZoom) || !isNaN(t.options.minZoom)) && (this._zoomBoundLayers[p(t)] = t, this._updateZoomLevels()) }, _removeZoomLimit: function (t) { var e = p(t); this._zoomBoundLayers[e] && (delete this._zoomBoundLayers[e], this._updateZoomLevels()) }, _updateZoomLevels: function () { var t = 1 / 0, e = -1 / 0, i = this._getZoomSpan(); for (var n in this._zoomBoundLayers) { var a = this._zoomBoundLayers[n].options; t = a.minZoom === void 0 ? t : Math.min(t, a.minZoom), e = a.maxZoom === void 0 ? e : Math.max(e, a.maxZoom) } this._layersMaxZoom = e === -1 / 0 ? void 0 : e, this._layersMinZoom = t === 1 / 0 ? void 0 : t, i !== this._getZoomSpan() && this.fire("zoomlevelschange"), this.options.maxZoom === void 0 && this._layersMaxZoom && this.getZoom() > this._layersMaxZoom && this.setZoom(this._layersMaxZoom), this.options.minZoom === void 0 && this._layersMinZoom && this.getZoom() < this._layersMinZoom && this.setZoom(this._layersMinZoom) } }); var ee = Lt.extend({ initialize: function (t, e) { E(this, e), this._layers = {}; var i, n; if (t) for (i = 0, n = t.length; i < n; i++)this.addLayer(t[i]) }, addLayer: function (t) { var e = this.getLayerId(t); return this._layers[e] = t, this._map && this._map.addLayer(t), this }, removeLayer: function (t) { var e = t in this._layers ? t : this.getLayerId(t); return this._map && this._layers[e] && this._map.removeLayer(this._layers[e]), delete this._layers[e], this }, hasLayer: function (t) { var e = typeof t == "number" ? t : this.getLayerId(t); return e in this._layers }, clearLayers: function () { return this.eachLayer(this.removeLayer, this) }, invoke: function (t) { var e = Array.prototype.slice.call(arguments, 1), i, n; for (i in this._layers) n = this._layers[i], n[t] && n[t].apply(n, e); return this }, onAdd: function (t) { this.eachLayer(t.addLayer, t) }, onRemove: function (t) { this.eachLayer(t.removeLayer, t) }, eachLayer: function (t, e) { for (var i in this._layers) t.call(e, this._layers[i]); return this }, getLayer: function (t) { return this._layers[t] }, getLayers: function () { var t = []; return this.eachLayer(t.push, t), t }, setZIndex: function (t) { return this.invoke("setZIndex", t) }, getLayerId: function (t) { return p(t) } }), ls = function (t, e) { return new ee(t, e) }, Mt = ee.extend({ addLayer: function (t) { return this.hasLayer(t) ? this : (t.addEventParent(this), ee.prototype.addLayer.call(this, t), this.fire("layeradd", { layer: t })) }, removeLayer: function (t) { return this.hasLayer(t) ? (t in this._layers && (t = this._layers[t]), t.removeEventParent(this), ee.prototype.removeLayer.call(this, t), this.fire("layerremove", { layer: t })) : this }, setStyle: function (t) { return this.invoke("setStyle", t) }, bringToFront: function () { return this.invoke("bringToFront") }, bringToBack: function () { return this.invoke("bringToBack") }, getBounds: function () { var t = new ut; for (var e in this._layers) { var i = this._layers[e]; t.extend(i.getBounds ? i.getBounds() : i.getLatLng()) } return t } }), cs = function (t, e) { return new Mt(t, e) }, ie = jt.extend({ options: { popupAnchor: [0, 0], tooltipAnchor: [0, 0], crossOrigin: !1 }, initialize: function (t) { E(this, t) }, createIcon: function (t) { return this._createIcon("icon", t) }, createShadow: function (t) { return this._createIcon("shadow", t) }, _createIcon: function (t, e) { var i = this._getIconUrl(t); if (!i) { if (t === "icon") throw new Error("iconUrl not set in Icon options (see the docs)."); return null } var n = this._createImg(i, e && e.tagName === "IMG" ? e : null); return this._setIconStyles(n, t), (this.options.crossOrigin || this.options.crossOrigin === "") && (n.crossOrigin = this.options.crossOrigin === !0 ? "" : this.options.crossOrigin), n }, _setIconStyles: function (t, e) { var i = this.options, n = i[e + "Size"]; typeof n == "number" && (n = [n, n]); var a = O(n), c = O(e === "shadow" && i.shadowAnchor || i.iconAnchor || a && a.divideBy(2, !0)); t.className = "leaflet-marker-" + e + " " + (i.className || ""), c && (t.style.marginLeft = -c.x + "px", t.style.marginTop = -c.y + "px"), a && (t.style.width = a.x + "px", t.style.height = a.y + "px") }, _createImg: function (t, e) { return e = e || document.createElement("img"), e.src = t, e }, _getIconUrl: function (t) { return I.retina && this.options[t + "RetinaUrl"] || this.options[t + "Url"] } }); function hs(t) { return new ie(t) } var we = ie.extend({ options: { iconUrl: "marker-icon.png", iconRetinaUrl: "marker-icon-2x.png", shadowUrl: "marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], tooltipAnchor: [16, -28], shadowSize: [41, 41] }, _getIconUrl: function (t) { return typeof we.imagePath != "string" && (we.imagePath = this._detectIconPath()), (this.options.imagePath || we.imagePath) + ie.prototype._getIconUrl.call(this, t) }, _stripUrl: function (t) { var e = function (i, n, a) { var c = n.exec(i); return c && c[a] }; return t = e(t, /^url\((['"])?(.+)\1\)$/, 2), t && e(t, /^(.*)marker-icon\.png$/, 1) }, _detectIconPath: function () { var t = V("div", "leaflet-default-icon-path", document.body), e = me(t, "background-image") || me(t, "backgroundImage"); if (document.body.removeChild(t), e = this._stripUrl(e), e) return e; var i = document.querySelector('link[href$="leaflet.css"]'); return i ? i.href.substring(0, i.href.length - 11 - 1) : "" } }), Qn = kt.extend({ initialize: function (t) { this._marker = t }, addHooks: function () { var t = this._marker._icon; this._draggable || (this._draggable = new Ft(t, t, !0)), this._draggable.on({ dragstart: this._onDragStart, predrag: this._onPreDrag, drag: this._onDrag, dragend: this._onDragEnd }, this).enable(), Z(t, "leaflet-marker-draggable") }, removeHooks: function () { this._draggable.off({ dragstart: this._onDragStart, predrag: this._onPreDrag, drag: this._onDrag, dragend: this._onDragEnd }, this).disable(), this._marker._icon && Q(this._marker._icon, "leaflet-marker-draggable") }, moved: function () { return this._draggable && this._draggable._moved }, _adjustPan: function (t) { var e = this._marker, i = e._map, n = this._marker.options.autoPanSpeed, a = this._marker.options.autoPanPadding, c = qt(e._icon), m = i.getPixelBounds(), v = i.getPixelOrigin(), w = ht(m.min._subtract(v).add(a), m.max._subtract(v).subtract(a)); if (!w.contains(c)) { var k = O((Math.max(w.max.x, c.x) - w.max.x) / (m.max.x - w.max.x) - (Math.min(w.min.x, c.x) - w.min.x) / (m.min.x - w.min.x), (Math.max(w.max.y, c.y) - w.max.y) / (m.max.y - w.max.y) - (Math.min(w.min.y, c.y) - w.min.y) / (m.min.y - w.min.y)).multiplyBy(n); i.panBy(k, { animate: !1 }), this._draggable._newPos._add(k), this._draggable._startPos._add(k), it(e._icon, this._draggable._newPos), this._onDrag(t), this._panRequest = ct(this._adjustPan.bind(this, t)) } }, _onDragStart: function () { this._oldLatLng = this._marker.getLatLng(), this._marker.closePopup && this._marker.closePopup(), this._marker.fire("movestart").fire("dragstart") }, _onPreDrag: function (t) { this._marker.options.autoPan && (gt(this._panRequest), this._panRequest = ct(this._adjustPan.bind(this, t))) }, _onDrag: function (t) { var e = this._marker, i = e._shadow, n = qt(e._icon), a = e._map.layerPointToLatLng(n); i && it(i, n), e._latlng = a, t.latlng = a, t.oldLatLng = this._oldLatLng, e.fire("move", t).fire("drag", t) }, _onDragEnd: function (t) { gt(this._panRequest), delete this._oldLatLng, this._marker.fire("moveend").fire("dragend", t) } }), Ze = Lt.extend({ options: { icon: new we, interactive: !0, keyboard: !0, title: "", alt: "Marker", zIndexOffset: 0, opacity: 1, riseOnHover: !1, riseOffset: 250, pane: "markerPane", shadowPane: "shadowPane", bubblingMouseEvents: !1, autoPanOnFocus: !0, draggable: !1, autoPan: !1, autoPanPadding: [50, 50], autoPanSpeed: 10 }, initialize: function (t, e) { E(this, e), this._latlng = W(t) }, onAdd: function (t) { this._zoomAnimated = this._zoomAnimated && t.options.markerZoomAnimation, this._zoomAnimated && t.on("zoomanim", this._animateZoom, this), this._initIcon(), this.update() }, onRemove: function (t) { this.dragging && this.dragging.enabled() && (this.options.draggable = !0, this.dragging.removeHooks()), delete this.dragging, this._zoomAnimated && t.off("zoomanim", this._animateZoom, this), this._removeIcon(), this._removeShadow() }, getEvents: function () { return { zoom: this.update, viewreset: this.update } }, getLatLng: function () { return this._latlng }, setLatLng: function (t) { var e = this._latlng; return this._latlng = W(t), this.update(), this.fire("move", { oldLatLng: e, latlng: this._latlng }) }, setZIndexOffset: function (t) { return this.options.zIndexOffset = t, this.update() }, getIcon: function () { return this.options.icon }, setIcon: function (t) { return this.options.icon = t, this._map && (this._initIcon(), this.update()), this._popup && this.bindPopup(this._popup, this._popup.options), this }, getElement: function () { return this._icon }, update: function () { if (this._icon && this._map) { var t = this._map.latLngToLayerPoint(this._latlng).round(); this._setPos(t) } return this }, _initIcon: function () { var t = this.options, e = "leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"), i = t.icon.createIcon(this._icon), n = !1; i !== this._icon && (this._icon && this._removeIcon(), n = !0, t.title && (i.title = t.title), i.tagName === "IMG" && (i.alt = t.alt || "")), Z(i, e), t.keyboard && (i.tabIndex = "0", i.setAttribute("role", "button")), this._icon = i, t.riseOnHover && this.on({ mouseover: this._bringToFront, mouseout: this._resetZIndex }), this.options.autoPanOnFocus && D(i, "focus", this._panOnFocus, this); var a = t.icon.createShadow(this._shadow), c = !1; a !== this._shadow && (this._removeShadow(), c = !0), a && (Z(a, e), a.alt = ""), this._shadow = a, t.opacity < 1 && this._updateOpacity(), n && this.getPane().appendChild(this._icon), this._initInteraction(), a && c && this.getPane(t.shadowPane).appendChild(this._shadow) }, _removeIcon: function () { this.options.riseOnHover && this.off({ mouseover: this._bringToFront, mouseout: this._resetZIndex }), this.options.autoPanOnFocus && Y(this._icon, "focus", this._panOnFocus, this), X(this._icon), this.removeInteractiveTarget(this._icon), this._icon = null }, _removeShadow: function () { this._shadow && X(this._shadow), this._shadow = null }, _setPos: function (t) { this._icon && it(this._icon, t), this._shadow && it(this._shadow, t), this._zIndex = t.y + this.options.zIndexOffset, this._resetZIndex() }, _updateZIndex: function (t) { this._icon && (this._icon.style.zIndex = this._zIndex + t) }, _animateZoom: function (t) { var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center).round(); this._setPos(e) }, _initInteraction: function () { if (this.options.interactive && (Z(this._icon, "leaflet-interactive"), this.addInteractiveTarget(this._icon), Qn)) { var t = this.options.draggable; this.dragging && (t = this.dragging.enabled(), this.dragging.disable()), this.dragging = new Qn(this), t && this.dragging.enable() } }, setOpacity: function (t) { return this.options.opacity = t, this._map && this._updateOpacity(), this }, _updateOpacity: function () { var t = this.options.opacity; this._icon && _t(this._icon, t), this._shadow && _t(this._shadow, t) }, _bringToFront: function () { this._updateZIndex(this.options.riseOffset) }, _resetZIndex: function () { this._updateZIndex(0) }, _panOnFocus: function () { var t = this._map; if (t) { var e = this.options.icon.options, i = e.iconSize ? O(e.iconSize) : O(0, 0), n = e.iconAnchor ? O(e.iconAnchor) : O(0, 0); t.panInside(this._latlng, { paddingTopLeft: n, paddingBottomRight: i.subtract(n) }) } }, _getPopupAnchor: function () { return this.options.icon.options.popupAnchor }, _getTooltipAnchor: function () { return this.options.icon.options.tooltipAnchor } }); function us(t, e) { return new Ze(t, e) } var Wt = Lt.extend({ options: { stroke: !0, color: "#3388ff", weight: 3, opacity: 1, lineCap: "round", lineJoin: "round", dashArray: null, dashOffset: null, fill: !1, fillColor: null, fillOpacity: .2, fillRule: "evenodd", interactive: !0, bubblingMouseEvents: !0 }, beforeAdd: function (t) { this._renderer = t.getRenderer(this) }, onAdd: function () { this._renderer._initPath(this), this._reset(), this._renderer._addPath(this) }, onRemove: function () { this._renderer._removePath(this) }, redraw: function () { return this._map && this._renderer._updatePath(this), this }, setStyle: function (t) { return E(this, t), this._renderer && (this._renderer._updateStyle(this), this.options.stroke && t && Object.prototype.hasOwnProperty.call(t, "weight") && this._updateBounds()), this }, bringToFront: function () { return this._renderer && this._renderer._bringToFront(this), this }, bringToBack: function () { return this._renderer && this._renderer._bringToBack(this), this }, getElement: function () { return this._path }, _reset: function () { this._project(), this._update() }, _clickTolerance: function () { return (this.options.stroke ? this.options.weight / 2 : 0) + (this._renderer.options.tolerance || 0) } }), Fe = Wt.extend({ options: { fill: !0, radius: 10 }, initialize: function (t, e) { E(this, e), this._latlng = W(t), this._radius = this.options.radius }, setLatLng: function (t) { var e = this._latlng; return this._latlng = W(t), this.redraw(), this.fire("move", { oldLatLng: e, latlng: this._latlng }) }, getLatLng: function () { return this._latlng }, setRadius: function (t) { return this.options.radius = this._radius = t, this.redraw() }, getRadius: function () { return this._radius }, setStyle: function (t) { var e = t && t.radius || this._radius; return Wt.prototype.setStyle.call(this, t), this.setRadius(e), this }, _project: function () { this._point = this._map.latLngToLayerPoint(this._latlng), this._updateBounds() }, _updateBounds: function () { var t = this._radius, e = this._radiusY || t, i = this._clickTolerance(), n = [t + i, e + i]; this._pxBounds = new J(this._point.subtract(n), this._point.add(n)) }, _update: function () { this._map && this._updatePath() }, _updatePath: function () { this._renderer._updateCircle(this) }, _empty: function () { return this._radius && !this._renderer._bounds.intersects(this._pxBounds) }, _containsPoint: function (t) { return t.distanceTo(this._point) <= this._radius + this._clickTolerance() } }); function ds(t, e) { return new Fe(t, e) } var Oi = Fe.extend({ initialize: function (t, e, i) { if (typeof e == "number" && (e = u({}, i, { radius: e })), E(this, e), this._latlng = W(t), isNaN(this.options.radius)) throw new Error("Circle radius cannot be NaN"); this._mRadius = this.options.radius }, setRadius: function (t) { return this._mRadius = t, this.redraw() }, getRadius: function () { return this._mRadius }, getBounds: function () { var t = [this._radius, this._radiusY || this._radius]; return new ut(this._map.layerPointToLatLng(this._point.subtract(t)), this._map.layerPointToLatLng(this._point.add(t))) }, setStyle: Wt.prototype.setStyle, _project: function () { var t = this._latlng.lng, e = this._latlng.lat, i = this._map, n = i.options.crs; if (n.distance === Zt.distance) { var a = Math.PI / 180, c = this._mRadius / Zt.R / a, m = i.project([e + c, t]), v = i.project([e - c, t]), w = m.add(v).divideBy(2), k = i.unproject(w).lat, z = Math.acos((Math.cos(c * a) - Math.sin(e * a) * Math.sin(k * a)) / (Math.cos(e * a) * Math.cos(k * a))) / a; (isNaN(z) || z === 0) && (z = c / Math.cos(Math.PI / 180 * e)), this._point = w.subtract(i.getPixelOrigin()), this._radius = isNaN(z) ? 0 : w.x - i.project([k, t - z]).x, this._radiusY = w.y - m.y } else { var N = n.unproject(n.project(this._latlng).subtract([this._mRadius, 0])); this._point = i.latLngToLayerPoint(this._latlng), this._radius = this._point.x - i.latLngToLayerPoint(N).x } this._updateBounds() } }); function fs(t, e, i) { return new Oi(t, e, i) } var zt = Wt.extend({ options: { smoothFactor: 1, noClip: !1 }, initialize: function (t, e) { E(this, e), this._setLatLngs(t) }, getLatLngs: function () { return this._latlngs }, setLatLngs: function (t) { return this._setLatLngs(t), this.redraw() }, isEmpty: function () { return !this._latlngs.length }, closestLayerPoint: function (t) { for (var e = 1 / 0, i = null, n = xe, a, c, m = 0, v = this._parts.length; m < v; m++)for (var w = this._parts[m], k = 1, z = w.length; k < z; k++) { a = w[k - 1], c = w[k]; var N = n(t, a, c, !0); N < e && (e = N, i = n(t, a, c)) } return i && (i.distance = Math.sqrt(e)), i }, getCenter: function () { if (!this._map) throw new Error("Must add layer to map before using getCenter()"); return Jn(this._defaultShape(), this._map.options.crs) }, getBounds: function () { return this._bounds }, addLatLng: function (t, e) { return e = e || this._defaultShape(), t = W(t), e.push(t), this._bounds.extend(t), this.redraw() }, _setLatLngs: function (t) { this._bounds = new ut, this._latlngs = this._convertLatLngs(t) }, _defaultShape: function () { return vt(this._latlngs) ? this._latlngs : this._latlngs[0] }, _convertLatLngs: function (t) { for (var e = [], i = vt(t), n = 0, a = t.length; n < a; n++)i ? (e[n] = W(t[n]), this._bounds.extend(e[n])) : e[n] = this._convertLatLngs(t[n]); return e }, _project: function () { var t = new J; this._rings = [], this._projectLatlngs(this._latlngs, this._rings, t), this._bounds.isValid() && t.isValid() && (this._rawPxBounds = t, this._updateBounds()) }, _updateBounds: function () { var t = this._clickTolerance(), e = new B(t, t); this._rawPxBounds && (this._pxBounds = new J([this._rawPxBounds.min.subtract(e), this._rawPxBounds.max.add(e)])) }, _projectLatlngs: function (t, e, i) { var n = t[0] instanceof K, a = t.length, c, m; if (n) { for (m = [], c = 0; c < a; c++)m[c] = this._map.latLngToLayerPoint(t[c]), i.extend(m[c]); e.push(m) } else for (c = 0; c < a; c++)this._projectLatlngs(t[c], e, i) }, _clipPoints: function () { var t = this._renderer._bounds; if (this._parts = [], !(!this._pxBounds || !this._pxBounds.intersects(t))) { if (this.options.noClip) { this._parts = this._rings; return } var e = this._parts, i, n, a, c, m, v, w; for (i = 0, a = 0, c = this._rings.length; i < c; i++)for (w = this._rings[i], n = 0, m = w.length; n < m - 1; n++)v = Yn(w[n], w[n + 1], t, n, !0), v && (e[a] = e[a] || [], e[a].push(v[0]), (v[1] !== w[n + 1] || n === m - 2) && (e[a].push(v[1]), a++)) } }, _simplifyPoints: function () { for (var t = this._parts, e = this.options.smoothFactor, i = 0, n = t.length; i < n; i++)t[i] = qn(t[i], e) }, _update: function () { this._map && (this._clipPoints(), this._simplifyPoints(), this._updatePath()) }, _updatePath: function () { this._renderer._updatePoly(this) }, _containsPoint: function (t, e) { var i, n, a, c, m, v, w = this._clickTolerance(); if (!this._pxBounds || !this._pxBounds.contains(t)) return !1; for (i = 0, c = this._parts.length; i < c; i++)for (v = this._parts[i], n = 0, m = v.length, a = m - 1; n < m; a = n++)if (!(!e && n === 0) && Gn(t, v[a], v[n]) <= w) return !0; return !1 } }); function ms(t, e) { return new zt(t, e) } zt._flat = $n; var ne = zt.extend({ options: { fill: !0 }, isEmpty: function () { return !this._latlngs.length || !this._latlngs[0].length }, getCenter: function () { if (!this._map) throw new Error("Must add layer to map before using getCenter()"); return Vn(this._defaultShape(), this._map.options.crs) }, _convertLatLngs: function (t) { var e = zt.prototype._convertLatLngs.call(this, t), i = e.length; return i >= 2 && e[0] instanceof K && e[0].equals(e[i - 1]) && e.pop(), e }, _setLatLngs: function (t) { zt.prototype._setLatLngs.call(this, t), vt(this._latlngs) && (this._latlngs = [this._latlngs]) }, _defaultShape: function () { return vt(this._latlngs[0]) ? this._latlngs[0] : this._latlngs[0][0] }, _clipPoints: function () { var t = this._renderer._bounds, e = this.options.weight, i = new B(e, e); if (t = new J(t.min.subtract(i), t.max.add(i)), this._parts = [], !(!this._pxBounds || !this._pxBounds.intersects(t))) { if (this.options.noClip) { this._parts = this._rings; return } for (var n = 0, a = this._rings.length, c; n < a; n++)c = Un(this._rings[n], t, !0), c.length && this._parts.push(c) } }, _updatePath: function () { this._renderer._updatePoly(this, !0) }, _containsPoint: function (t) { var e = !1, i, n, a, c, m, v, w, k; if (!this._pxBounds || !this._pxBounds.contains(t)) return !1; for (c = 0, w = this._parts.length; c < w; c++)for (i = this._parts[c], m = 0, k = i.length, v = k - 1; m < k; v = m++)n = i[m], a = i[v], n.y > t.y != a.y > t.y && t.x < (a.x - n.x) * (t.y - n.y) / (a.y - n.y) + n.x && (e = !e); return e || zt.prototype._containsPoint.call(this, t, !0) } }); function ps(t, e) { return new ne(t, e) } var Rt = Mt.extend({ initialize: function (t, e) { E(this, e), this._layers = {}, t && this.addData(t) }, addData: function (t) { var e = P(t) ? t : t.features, i, n, a; if (e) { for (i = 0, n = e.length; i < n; i++)a = e[i], (a.geometries || a.geometry || a.features || a.coordinates) && this.addData(a); return this } var c = this.options; if (c.filter && !c.filter(t)) return this; var m = We(t, c); return m ? (m.feature = Ve(t), m.defaultOptions = m.options, this.resetStyle(m), c.onEachFeature && c.onEachFeature(t, m), this.addLayer(m)) : this }, resetStyle: function (t) { return t === void 0 ? this.eachLayer(this.resetStyle, this) : (t.options = u({}, t.defaultOptions), this._setLayerStyle(t, this.options.style), this) }, setStyle: function (t) { return this.eachLayer(function (e) { this._setLayerStyle(e, t) }, this) }, _setLayerStyle: function (t, e) { t.setStyle && (typeof e == "function" && (e = e(t.feature)), t.setStyle(e)) } }); function We(t, e) { var i = t.type === "Feature" ? t.geometry : t, n = i ? i.coordinates : null, a = [], c = e && e.pointToLayer, m = e && e.coordsToLatLng || Bi, v, w, k, z; if (!n && !i) return null; switch (i.type) { case "Point": return v = m(n), tr(c, t, v, e); case "MultiPoint": for (k = 0, z = n.length; k < z; k++)v = m(n[k]), a.push(tr(c, t, v, e)); return new Mt(a); case "LineString": case "MultiLineString": return w = He(n, i.type === "LineString" ? 0 : 1, m), new zt(w, e); case "Polygon": case "MultiPolygon": return w = He(n, i.type === "Polygon" ? 1 : 2, m), new ne(w, e); case "GeometryCollection": for (k = 0, z = i.geometries.length; k < z; k++) { var N = We({ geometry: i.geometries[k], type: "Feature", properties: t.properties }, e); N && a.push(N) } return new Mt(a); case "FeatureCollection": for (k = 0, z = i.features.length; k < z; k++) { var F = We(i.features[k], e); F && a.push(F) } return new Mt(a); default: throw new Error("Invalid GeoJSON object.") } } function tr(t, e, i, n) { return t ? t(e, i) : new Ze(i, n && n.markersInheritOptions && n) } function Bi(t) { return new K(t[1], t[0], t[2]) } function He(t, e, i) { for (var n = [], a = 0, c = t.length, m; a < c; a++)m = e ? He(t[a], e - 1, i) : (i || Bi)(t[a]), n.push(m); return n } function Di(t, e) { return t = W(t), t.alt !== void 0 ? [j(t.lng, e), j(t.lat, e), j(t.alt, e)] : [j(t.lng, e), j(t.lat, e)] } function Ue(t, e, i, n) { for (var a = [], c = 0, m = t.length; c < m; c++)a.push(e ? Ue(t[c], vt(t[c]) ? 0 : e - 1, i, n) : Di(t[c], n)); return !e && i && a.length > 0 && a.push(a[0].slice()), a } function re(t, e) { return t.feature ? u({}, t.feature, { geometry: e }) : Ve(e) } function Ve(t) { return t.type === "Feature" || t.type === "FeatureCollection" ? t : { type: "Feature", properties: {}, geometry: t } } var Zi = { toGeoJSON: function (t) { return re(this, { type: "Point", coordinates: Di(this.getLatLng(), t) }) } }; Ze.include(Zi), Oi.include(Zi), Fe.include(Zi), zt.include({ toGeoJSON: function (t) { var e = !vt(this._latlngs), i = Ue(this._latlngs, e ? 1 : 0, !1, t); return re(this, { type: (e ? "Multi" : "") + "LineString", coordinates: i }) } }), ne.include({ toGeoJSON: function (t) { var e = !vt(this._latlngs), i = e && !vt(this._latlngs[0]), n = Ue(this._latlngs, i ? 2 : e ? 1 : 0, !0, t); return e || (n = [n]), re(this, { type: (i ? "Multi" : "") + "Polygon", coordinates: n }) } }), ee.include({ toMultiPoint: function (t) { var e = []; return this.eachLayer(function (i) { e.push(i.toGeoJSON(t).geometry.coordinates) }), re(this, { type: "MultiPoint", coordinates: e }) }, toGeoJSON: function (t) { var e = this.feature && this.feature.geometry && this.feature.geometry.type; if (e === "MultiPoint") return this.toMultiPoint(t); var i = e === "GeometryCollection", n = []; return this.eachLayer(function (a) { if (a.toGeoJSON) { var c = a.toGeoJSON(t); if (i) n.push(c.geometry); else { var m = Ve(c); m.type === "FeatureCollection" ? n.push.apply(n, m.features) : n.push(m) } } }), i ? re(this, { geometries: n, type: "GeometryCollection" }) : { type: "FeatureCollection", features: n } } }); function er(t, e) { return new Rt(t, e) } var gs = er, qe = Lt.extend({ options: { opacity: 1, alt: "", interactive: !1, crossOrigin: !1, errorOverlayUrl: "", zIndex: 1, className: "" }, initialize: function (t, e, i) { this._url = t, this._bounds = et(e), E(this, i) }, onAdd: function () { this._image || (this._initImage(), this.options.opacity < 1 && this._updateOpacity()), this.options.interactive && (Z(this._image, "leaflet-interactive"), this.addInteractiveTarget(this._image)), this.getPane().appendChild(this._image), this._reset() }, onRemove: function () { X(this._image), this.options.interactive && this.removeInteractiveTarget(this._image) }, setOpacity: function (t) { return this.options.opacity = t, this._image && this._updateOpacity(), this }, setStyle: function (t) { return t.opacity && this.setOpacity(t.opacity), this }, bringToFront: function () { return this._map && Qt(this._image), this }, bringToBack: function () { return this._map && te(this._image), this }, setUrl: function (t) { return this._url = t, this._image && (this._image.src = t), this }, setBounds: function (t) { return this._bounds = et(t), this._map && this._reset(), this }, getEvents: function () { var t = { zoom: this._reset, viewreset: this._reset }; return this._zoomAnimated && (t.zoomanim = this._animateZoom), t }, setZIndex: function (t) { return this.options.zIndex = t, this._updateZIndex(), this }, getBounds: function () { return this._bounds }, getElement: function () { return this._image }, _initImage: function () { var t = this._url.tagName === "IMG", e = this._image = t ? this._url : V("img"); if (Z(e, "leaflet-image-layer"), this._zoomAnimated && Z(e, "leaflet-zoom-animated"), this.options.className && Z(e, this.options.className), e.onselectstart = x, e.onmousemove = x, e.onload = f(this.fire, this, "load"), e.onerror = f(this._overlayOnError, this, "error"), (this.options.crossOrigin || this.options.crossOrigin === "") && (e.crossOrigin = this.options.crossOrigin === !0 ? "" : this.options.crossOrigin), this.options.zIndex && this._updateZIndex(), t) { this._url = e.src; return } e.src = this._url, e.alt = this.options.alt }, _animateZoom: function (t) { var e = this._map.getZoomScale(t.zoom), i = this._map._latLngBoundsToNewLayerBounds(this._bounds, t.zoom, t.center).min; Vt(this._image, i, e) }, _reset: function () { var t = this._image, e = new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()), this._map.latLngToLayerPoint(this._bounds.getSouthEast())), i = e.getSize(); it(t, e.min), t.style.width = i.x + "px", t.style.height = i.y + "px" }, _updateOpacity: function () { _t(this._image, this.options.opacity) }, _updateZIndex: function () { this._image && this.options.zIndex !== void 0 && this.options.zIndex !== null && (this._image.style.zIndex = this.options.zIndex) }, _overlayOnError: function () { this.fire("error"); var t = this.options.errorOverlayUrl; t && this._url !== t && (this._url = t, this._image.src = t) }, getCenter: function () { return this._bounds.getCenter() } }), _s = function (t, e, i) { return new qe(t, e, i) }, ir = qe.extend({ options: { autoplay: !0, loop: !0, keepAspectRatio: !0, muted: !1, playsInline: !0 }, _initImage: function () { var t = this._url.tagName === "VIDEO", e = this._image = t ? this._url : V("video"); if (Z(e, "leaflet-image-layer"), this._zoomAnimated && Z(e, "leaflet-zoom-animated"), this.options.className && Z(e, this.options.className), e.onselectstart = x, e.onmousemove = x, e.onloadeddata = f(this.fire, this, "load"), t) { for (var i = e.getElementsByTagName("source"), n = [], a = 0; a < i.length; a++)n.push(i[a].src); this._url = i.length > 0 ? n : [e.src]; return } P(this._url) || (this._url = [this._url]), !this.options.keepAspectRatio && Object.prototype.hasOwnProperty.call(e.style, "objectFit") && (e.style.objectFit = "fill"), e.autoplay = !!this.options.autoplay, e.loop = !!this.options.loop, e.muted = !!this.options.muted, e.playsInline = !!this.options.playsInline; for (var c = 0; c < this._url.length; c++) { var m = V("source"); m.src = this._url[c], e.appendChild(m) } } }); function vs(t, e, i) { return new ir(t, e, i) } var nr = qe.extend({ _initImage: function () { var t = this._image = this._url; Z(t, "leaflet-image-layer"), this._zoomAnimated && Z(t, "leaflet-zoom-animated"), this.options.className && Z(t, this.options.className), t.onselectstart = x, t.onmousemove = x } }); function ys(t, e, i) { return new nr(t, e, i) } var Tt = Lt.extend({ options: { interactive: !1, offset: [0, 0], className: "", pane: void 0, content: "" }, initialize: function (t, e) { t && (t instanceof K || P(t)) ? (this._latlng = W(t), E(this, e)) : (E(this, t), this._source = e), this.options.content && (this._content = this.options.content) }, openOn: function (t) { return t = arguments.length ? t : this._source._map, t.hasLayer(this) || t.addLayer(this), this }, close: function () { return this._map && this._map.removeLayer(this), this }, toggle: function (t) { return this._map ? this.close() : (arguments.length ? this._source = t : t = this._source, this._prepareOpen(), this.openOn(t._map)), this }, onAdd: function (t) { this._zoomAnimated = t._zoomAnimated, this._container || this._initLayout(), t._fadeAnimated && _t(this._container, 0), clearTimeout(this._removeTimeout), this.getPane().appendChild(this._container), this.update(), t._fadeAnimated && _t(this._container, 1), this.bringToFront(), this.options.interactive && (Z(this._container, "leaflet-interactive"), this.addInteractiveTarget(this._container)) }, onRemove: function (t) { t._fadeAnimated ? (_t(this._container, 0), this._removeTimeout = setTimeout(f(X, void 0, this._container), 200)) : X(this._container), this.options.interactive && (Q(this._container, "leaflet-interactive"), this.removeInteractiveTarget(this._container)) }, getLatLng: function () { return this._latlng }, setLatLng: function (t) { return this._latlng = W(t), this._map && (this._updatePosition(), this._adjustPan()), this }, getContent: function () { return this._content }, setContent: function (t) { return this._content = t, this.update(), this }, getElement: function () { return this._container }, update: function () { this._map && (this._container.style.visibility = "hidden", this._updateContent(), this._updateLayout(), this._updatePosition(), this._container.style.visibility = "", this._adjustPan()) }, getEvents: function () { var t = { zoom: this._updatePosition, viewreset: this._updatePosition }; return this._zoomAnimated && (t.zoomanim = this._animateZoom), t }, isOpen: function () { return !!this._map && this._map.hasLayer(this) }, bringToFront: function () { return this._map && Qt(this._container), this }, bringToBack: function () { return this._map && te(this._container), this }, _prepareOpen: function (t) { var e = this._source; if (!e._map) return !1; if (e instanceof Mt) { e = null; var i = this._source._layers; for (var n in i) if (i[n]._map) { e = i[n]; break } if (!e) return !1; this._source = e } if (!t) if (e.getCenter) t = e.getCenter(); else if (e.getLatLng) t = e.getLatLng(); else if (e.getBounds) t = e.getBounds().getCenter(); else throw new Error("Unable to get source layer LatLng."); return this.setLatLng(t), this._map && this.update(), !0 }, _updateContent: function () { if (this._content) { var t = this._contentNode, e = typeof this._content == "function" ? this._content(this._source || this) : this._content; if (typeof e == "string") t.innerHTML = e; else { for (; t.hasChildNodes();)t.removeChild(t.firstChild); t.appendChild(e) } this.fire("contentupdate") } }, _updatePosition: function () { if (this._map) { var t = this._map.latLngToLayerPoint(this._latlng), e = O(this.options.offset), i = this._getAnchor(); this._zoomAnimated ? it(this._container, t.add(i)) : e = e.add(t).add(i); var n = this._containerBottom = -e.y, a = this._containerLeft = -Math.round(this._containerWidth / 2) + e.x; this._container.style.bottom = n + "px", this._container.style.left = a + "px" } }, _getAnchor: function () { return [0, 0] } }); H.include({ _initOverlay: function (t, e, i, n) { var a = e; return a instanceof t || (a = new t(n).setContent(e)), i && a.setLatLng(i), a } }), Lt.include({ _initOverlay: function (t, e, i, n) { var a = i; return a instanceof t ? (E(a, n), a._source = this) : (a = e && !n ? e : new t(n, this), a.setContent(i)), a } }); var Ge = Tt.extend({ options: { pane: "popupPane", offset: [0, 7], maxWidth: 300, minWidth: 50, maxHeight: null, autoPan: !0, autoPanPaddingTopLeft: null, autoPanPaddingBottomRight: null, autoPanPadding: [5, 5], keepInView: !1, closeButton: !0, autoClose: !0, closeOnEscapeKey: !0, className: "" }, openOn: function (t) { return t = arguments.length ? t : this._source._map, !t.hasLayer(this) && t._popup && t._popup.options.autoClose && t.removeLayer(t._popup), t._popup = this, Tt.prototype.openOn.call(this, t) }, onAdd: function (t) { Tt.prototype.onAdd.call(this, t), t.fire("popupopen", { popup: this }), this._source && (this._source.fire("popupopen", { popup: this }, !0), this._source instanceof Wt || this._source.on("preclick", Gt)) }, onRemove: function (t) { Tt.prototype.onRemove.call(this, t), t.fire("popupclose", { popup: this }), this._source && (this._source.fire("popupclose", { popup: this }, !0), this._source instanceof Wt || this._source.off("preclick", Gt)) }, getEvents: function () { var t = Tt.prototype.getEvents.call(this); return (this.options.closeOnClick !== void 0 ? this.options.closeOnClick : this._map.options.closePopupOnClick) && (t.preclick = this.close), this.options.keepInView && (t.moveend = this._adjustPan), t }, _initLayout: function () { var t = "leaflet-popup", e = this._container = V("div", t + " " + (this.options.className || "") + " leaflet-zoom-animated"), i = this._wrapper = V("div", t + "-content-wrapper", e); if (this._contentNode = V("div", t + "-content", i), ve(e), Ei(this._contentNode), D(e, "contextmenu", Gt), this._tipContainer = V("div", t + "-tip-container", e), this._tip = V("div", t + "-tip", this._tipContainer), this.options.closeButton) { var n = this._closeButton = V("a", t + "-close-button", e); n.setAttribute("role", "button"), n.setAttribute("aria-label", "Close popup"), n.href = "#close", n.innerHTML = '<span aria-hidden="true">&#215;</span>', D(n, "click", function (a) { st(a), this.close() }, this) } }, _updateLayout: function () { var t = this._contentNode, e = t.style; e.width = "", e.whiteSpace = "nowrap"; var i = t.offsetWidth; i = Math.min(i, this.options.maxWidth), i = Math.max(i, this.options.minWidth), e.width = i + 1 + "px", e.whiteSpace = "", e.height = ""; var n = t.offsetHeight, a = this.options.maxHeight, c = "leaflet-popup-scrolled"; a && n > a ? (e.height = a + "px", Z(t, c)) : Q(t, c), this._containerWidth = this._container.offsetWidth }, _animateZoom: function (t) { var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center), i = this._getAnchor(); it(this._container, e.add(i)) }, _adjustPan: function () { if (this.options.autoPan) { if (this._map._panAnim && this._map._panAnim.stop(), this._autopanning) { this._autopanning = !1; return } var t = this._map, e = parseInt(me(this._container, "marginBottom"), 10) || 0, i = this._container.offsetHeight + e, n = this._containerWidth, a = new B(this._containerLeft, -i - this._containerBottom); a._add(qt(this._container)); var c = t.layerPointToContainerPoint(a), m = O(this.options.autoPanPadding), v = O(this.options.autoPanPaddingTopLeft || m), w = O(this.options.autoPanPaddingBottomRight || m), k = t.getSize(), z = 0, N = 0; c.x + n + w.x > k.x && (z = c.x + n - k.x + w.x), c.x - z - v.x < 0 && (z = c.x - v.x), c.y + i + w.y > k.y && (N = c.y + i - k.y + w.y), c.y - N - v.y < 0 && (N = c.y - v.y), (z || N) && (this.options.keepInView && (this._autopanning = !0), t.fire("autopanstart").panBy([z, N])) } }, _getAnchor: function () { return O(this._source && this._source._getPopupAnchor ? this._source._getPopupAnchor() : [0, 0]) } }), xs = function (t, e) { return new Ge(t, e) }; H.mergeOptions({ closePopupOnClick: !0 }), H.include({ openPopup: function (t, e, i) { return this._initOverlay(Ge, t, e, i).openOn(this), this }, closePopup: function (t) { return t = arguments.length ? t : this._popup, t && t.close(), this } }), Lt.include({ bindPopup: function (t, e) { return this._popup = this._initOverlay(Ge, this._popup, t, e), this._popupHandlersAdded || (this.on({ click: this._openPopup, keypress: this._onKeyPress, remove: this.closePopup, move: this._movePopup }), this._popupHandlersAdded = !0), this }, unbindPopup: function () { return this._popup && (this.off({ click: this._openPopup, keypress: this._onKeyPress, remove: this.closePopup, move: this._movePopup }), this._popupHandlersAdded = !1, this._popup = null), this }, openPopup: function (t) { return this._popup && (this instanceof Mt || (this._popup._source = this), this._popup._prepareOpen(t || this._latlng) && this._popup.openOn(this._map)), this }, closePopup: function () { return this._popup && this._popup.close(), this }, togglePopup: function () { return this._popup && this._popup.toggle(this), this }, isPopupOpen: function () { return this._popup ? this._popup.isOpen() : !1 }, setPopupContent: function (t) { return this._popup && this._popup.setContent(t), this }, getPopup: function () { return this._popup }, _openPopup: function (t) { if (!(!this._popup || !this._map)) { Kt(t); var e = t.layer || t.target; if (this._popup._source === e && !(e instanceof Wt)) { this._map.hasLayer(this._popup) ? this.closePopup() : this.openPopup(t.latlng); return } this._popup._source = e, this.openPopup(t.latlng) } }, _movePopup: function (t) { this._popup.setLatLng(t.latlng) }, _onKeyPress: function (t) { t.originalEvent.keyCode === 13 && this._openPopup(t) } }); var Ke = Tt.extend({ options: { pane: "tooltipPane", offset: [0, 0], direction: "auto", permanent: !1, sticky: !1, opacity: .9 }, onAdd: function (t) { Tt.prototype.onAdd.call(this, t), this.setOpacity(this.options.opacity), t.fire("tooltipopen", { tooltip: this }), this._source && (this.addEventParent(this._source), this._source.fire("tooltipopen", { tooltip: this }, !0)) }, onRemove: function (t) { Tt.prototype.onRemove.call(this, t), t.fire("tooltipclose", { tooltip: this }), this._source && (this.removeEventParent(this._source), this._source.fire("tooltipclose", { tooltip: this }, !0)) }, getEvents: function () { var t = Tt.prototype.getEvents.call(this); return this.options.permanent || (t.preclick = this.close), t }, _initLayout: function () { var t = "leaflet-tooltip", e = t + " " + (this.options.className || "") + " leaflet-zoom-" + (this._zoomAnimated ? "animated" : "hide"); this._contentNode = this._container = V("div", e), this._container.setAttribute("role", "tooltip"), this._container.setAttribute("id", "leaflet-tooltip-" + p(this)) }, _updateLayout: function () { }, _adjustPan: function () { }, _setPosition: function (t) { var e, i, n = this._map, a = this._container, c = n.latLngToContainerPoint(n.getCenter()), m = n.layerPointToContainerPoint(t), v = this.options.direction, w = a.offsetWidth, k = a.offsetHeight, z = O(this.options.offset), N = this._getAnchor(); v === "top" ? (e = w / 2, i = k) : v === "bottom" ? (e = w / 2, i = 0) : v === "center" ? (e = w / 2, i = k / 2) : v === "right" ? (e = 0, i = k / 2) : v === "left" ? (e = w, i = k / 2) : m.x < c.x ? (v = "right", e = 0, i = k / 2) : (v = "left", e = w + (z.x + N.x) * 2, i = k / 2), t = t.subtract(O(e, i, !0)).add(z).add(N), Q(a, "leaflet-tooltip-right"), Q(a, "leaflet-tooltip-left"), Q(a, "leaflet-tooltip-top"), Q(a, "leaflet-tooltip-bottom"), Z(a, "leaflet-tooltip-" + v), it(a, t) }, _updatePosition: function () { var t = this._map.latLngToLayerPoint(this._latlng); this._setPosition(t) }, setOpacity: function (t) { this.options.opacity = t, this._container && _t(this._container, t) }, _animateZoom: function (t) { var e = this._map._latLngToNewLayerPoint(this._latlng, t.zoom, t.center); this._setPosition(e) }, _getAnchor: function () { return O(this._source && this._source._getTooltipAnchor && !this.options.sticky ? this._source._getTooltipAnchor() : [0, 0]) } }), ws = function (t, e) { return new Ke(t, e) }; H.include({ openTooltip: function (t, e, i) { return this._initOverlay(Ke, t, e, i).openOn(this), this }, closeTooltip: function (t) { return t.close(), this } }), Lt.include({ bindTooltip: function (t, e) { return this._tooltip && this.isTooltipOpen() && this.unbindTooltip(), this._tooltip = this._initOverlay(Ke, this._tooltip, t, e), this._initTooltipInteractions(), this._tooltip.options.permanent && this._map && this._map.hasLayer(this) && this.openTooltip(), this }, unbindTooltip: function () { return this._tooltip && (this._initTooltipInteractions(!0), this.closeTooltip(), this._tooltip = null), this }, _initTooltipInteractions: function (t) { if (!(!t && this._tooltipHandlersAdded)) { var e = t ? "off" : "on", i = { remove: this.closeTooltip, move: this._moveTooltip }; this._tooltip.options.permanent ? i.add = this._openTooltip : (i.mouseover = this._openTooltip, i.mouseout = this.closeTooltip, i.click = this._openTooltip, this._map ? this._addFocusListeners() : i.add = this._addFocusListeners), this._tooltip.options.sticky && (i.mousemove = this._moveTooltip), this[e](i), this._tooltipHandlersAdded = !t } }, openTooltip: function (t) { return this._tooltip && (this instanceof Mt || (this._tooltip._source = this), this._tooltip._prepareOpen(t) && (this._tooltip.openOn(this._map), this.getElement ? this._setAriaDescribedByOnLayer(this) : this.eachLayer && this.eachLayer(this._setAriaDescribedByOnLayer, this))), this }, closeTooltip: function () { if (this._tooltip) return this._tooltip.close() }, toggleTooltip: function () { return this._tooltip && this._tooltip.toggle(this), this }, isTooltipOpen: function () { return this._tooltip.isOpen() }, setTooltipContent: function (t) { return this._tooltip && this._tooltip.setContent(t), this }, getTooltip: function () { return this._tooltip }, _addFocusListeners: function () { this.getElement ? this._addFocusListenersOnLayer(this) : this.eachLayer && this.eachLayer(this._addFocusListenersOnLayer, this) }, _addFocusListenersOnLayer: function (t) { var e = typeof t.getElement == "function" && t.getElement(); e && (D(e, "focus", function () { this._tooltip._source = t, this.openTooltip() }, this), D(e, "blur", this.closeTooltip, this)) }, _setAriaDescribedByOnLayer: function (t) { var e = typeof t.getElement == "function" && t.getElement(); e && e.setAttribute("aria-describedby", this._tooltip._container.id) }, _openTooltip: function (t) { if (!(!this._tooltip || !this._map)) { if (this._map.dragging && this._map.dragging.moving() && !this._openOnceFlag) { this._openOnceFlag = !0; var e = this; this._map.once("moveend", function () { e._openOnceFlag = !1, e._openTooltip(t) }); return } this._tooltip._source = t.layer || t.target, this.openTooltip(this._tooltip.options.sticky ? t.latlng : void 0) } }, _moveTooltip: function (t) { var e = t.latlng, i, n; this._tooltip.options.sticky && t.originalEvent && (i = this._map.mouseEventToContainerPoint(t.originalEvent), n = this._map.containerPointToLayerPoint(i), e = this._map.layerPointToLatLng(n)), this._tooltip.setLatLng(e) } }); var rr = ie.extend({ options: { iconSize: [12, 12], html: !1, bgPos: null, className: "leaflet-div-icon" }, createIcon: function (t) { var e = t && t.tagName === "DIV" ? t : document.createElement("div"), i = this.options; if (i.html instanceof Element ? (Re(e), e.appendChild(i.html)) : e.innerHTML = i.html !== !1 ? i.html : "", i.bgPos) { var n = O(i.bgPos); e.style.backgroundPosition = -n.x + "px " + -n.y + "px" } return this._setIconStyles(e, "icon"), e }, createShadow: function () { return null } }); function bs(t) { return new rr(t) } ie.Default = we; var be = Lt.extend({ options: { tileSize: 256, opacity: 1, updateWhenIdle: I.mobile, updateWhenZooming: !0, updateInterval: 200, zIndex: 1, bounds: null, minZoom: 0, maxZoom: void 0, maxNativeZoom: void 0, minNativeZoom: void 0, noWrap: !1, pane: "tilePane", className: "", keepBuffer: 2 }, initialize: function (t) { E(this, t) }, onAdd: function () { this._initContainer(), this._levels = {}, this._tiles = {}, this._resetView() }, beforeAdd: function (t) { t._addZoomLimit(this) }, onRemove: function (t) { this._removeAllTiles(), X(this._container), t._removeZoomLimit(this), this._container = null, this._tileZoom = void 0 }, bringToFront: function () { return this._map && (Qt(this._container), this._setAutoZIndex(Math.max)), this }, bringToBack: function () { return this._map && (te(this._container), this._setAutoZIndex(Math.min)), this }, getContainer: function () { return this._container }, setOpacity: function (t) { return this.options.opacity = t, this._updateOpacity(), this }, setZIndex: function (t) { return this.options.zIndex = t, this._updateZIndex(), this }, isLoading: function () { return this._loading }, redraw: function () { if (this._map) { this._removeAllTiles(); var t = this._clampZoom(this._map.getZoom()); t !== this._tileZoom && (this._tileZoom = t, this._updateLevels()), this._update() } return this }, getEvents: function () { var t = { viewprereset: this._invalidateAll, viewreset: this._resetView, zoom: this._resetView, moveend: this._onMoveEnd }; return this.options.updateWhenIdle || (this._onMove || (this._onMove = S(this._onMoveEnd, this.options.updateInterval, this)), t.move = this._onMove), this._zoomAnimated && (t.zoomanim = this._animateZoom), t }, createTile: function () { return document.createElement("div") }, getTileSize: function () { var t = this.options.tileSize; return t instanceof B ? t : new B(t, t) }, _updateZIndex: function () { this._container && this.options.zIndex !== void 0 && this.options.zIndex !== null && (this._container.style.zIndex = this.options.zIndex) }, _setAutoZIndex: function (t) { for (var e = this.getPane().children, i = -t(-1 / 0, 1 / 0), n = 0, a = e.length, c; n < a; n++)c = e[n].style.zIndex, e[n] !== this._container && c && (i = t(i, +c)); isFinite(i) && (this.options.zIndex = i + t(-1, 1), this._updateZIndex()) }, _updateOpacity: function () { if (this._map && !I.ielt9) { _t(this._container, this.options.opacity); var t = +new Date, e = !1, i = !1; for (var n in this._tiles) { var a = this._tiles[n]; if (!(!a.current || !a.loaded)) { var c = Math.min(1, (t - a.loaded) / 200); _t(a.el, c), c < 1 ? e = !0 : (a.active ? i = !0 : this._onOpaqueTile(a), a.active = !0) } } i && !this._noPrune && this._pruneTiles(), e && (gt(this._fadeFrame), this._fadeFrame = ct(this._updateOpacity, this)) } }, _onOpaqueTile: x, _initContainer: function () { this._container || (this._container = V("div", "leaflet-layer " + (this.options.className || "")), this._updateZIndex(), this.options.opacity < 1 && this._updateOpacity(), this.getPane().appendChild(this._container)) }, _updateLevels: function () { var t = this._tileZoom, e = this.options.maxZoom; if (t !== void 0) { for (var i in this._levels) i = Number(i), this._levels[i].el.children.length || i === t ? (this._levels[i].el.style.zIndex = e - Math.abs(t - i), this._onUpdateLevel(i)) : (X(this._levels[i].el), this._removeTilesAtZoom(i), this._onRemoveLevel(i), delete this._levels[i]); var n = this._levels[t], a = this._map; return n || (n = this._levels[t] = {}, n.el = V("div", "leaflet-tile-container leaflet-zoom-animated", this._container), n.el.style.zIndex = e, n.origin = a.project(a.unproject(a.getPixelOrigin()), t).round(), n.zoom = t, this._setZoomTransform(n, a.getCenter(), a.getZoom()), x(n.el.offsetWidth), this._onCreateLevel(n)), this._level = n, n } }, _onUpdateLevel: x, _onRemoveLevel: x, _onCreateLevel: x, _pruneTiles: function () { if (this._map) { var t, e, i = this._map.getZoom(); if (i > this.options.maxZoom || i < this.options.minZoom) { this._removeAllTiles(); return } for (t in this._tiles) e = this._tiles[t], e.retain = e.current; for (t in this._tiles) if (e = this._tiles[t], e.current && !e.active) { var n = e.coords; this._retainParent(n.x, n.y, n.z, n.z - 5) || this._retainChildren(n.x, n.y, n.z, n.z + 2) } for (t in this._tiles) this._tiles[t].retain || this._removeTile(t) } }, _removeTilesAtZoom: function (t) { for (var e in this._tiles) this._tiles[e].coords.z === t && this._removeTile(e) }, _removeAllTiles: function () { for (var t in this._tiles) this._removeTile(t) }, _invalidateAll: function () { for (var t in this._levels) X(this._levels[t].el), this._onRemoveLevel(Number(t)), delete this._levels[t]; this._removeAllTiles(), this._tileZoom = void 0 }, _retainParent: function (t, e, i, n) { var a = Math.floor(t / 2), c = Math.floor(e / 2), m = i - 1, v = new B(+a, +c); v.z = +m; var w = this._tileCoordsToKey(v), k = this._tiles[w]; return k && k.active ? (k.retain = !0, !0) : (k && k.loaded && (k.retain = !0), m > n ? this._retainParent(a, c, m, n) : !1) }, _retainChildren: function (t, e, i, n) { for (var a = 2 * t; a < 2 * t + 2; a++)for (var c = 2 * e; c < 2 * e + 2; c++) { var m = new B(a, c); m.z = i + 1; var v = this._tileCoordsToKey(m), w = this._tiles[v]; if (w && w.active) { w.retain = !0; continue } else w && w.loaded && (w.retain = !0); i + 1 < n && this._retainChildren(a, c, i + 1, n) } }, _resetView: function (t) { var e = t && (t.pinch || t.flyTo); this._setView(this._map.getCenter(), this._map.getZoom(), e, e) }, _animateZoom: function (t) { this._setView(t.center, t.zoom, !0, t.noUpdate) }, _clampZoom: function (t) { var e = this.options; return e.minNativeZoom !== void 0 && t < e.minNativeZoom ? e.minNativeZoom : e.maxNativeZoom !== void 0 && e.maxNativeZoom < t ? e.maxNativeZoom : t }, _setView: function (t, e, i, n) { var a = Math.round(e); this.options.maxZoom !== void 0 && a > this.options.maxZoom || this.options.minZoom !== void 0 && a < this.options.minZoom ? a = void 0 : a = this._clampZoom(a); var c = this.options.updateWhenZooming && a !== this._tileZoom; (!n || c) && (this._tileZoom = a, this._abortLoading && this._abortLoading(), this._updateLevels(), this._resetGrid(), a !== void 0 && this._update(t), i || this._pruneTiles(), this._noPrune = !!i), this._setZoomTransforms(t, e) }, _setZoomTransforms: function (t, e) { for (var i in this._levels) this._setZoomTransform(this._levels[i], t, e) }, _setZoomTransform: function (t, e, i) { var n = this._map.getZoomScale(i, t.zoom), a = t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e, i)).round(); I.any3d ? Vt(t.el, a, n) : it(t.el, a) }, _resetGrid: function () { var t = this._map, e = t.options.crs, i = this._tileSize = this.getTileSize(), n = this._tileZoom, a = this._map.getPixelWorldBounds(this._tileZoom); a && (this._globalTileRange = this._pxBoundsToTileRange(a)), this._wrapX = e.wrapLng && !this.options.noWrap && [Math.floor(t.project([0, e.wrapLng[0]], n).x / i.x), Math.ceil(t.project([0, e.wrapLng[1]], n).x / i.y)], this._wrapY = e.wrapLat && !this.options.noWrap && [Math.floor(t.project([e.wrapLat[0], 0], n).y / i.x), Math.ceil(t.project([e.wrapLat[1], 0], n).y / i.y)] }, _onMoveEnd: function () { !this._map || this._map._animatingZoom || this._update() }, _getTiledPixelBounds: function (t) { var e = this._map, i = e._animatingZoom ? Math.max(e._animateToZoom, e.getZoom()) : e.getZoom(), n = e.getZoomScale(i, this._tileZoom), a = e.project(t, this._tileZoom).floor(), c = e.getSize().divideBy(n * 2); return new J(a.subtract(c), a.add(c)) }, _update: function (t) { var e = this._map; if (e) { var i = this._clampZoom(e.getZoom()); if (t === void 0 && (t = e.getCenter()), this._tileZoom !== void 0) { var n = this._getTiledPixelBounds(t), a = this._pxBoundsToTileRange(n), c = a.getCenter(), m = [], v = this.options.keepBuffer, w = new J(a.getBottomLeft().subtract([v, -v]), a.getTopRight().add([v, -v])); if (!(isFinite(a.min.x) && isFinite(a.min.y) && isFinite(a.max.x) && isFinite(a.max.y))) throw new Error("Attempted to load an infinite number of tiles"); for (var k in this._tiles) { var z = this._tiles[k].coords; (z.z !== this._tileZoom || !w.contains(new B(z.x, z.y))) && (this._tiles[k].current = !1) } if (Math.abs(i - this._tileZoom) > 1) { this._setView(t, i); return } for (var N = a.min.y; N <= a.max.y; N++)for (var F = a.min.x; F <= a.max.x; F++) { var lt = new B(F, N); if (lt.z = this._tileZoom, !!this._isValidTile(lt)) { var ot = this._tiles[this._tileCoordsToKey(lt)]; ot ? ot.current = !0 : m.push(lt) } } if (m.sort(function (dt, se) { return dt.distanceTo(c) - se.distanceTo(c) }), m.length !== 0) { this._loading || (this._loading = !0, this.fire("loading")); var yt = document.createDocumentFragment(); for (F = 0; F < m.length; F++)this._addTile(m[F], yt); this._level.el.appendChild(yt) } } } }, _isValidTile: function (t) { var e = this._map.options.crs; if (!e.infinite) { var i = this._globalTileRange; if (!e.wrapLng && (t.x < i.min.x || t.x > i.max.x) || !e.wrapLat && (t.y < i.min.y || t.y > i.max.y)) return !1 } if (!this.options.bounds) return !0; var n = this._tileCoordsToBounds(t); return et(this.options.bounds).overlaps(n) }, _keyToBounds: function (t) { return this._tileCoordsToBounds(this._keyToTileCoords(t)) }, _tileCoordsToNwSe: function (t) { var e = this._map, i = this.getTileSize(), n = t.scaleBy(i), a = n.add(i), c = e.unproject(n, t.z), m = e.unproject(a, t.z); return [c, m] }, _tileCoordsToBounds: function (t) { var e = this._tileCoordsToNwSe(t), i = new ut(e[0], e[1]); return this.options.noWrap || (i = this._map.wrapLatLngBounds(i)), i }, _tileCoordsToKey: function (t) { return t.x + ":" + t.y + ":" + t.z }, _keyToTileCoords: function (t) { var e = t.split(":"), i = new B(+e[0], +e[1]); return i.z = +e[2], i }, _removeTile: function (t) { var e = this._tiles[t]; e && (X(e.el), delete this._tiles[t], this.fire("tileunload", { tile: e.el, coords: this._keyToTileCoords(t) })) }, _initTile: function (t) { Z(t, "leaflet-tile"); var e = this.getTileSize(); t.style.width = e.x + "px", t.style.height = e.y + "px", t.onselectstart = x, t.onmousemove = x, I.ielt9 && this.options.opacity < 1 && _t(t, this.options.opacity) }, _addTile: function (t, e) { var i = this._getTilePos(t), n = this._tileCoordsToKey(t), a = this.createTile(this._wrapCoords(t), f(this._tileReady, this, t)); this._initTile(a), this.createTile.length < 2 && ct(f(this._tileReady, this, t, null, a)), it(a, i), this._tiles[n] = { el: a, coords: t, current: !0 }, e.appendChild(a), this.fire("tileloadstart", { tile: a, coords: t }) }, _tileReady: function (t, e, i) { e && this.fire("tileerror", { error: e, tile: i, coords: t }); var n = this._tileCoordsToKey(t); i = this._tiles[n], i && (i.loaded = +new Date, this._map._fadeAnimated ? (_t(i.el, 0), gt(this._fadeFrame), this._fadeFrame = ct(this._updateOpacity, this)) : (i.active = !0, this._pruneTiles()), e || (Z(i.el, "leaflet-tile-loaded"), this.fire("tileload", { tile: i.el, coords: t })), this._noTilesToLoad() && (this._loading = !1, this.fire("load"), I.ielt9 || !this._map._fadeAnimated ? ct(this._pruneTiles, this) : setTimeout(f(this._pruneTiles, this), 250))) }, _getTilePos: function (t) { return t.scaleBy(this.getTileSize()).subtract(this._level.origin) }, _wrapCoords: function (t) { var e = new B(this._wrapX ? b(t.x, this._wrapX) : t.x, this._wrapY ? b(t.y, this._wrapY) : t.y); return e.z = t.z, e }, _pxBoundsToTileRange: function (t) { var e = this.getTileSize(); return new J(t.min.unscaleBy(e).floor(), t.max.unscaleBy(e).ceil().subtract([1, 1])) }, _noTilesToLoad: function () { for (var t in this._tiles) if (!this._tiles[t].loaded) return !1; return !0 } }); function Ss(t) { return new be(t) } var oe = be.extend({ options: { minZoom: 0, maxZoom: 18, subdomains: "abc", errorTileUrl: "", zoomOffset: 0, tms: !1, zoomReverse: !1, detectRetina: !1, crossOrigin: !1, referrerPolicy: !1 }, initialize: function (t, e) { this._url = t, e = E(this, e), e.detectRetina && I.retina && e.maxZoom > 0 ? (e.tileSize = Math.floor(e.tileSize / 2), e.zoomReverse ? (e.zoomOffset--, e.minZoom = Math.min(e.maxZoom, e.minZoom + 1)) : (e.zoomOffset++, e.maxZoom = Math.max(e.minZoom, e.maxZoom - 1)), e.minZoom = Math.max(0, e.minZoom)) : e.zoomReverse ? e.minZoom = Math.min(e.maxZoom, e.minZoom) : e.maxZoom = Math.max(e.minZoom, e.maxZoom), typeof e.subdomains == "string" && (e.subdomains = e.subdomains.split("")), this.on("tileunload", this._onTileRemove) }, setUrl: function (t, e) { return this._url === t && e === void 0 && (e = !0), this._url = t, e || this.redraw(), this }, createTile: function (t, e) { var i = document.createElement("img"); return D(i, "load", f(this._tileOnLoad, this, e, i)), D(i, "error", f(this._tileOnError, this, e, i)), (this.options.crossOrigin || this.options.crossOrigin === "") && (i.crossOrigin = this.options.crossOrigin === !0 ? "" : this.options.crossOrigin), typeof this.options.referrerPolicy == "string" && (i.referrerPolicy = this.options.referrerPolicy), i.alt = "", i.src = this.getTileUrl(t), i }, getTileUrl: function (t) { var e = { r: I.retina ? "@2x" : "", s: this._getSubdomain(t), x: t.x, y: t.y, z: this._getZoomForUrl() }; if (this._map && !this._map.options.crs.infinite) { var i = this._globalTileRange.max.y - t.y; this.options.tms && (e.y = i), e["-y"] = i } return _(this._url, u(e, this.options)) }, _tileOnLoad: function (t, e) { I.ielt9 ? setTimeout(f(t, this, null, e), 0) : t(null, e) }, _tileOnError: function (t, e, i) { var n = this.options.errorTileUrl; n && e.getAttribute("src") !== n && (e.src = n), t(i, e) }, _onTileRemove: function (t) { t.tile.onload = null }, _getZoomForUrl: function () { var t = this._tileZoom, e = this.options.maxZoom, i = this.options.zoomReverse, n = this.options.zoomOffset; return i && (t = e - t), t + n }, _getSubdomain: function (t) { var e = Math.abs(t.x + t.y) % this.options.subdomains.length; return this.options.subdomains[e] }, _abortLoading: function () { var t, e; for (t in this._tiles) if (this._tiles[t].coords.z !== this._tileZoom && (e = this._tiles[t].el, e.onload = x, e.onerror = x, !e.complete)) { e.src = G; var i = this._tiles[t].coords; X(e), delete this._tiles[t], this.fire("tileabort", { tile: e, coords: i }) } }, _removeTile: function (t) { var e = this._tiles[t]; if (e) return e.el.setAttribute("src", G), be.prototype._removeTile.call(this, t) }, _tileReady: function (t, e, i) { if (!(!this._map || i && i.getAttribute("src") === G)) return be.prototype._tileReady.call(this, t, e, i) } }); function or(t, e) { return new oe(t, e) } var sr = oe.extend({ defaultWmsParams: { service: "WMS", request: "GetMap", layers: "", styles: "", format: "image/jpeg", transparent: !1, version: "1.1.1" }, options: { crs: null, uppercase: !1 }, initialize: function (t, e) { this._url = t; var i = u({}, this.defaultWmsParams); for (var n in e) n in this.options || (i[n] = e[n]); e = E(this, e); var a = e.detectRetina && I.retina ? 2 : 1, c = this.getTileSize(); i.width = c.x * a, i.height = c.y * a, this.wmsParams = i }, onAdd: function (t) { this._crs = this.options.crs || t.options.crs, this._wmsVersion = parseFloat(this.wmsParams.version); var e = this._wmsVersion >= 1.3 ? "crs" : "srs"; this.wmsParams[e] = this._crs.code, oe.prototype.onAdd.call(this, t) }, getTileUrl: function (t) { var e = this._tileCoordsToNwSe(t), i = this._crs, n = ht(i.project(e[0]), i.project(e[1])), a = n.min, c = n.max, m = (this._wmsVersion >= 1.3 && this._crs === Xn ? [a.y, a.x, c.y, c.x] : [a.x, a.y, c.x, c.y]).join(","), v = oe.prototype.getTileUrl.call(this, t); return v + M(this.wmsParams, v, this.options.uppercase) + (this.options.uppercase ? "&BBOX=" : "&bbox=") + m }, setParams: function (t, e) { return u(this.wmsParams, t), e || this.redraw(), this } }); function Ls(t, e) { return new sr(t, e) } oe.WMS = sr, or.wms = Ls; var It = Lt.extend({ options: { padding: .1 }, initialize: function (t) { E(this, t), p(this), this._layers = this._layers || {} }, onAdd: function () { this._container || (this._initContainer(), Z(this._container, "leaflet-zoom-animated")), this.getPane().appendChild(this._container), this._update(), this.on("update", this._updatePaths, this) }, onRemove: function () { this.off("update", this._updatePaths, this), this._destroyContainer() }, getEvents: function () { var t = { viewreset: this._reset, zoom: this._onZoom, moveend: this._update, zoomend: this._onZoomEnd }; return this._zoomAnimated && (t.zoomanim = this._onAnimZoom), t }, _onAnimZoom: function (t) { this._updateTransform(t.center, t.zoom) }, _onZoom: function () { this._updateTransform(this._map.getCenter(), this._map.getZoom()) }, _updateTransform: function (t, e) { var i = this._map.getZoomScale(e, this._zoom), n = this._map.getSize().multiplyBy(.5 + this.options.padding), a = this._map.project(this._center, e), c = n.multiplyBy(-i).add(a).subtract(this._map._getNewPixelOrigin(t, e)); I.any3d ? Vt(this._container, c, i) : it(this._container, c) }, _reset: function () { this._update(), this._updateTransform(this._center, this._zoom); for (var t in this._layers) this._layers[t]._reset() }, _onZoomEnd: function () { for (var t in this._layers) this._layers[t]._project() }, _updatePaths: function () { for (var t in this._layers) this._layers[t]._update() }, _update: function () { var t = this.options.padding, e = this._map.getSize(), i = this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round(); this._bounds = new J(i, i.add(e.multiplyBy(1 + t * 2)).round()), this._center = this._map.getCenter(), this._zoom = this._map.getZoom() } }), ar = It.extend({ options: { tolerance: 0 }, getEvents: function () { var t = It.prototype.getEvents.call(this); return t.viewprereset = this._onViewPreReset, t }, _onViewPreReset: function () { this._postponeUpdatePaths = !0 }, onAdd: function () { It.prototype.onAdd.call(this), this._draw() }, _initContainer: function () { var t = this._container = document.createElement("canvas"); D(t, "mousemove", this._onMouseMove, this), D(t, "click dblclick mousedown mouseup contextmenu", this._onClick, this), D(t, "mouseout", this._handleMouseOut, this), t._leaflet_disable_events = !0, this._ctx = t.getContext("2d") }, _destroyContainer: function () { gt(this._redrawRequest), delete this._ctx, X(this._container), Y(this._container), delete this._container }, _updatePaths: function () { if (!this._postponeUpdatePaths) { var t; this._redrawBounds = null; for (var e in this._layers) t = this._layers[e], t._update(); this._redraw() } }, _update: function () { if (!(this._map._animatingZoom && this._bounds)) { It.prototype._update.call(this); var t = this._bounds, e = this._container, i = t.getSize(), n = I.retina ? 2 : 1; it(e, t.min), e.width = n * i.x, e.height = n * i.y, e.style.width = i.x + "px", e.style.height = i.y + "px", I.retina && this._ctx.scale(2, 2), this._ctx.translate(-t.min.x, -t.min.y), this.fire("update") } }, _reset: function () { It.prototype._reset.call(this), this._postponeUpdatePaths && (this._postponeUpdatePaths = !1, this._updatePaths()) }, _initPath: function (t) { this._updateDashArray(t), this._layers[p(t)] = t; var e = t._order = { layer: t, prev: this._drawLast, next: null }; this._drawLast && (this._drawLast.next = e), this._drawLast = e, this._drawFirst = this._drawFirst || this._drawLast }, _addPath: function (t) { this._requestRedraw(t) }, _removePath: function (t) { var e = t._order, i = e.next, n = e.prev; i ? i.prev = n : this._drawLast = n, n ? n.next = i : this._drawFirst = i, delete t._order, delete this._layers[p(t)], this._requestRedraw(t) }, _updatePath: function (t) { this._extendRedrawBounds(t), t._project(), t._update(), this._requestRedraw(t) }, _updateStyle: function (t) { this._updateDashArray(t), this._requestRedraw(t) }, _updateDashArray: function (t) { if (typeof t.options.dashArray == "string") { var e = t.options.dashArray.split(/[, ]+/), i = [], n, a; for (a = 0; a < e.length; a++) { if (n = Number(e[a]), isNaN(n)) return; i.push(n) } t.options._dashArray = i } else t.options._dashArray = t.options.dashArray }, _requestRedraw: function (t) { this._map && (this._extendRedrawBounds(t), this._redrawRequest = this._redrawRequest || ct(this._redraw, this)) }, _extendRedrawBounds: function (t) { if (t._pxBounds) { var e = (t.options.weight || 0) + 1; this._redrawBounds = this._redrawBounds || new J, this._redrawBounds.extend(t._pxBounds.min.subtract([e, e])), this._redrawBounds.extend(t._pxBounds.max.add([e, e])) } }, _redraw: function () { this._redrawRequest = null, this._redrawBounds && (this._redrawBounds.min._floor(), this._redrawBounds.max._ceil()), this._clear(), this._draw(), this._redrawBounds = null }, _clear: function () { var t = this._redrawBounds; if (t) { var e = t.getSize(); this._ctx.clearRect(t.min.x, t.min.y, e.x, e.y) } else this._ctx.save(), this._ctx.setTransform(1, 0, 0, 1, 0, 0), this._ctx.clearRect(0, 0, this._container.width, this._container.height), this._ctx.restore() }, _draw: function () { var t, e = this._redrawBounds; if (this._ctx.save(), e) { var i = e.getSize(); this._ctx.beginPath(), this._ctx.rect(e.min.x, e.min.y, i.x, i.y), this._ctx.clip() } this._drawing = !0; for (var n = this._drawFirst; n; n = n.next)t = n.layer, (!e || t._pxBounds && t._pxBounds.intersects(e)) && t._updatePath(); this._drawing = !1, this._ctx.restore() }, _updatePoly: function (t, e) { if (this._drawing) { var i, n, a, c, m = t._parts, v = m.length, w = this._ctx; if (v) { for (w.beginPath(), i = 0; i < v; i++) { for (n = 0, a = m[i].length; n < a; n++)c = m[i][n], w[n ? "lineTo" : "moveTo"](c.x, c.y); e && w.closePath() } this._fillStroke(w, t) } } }, _updateCircle: function (t) { if (!(!this._drawing || t._empty())) { var e = t._point, i = this._ctx, n = Math.max(Math.round(t._radius), 1), a = (Math.max(Math.round(t._radiusY), 1) || n) / n; a !== 1 && (i.save(), i.scale(1, a)), i.beginPath(), i.arc(e.x, e.y / a, n, 0, Math.PI * 2, !1), a !== 1 && i.restore(), this._fillStroke(i, t) } }, _fillStroke: function (t, e) { var i = e.options; i.fill && (t.globalAlpha = i.fillOpacity, t.fillStyle = i.fillColor || i.color, t.fill(i.fillRule || "evenodd")), i.stroke && i.weight !== 0 && (t.setLineDash && t.setLineDash(e.options && e.options._dashArray || []), t.globalAlpha = i.opacity, t.lineWidth = i.weight, t.strokeStyle = i.color, t.lineCap = i.lineCap, t.lineJoin = i.lineJoin, t.stroke()) }, _onClick: function (t) { for (var e = this._map.mouseEventToLayerPoint(t), i, n, a = this._drawFirst; a; a = a.next)i = a.layer, i.options.interactive && i._containsPoint(e) && (!(t.type === "click" || t.type === "preclick") || !this._map._draggableMoved(i)) && (n = i); this._fireEvent(n ? [n] : !1, t) }, _onMouseMove: function (t) { if (!(!this._map || this._map.dragging.moving() || this._map._animatingZoom)) { var e = this._map.mouseEventToLayerPoint(t); this._handleMouseHover(t, e) } }, _handleMouseOut: function (t) { var e = this._hoveredLayer; e && (Q(this._container, "leaflet-interactive"), this._fireEvent([e], t, "mouseout"), this._hoveredLayer = null, this._mouseHoverThrottled = !1) }, _handleMouseHover: function (t, e) { if (!this._mouseHoverThrottled) { for (var i, n, a = this._drawFirst; a; a = a.next)i = a.layer, i.options.interactive && i._containsPoint(e) && (n = i); n !== this._hoveredLayer && (this._handleMouseOut(t), n && (Z(this._container, "leaflet-interactive"), this._fireEvent([n], t, "mouseover"), this._hoveredLayer = n)), this._fireEvent(this._hoveredLayer ? [this._hoveredLayer] : !1, t), this._mouseHoverThrottled = !0, setTimeout(f(function () { this._mouseHoverThrottled = !1 }, this), 32) } }, _fireEvent: function (t, e, i) { this._map._fireDOMEvent(e, i || e.type, t) }, _bringToFront: function (t) { var e = t._order; if (e) { var i = e.next, n = e.prev; if (i) i.prev = n; else return; n ? n.next = i : i && (this._drawFirst = i), e.prev = this._drawLast, this._drawLast.next = e, e.next = null, this._drawLast = e, this._requestRedraw(t) } }, _bringToBack: function (t) { var e = t._order; if (e) { var i = e.next, n = e.prev; if (n) n.next = i; else return; i ? i.prev = n : n && (this._drawLast = n), e.prev = null, e.next = this._drawFirst, this._drawFirst.prev = e, this._drawFirst = e, this._requestRedraw(t) } } }); function lr(t) { return I.canvas ? new ar(t) : null } var Se = (function () { try { return document.namespaces.add("lvml", "urn:schemas-microsoft-com:vml"), function (t) { return document.createElement("<lvml:" + t + ' class="lvml">') } } catch { } return function (t) { return document.createElement("<" + t + ' xmlns="urn:schemas-microsoft.com:vml" class="lvml">') } })(), Cs = { _initContainer: function () { this._container = V("div", "leaflet-vml-container") }, _update: function () { this._map._animatingZoom || (It.prototype._update.call(this), this.fire("update")) }, _initPath: function (t) { var e = t._container = Se("shape"); Z(e, "leaflet-vml-shape " + (this.options.className || "")), e.coordsize = "1 1", t._path = Se("path"), e.appendChild(t._path), this._updateStyle(t), this._layers[p(t)] = t }, _addPath: function (t) { var e = t._container; this._container.appendChild(e), t.options.interactive && t.addInteractiveTarget(e) }, _removePath: function (t) { var e = t._container; X(e), t.removeInteractiveTarget(e), delete this._layers[p(t)] }, _updateStyle: function (t) { var e = t._stroke, i = t._fill, n = t.options, a = t._container; a.stroked = !!n.stroke, a.filled = !!n.fill, n.stroke ? (e || (e = t._stroke = Se("stroke")), a.appendChild(e), e.weight = n.weight + "px", e.color = n.color, e.opacity = n.opacity, n.dashArray ? e.dashStyle = P(n.dashArray) ? n.dashArray.join(" ") : n.dashArray.replace(/( *, *)/g, " ") : e.dashStyle = "", e.endcap = n.lineCap.replace("butt", "flat"), e.joinstyle = n.lineJoin) : e && (a.removeChild(e), t._stroke = null), n.fill ? (i || (i = t._fill = Se("fill")), a.appendChild(i), i.color = n.fillColor || n.color, i.opacity = n.fillOpacity) : i && (a.removeChild(i), t._fill = null) }, _updateCircle: function (t) { var e = t._point.round(), i = Math.round(t._radius), n = Math.round(t._radiusY || i); this._setPath(t, t._empty() ? "M0 0" : "AL " + e.x + "," + e.y + " " + i + "," + n + " 0," + 65535 * 360) }, _setPath: function (t, e) { t._path.v = e }, _bringToFront: function (t) { Qt(t._container) }, _bringToBack: function (t) { te(t._container) } }, Ye = I.vml ? Se : dn, Le = It.extend({ _initContainer: function () { this._container = Ye("svg"), this._container.setAttribute("pointer-events", "none"), this._rootGroup = Ye("g"), this._container.appendChild(this._rootGroup) }, _destroyContainer: function () { X(this._container), Y(this._container), delete this._container, delete this._rootGroup, delete this._svgSize }, _update: function () { if (!(this._map._animatingZoom && this._bounds)) { It.prototype._update.call(this); var t = this._bounds, e = t.getSize(), i = this._container; (!this._svgSize || !this._svgSize.equals(e)) && (this._svgSize = e, i.setAttribute("width", e.x), i.setAttribute("height", e.y)), it(i, t.min), i.setAttribute("viewBox", [t.min.x, t.min.y, e.x, e.y].join(" ")), this.fire("update") } }, _initPath: function (t) { var e = t._path = Ye("path"); t.options.className && Z(e, t.options.className), t.options.interactive && Z(e, "leaflet-interactive"), this._updateStyle(t), this._layers[p(t)] = t }, _addPath: function (t) { this._rootGroup || this._initContainer(), this._rootGroup.appendChild(t._path), t.addInteractiveTarget(t._path) }, _removePath: function (t) { X(t._path), t.removeInteractiveTarget(t._path), delete this._layers[p(t)] }, _updatePath: function (t) { t._project(), t._update() }, _updateStyle: function (t) { var e = t._path, i = t.options; e && (i.stroke ? (e.setAttribute("stroke", i.color), e.setAttribute("stroke-opacity", i.opacity), e.setAttribute("stroke-width", i.weight), e.setAttribute("stroke-linecap", i.lineCap), e.setAttribute("stroke-linejoin", i.lineJoin), i.dashArray ? e.setAttribute("stroke-dasharray", i.dashArray) : e.removeAttribute("stroke-dasharray"), i.dashOffset ? e.setAttribute("stroke-dashoffset", i.dashOffset) : e.removeAttribute("stroke-dashoffset")) : e.setAttribute("stroke", "none"), i.fill ? (e.setAttribute("fill", i.fillColor || i.color), e.setAttribute("fill-opacity", i.fillOpacity), e.setAttribute("fill-rule", i.fillRule || "evenodd")) : e.setAttribute("fill", "none")) }, _updatePoly: function (t, e) { this._setPath(t, fn(t._parts, e)) }, _updateCircle: function (t) { var e = t._point, i = Math.max(Math.round(t._radius), 1), n = Math.max(Math.round(t._radiusY), 1) || i, a = "a" + i + "," + n + " 0 1,0 ", c = t._empty() ? "M0 0" : "M" + (e.x - i) + "," + e.y + a + i * 2 + ",0 " + a + -i * 2 + ",0 "; this._setPath(t, c) }, _setPath: function (t, e) { t._path.setAttribute("d", e) }, _bringToFront: function (t) { Qt(t._path) }, _bringToBack: function (t) { te(t._path) } }); I.vml && Le.include(Cs); function cr(t) { return I.svg || I.vml ? new Le(t) : null } H.include({ getRenderer: function (t) { var e = t.options.renderer || this._getPaneRenderer(t.options.pane) || this.options.renderer || this._renderer; return e || (e = this._renderer = this._createRenderer()), this.hasLayer(e) || this.addLayer(e), e }, _getPaneRenderer: function (t) { if (t === "overlayPane" || t === void 0) return !1; var e = this._paneRenderers[t]; return e === void 0 && (e = this._createRenderer({ pane: t }), this._paneRenderers[t] = e), e }, _createRenderer: function (t) { return this.options.preferCanvas && lr(t) || cr(t) } }); var hr = ne.extend({ initialize: function (t, e) { ne.prototype.initialize.call(this, this._boundsToLatLngs(t), e) }, setBounds: function (t) { return this.setLatLngs(this._boundsToLatLngs(t)) }, _boundsToLatLngs: function (t) { return t = et(t), [t.getSouthWest(), t.getNorthWest(), t.getNorthEast(), t.getSouthEast()] } }); function Ps(t, e) { return new hr(t, e) } Le.create = Ye, Le.pointsToPath = fn, Rt.geometryToLayer = We, Rt.coordsToLatLng = Bi, Rt.coordsToLatLngs = He, Rt.latLngToCoords = Di, Rt.latLngsToCoords = Ue, Rt.getFeature = re, Rt.asFeature = Ve, H.mergeOptions({ boxZoom: !0 }); var ur = kt.extend({ initialize: function (t) { this._map = t, this._container = t._container, this._pane = t._panes.overlayPane, this._resetStateTimeout = 0, t.on("unload", this._destroy, this) }, addHooks: function () { D(this._container, "mousedown", this._onMouseDown, this) }, removeHooks: function () { Y(this._container, "mousedown", this._onMouseDown, this) }, moved: function () { return this._moved }, _destroy: function () { X(this._pane), delete this._pane }, _resetState: function () { this._resetStateTimeout = 0, this._moved = !1 }, _clearDeferredResetState: function () { this._resetStateTimeout !== 0 && (clearTimeout(this._resetStateTimeout), this._resetStateTimeout = 0) }, _onMouseDown: function (t) { if (!t.shiftKey || t.which !== 1 && t.button !== 1) return !1; this._clearDeferredResetState(), this._resetState(), pe(), wi(), this._startPoint = this._map.mouseEventToContainerPoint(t), D(document, { contextmenu: Kt, mousemove: this._onMouseMove, mouseup: this._onMouseUp, keydown: this._onKeyDown }, this) }, _onMouseMove: function (t) { this._moved || (this._moved = !0, this._box = V("div", "leaflet-zoom-box", this._container), Z(this._container, "leaflet-crosshair"), this._map.fire("boxzoomstart")), this._point = this._map.mouseEventToContainerPoint(t); var e = new J(this._point, this._startPoint), i = e.getSize(); it(this._box, e.min), this._box.style.width = i.x + "px", this._box.style.height = i.y + "px" }, _finish: function () { this._moved && (X(this._box), Q(this._container, "leaflet-crosshair")), ge(), bi(), Y(document, { contextmenu: Kt, mousemove: this._onMouseMove, mouseup: this._onMouseUp, keydown: this._onKeyDown }, this) }, _onMouseUp: function (t) { if (!(t.which !== 1 && t.button !== 1) && (this._finish(), !!this._moved)) { this._clearDeferredResetState(), this._resetStateTimeout = setTimeout(f(this._resetState, this), 0); var e = new ut(this._map.containerPointToLatLng(this._startPoint), this._map.containerPointToLatLng(this._point)); this._map.fitBounds(e).fire("boxzoomend", { boxZoomBounds: e }) } }, _onKeyDown: function (t) { t.keyCode === 27 && (this._finish(), this._clearDeferredResetState(), this._resetState()) } }); H.addInitHook("addHandler", "boxZoom", ur), H.mergeOptions({ doubleClickZoom: !0 }); var dr = kt.extend({ addHooks: function () { this._map.on("dblclick", this._onDoubleClick, this) }, removeHooks: function () { this._map.off("dblclick", this._onDoubleClick, this) }, _onDoubleClick: function (t) { var e = this._map, i = e.getZoom(), n = e.options.zoomDelta, a = t.originalEvent.shiftKey ? i - n : i + n; e.options.doubleClickZoom === "center" ? e.setZoom(a) : e.setZoomAround(t.containerPoint, a) } }); H.addInitHook("addHandler", "doubleClickZoom", dr), H.mergeOptions({ dragging: !0, inertia: !0, inertiaDeceleration: 3400, inertiaMaxSpeed: 1 / 0, easeLinearity: .2, worldCopyJump: !1, maxBoundsViscosity: 0 }); var fr = kt.extend({ addHooks: function () { if (!this._draggable) { var t = this._map; this._draggable = new Ft(t._mapPane, t._container), this._draggable.on({ dragstart: this._onDragStart, drag: this._onDrag, dragend: this._onDragEnd }, this), this._draggable.on("predrag", this._onPreDragLimit, this), t.options.worldCopyJump && (this._draggable.on("predrag", this._onPreDragWrap, this), t.on("zoomend", this._onZoomEnd, this), t.whenReady(this._onZoomEnd, this)) } Z(this._map._container, "leaflet-grab leaflet-touch-drag"), this._draggable.enable(), this._positions = [], this._times = [] }, removeHooks: function () { Q(this._map._container, "leaflet-grab"), Q(this._map._container, "leaflet-touch-drag"), this._draggable.disable() }, moved: function () { return this._draggable && this._draggable._moved }, moving: function () { return this._draggable && this._draggable._moving }, _onDragStart: function () { var t = this._map; if (t._stop(), this._map.options.maxBounds && this._map.options.maxBoundsViscosity) { var e = et(this._map.options.maxBounds); this._offsetLimit = ht(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1), this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())), this._viscosity = Math.min(1, Math.max(0, this._map.options.maxBoundsViscosity)) } else this._offsetLimit = null; t.fire("movestart").fire("dragstart"), t.options.inertia && (this._positions = [], this._times = []) }, _onDrag: function (t) { if (this._map.options.inertia) { var e = this._lastTime = +new Date, i = this._lastPos = this._draggable._absPos || this._draggable._newPos; this._positions.push(i), this._times.push(e), this._prunePositions(e) } this._map.fire("move", t).fire("drag", t) }, _prunePositions: function (t) { for (; this._positions.length > 1 && t - this._times[0] > 50;)this._positions.shift(), this._times.shift() }, _onZoomEnd: function () { var t = this._map.getSize().divideBy(2), e = this._map.latLngToLayerPoint([0, 0]); this._initialWorldOffset = e.subtract(t).x, this._worldWidth = this._map.getPixelWorldBounds().getSize().x }, _viscousLimit: function (t, e) { return t - (t - e) * this._viscosity }, _onPreDragLimit: function () { if (!(!this._viscosity || !this._offsetLimit)) { var t = this._draggable._newPos.subtract(this._draggable._startPos), e = this._offsetLimit; t.x < e.min.x && (t.x = this._viscousLimit(t.x, e.min.x)), t.y < e.min.y && (t.y = this._viscousLimit(t.y, e.min.y)), t.x > e.max.x && (t.x = this._viscousLimit(t.x, e.max.x)), t.y > e.max.y && (t.y = this._viscousLimit(t.y, e.max.y)), this._draggable._newPos = this._draggable._startPos.add(t) } }, _onPreDragWrap: function () { var t = this._worldWidth, e = Math.round(t / 2), i = this._initialWorldOffset, n = this._draggable._newPos.x, a = (n - e + i) % t + e - i, c = (n + e + i) % t - e - i, m = Math.abs(a + i) < Math.abs(c + i) ? a : c; this._draggable._absPos = this._draggable._newPos.clone(), this._draggable._newPos.x = m }, _onDragEnd: function (t) { var e = this._map, i = e.options, n = !i.inertia || t.noInertia || this._times.length < 2; if (e.fire("dragend", t), n) e.fire("moveend"); else { this._prunePositions(+new Date); var a = this._lastPos.subtract(this._positions[0]), c = (this._lastTime - this._times[0]) / 1e3, m = i.easeLinearity, v = a.multiplyBy(m / c), w = v.distanceTo([0, 0]), k = Math.min(i.inertiaMaxSpeed, w), z = v.multiplyBy(k / w), N = k / (i.inertiaDeceleration * m), F = z.multiplyBy(-N / 2).round(); !F.x && !F.y ? e.fire("moveend") : (F = e._limitOffset(F, e.options.maxBounds), ct(function () { e.panBy(F, { duration: N, easeLinearity: m, noMoveStart: !0, animate: !0 }) })) } } }); H.addInitHook("addHandler", "dragging", fr), H.mergeOptions({ keyboard: !0, keyboardPanDelta: 80 }); var mr = kt.extend({ keyCodes: { left: [37], right: [39], down: [40], up: [38], zoomIn: [187, 107, 61, 171], zoomOut: [189, 109, 54, 173] }, initialize: function (t) { this._map = t, this._setPanDelta(t.options.keyboardPanDelta), this._setZoomDelta(t.options.zoomDelta) }, addHooks: function () { var t = this._map._container; t.tabIndex <= 0 && (t.tabIndex = "0"), D(t, { focus: this._onFocus, blur: this._onBlur, mousedown: this._onMouseDown }, this), this._map.on({ focus: this._addHooks, blur: this._removeHooks }, this) }, removeHooks: function () { this._removeHooks(), Y(this._map._container, { focus: this._onFocus, blur: this._onBlur, mousedown: this._onMouseDown }, this), this._map.off({ focus: this._addHooks, blur: this._removeHooks }, this) }, _onMouseDown: function () { if (!this._focused) { var t = document.body, e = document.documentElement, i = t.scrollTop || e.scrollTop, n = t.scrollLeft || e.scrollLeft; this._map._container.focus(), window.scrollTo(n, i) } }, _onFocus: function () { this._focused = !0, this._map.fire("focus") }, _onBlur: function () { this._focused = !1, this._map.fire("blur") }, _setPanDelta: function (t) { var e = this._panKeys = {}, i = this.keyCodes, n, a; for (n = 0, a = i.left.length; n < a; n++)e[i.left[n]] = [-1 * t, 0]; for (n = 0, a = i.right.length; n < a; n++)e[i.right[n]] = [t, 0]; for (n = 0, a = i.down.length; n < a; n++)e[i.down[n]] = [0, t]; for (n = 0, a = i.up.length; n < a; n++)e[i.up[n]] = [0, -1 * t] }, _setZoomDelta: function (t) { var e = this._zoomKeys = {}, i = this.keyCodes, n, a; for (n = 0, a = i.zoomIn.length; n < a; n++)e[i.zoomIn[n]] = t; for (n = 0, a = i.zoomOut.length; n < a; n++)e[i.zoomOut[n]] = -t }, _addHooks: function () { D(document, "keydown", this._onKeyDown, this) }, _removeHooks: function () { Y(document, "keydown", this._onKeyDown, this) }, _onKeyDown: function (t) { if (!(t.altKey || t.ctrlKey || t.metaKey)) { var e = t.keyCode, i = this._map, n; if (e in this._panKeys) { if (!i._panAnim || !i._panAnim._inProgress) if (n = this._panKeys[e], t.shiftKey && (n = O(n).multiplyBy(3)), i.options.maxBounds && (n = i._limitOffset(O(n), i.options.maxBounds)), i.options.worldCopyJump) { var a = i.wrapLatLng(i.unproject(i.project(i.getCenter()).add(n))); i.panTo(a) } else i.panBy(n) } else if (e in this._zoomKeys) i.setZoom(i.getZoom() + (t.shiftKey ? 3 : 1) * this._zoomKeys[e]); else if (e === 27 && i._popup && i._popup.options.closeOnEscapeKey) i.closePopup(); else return; Kt(t) } } }); H.addInitHook("addHandler", "keyboard", mr), H.mergeOptions({ scrollWheelZoom: !0, wheelDebounceTime: 40, wheelPxPerZoomLevel: 60 }); var pr = kt.extend({ addHooks: function () { D(this._map._container, "wheel", this._onWheelScroll, this), this._delta = 0 }, removeHooks: function () { Y(this._map._container, "wheel", this._onWheelScroll, this) }, _onWheelScroll: function (t) { var e = Dn(t), i = this._map.options.wheelDebounceTime; this._delta += e, this._lastMousePos = this._map.mouseEventToContainerPoint(t), this._startTime || (this._startTime = +new Date); var n = Math.max(i - (+new Date - this._startTime), 0); clearTimeout(this._timer), this._timer = setTimeout(f(this._performZoom, this), n), Kt(t) }, _performZoom: function () { var t = this._map, e = t.getZoom(), i = this._map.options.zoomSnap || 0; t._stop(); var n = this._delta / (this._map.options.wheelPxPerZoomLevel * 4), a = 4 * Math.log(2 / (1 + Math.exp(-Math.abs(n)))) / Math.LN2, c = i ? Math.ceil(a / i) * i : a, m = t._limitZoom(e + (this._delta > 0 ? c : -c)) - e; this._delta = 0, this._startTime = null, m && (t.options.scrollWheelZoom === "center" ? t.setZoom(e + m) : t.setZoomAround(this._lastMousePos, e + m)) } }); H.addInitHook("addHandler", "scrollWheelZoom", pr); var ks = 600; H.mergeOptions({ tapHold: I.touchNative && I.safari && I.mobile, tapTolerance: 15 }); var gr = kt.extend({ addHooks: function () { D(this._map._container, "touchstart", this._onDown, this) }, removeHooks: function () { Y(this._map._container, "touchstart", this._onDown, this) }, _onDown: function (t) { if (clearTimeout(this._holdTimeout), t.touches.length === 1) { var e = t.touches[0]; this._startPos = this._newPos = new B(e.clientX, e.clientY), this._holdTimeout = setTimeout(f(function () { this._cancel(), this._isTapValid() && (D(document, "touchend", st), D(document, "touchend touchcancel", this._cancelClickPrevent), this._simulateEvent("contextmenu", e)) }, this), ks), D(document, "touchend touchcancel contextmenu", this._cancel, this), D(document, "touchmove", this._onMove, this) } }, _cancelClickPrevent: function t() { Y(document, "touchend", st), Y(document, "touchend touchcancel", t) }, _cancel: function () { clearTimeout(this._holdTimeout), Y(document, "touchend touchcancel contextmenu", this._cancel, this), Y(document, "touchmove", this._onMove, this) }, _onMove: function (t) { var e = t.touches[0]; this._newPos = new B(e.clientX, e.clientY) }, _isTapValid: function () { return this._newPos.distanceTo(this._startPos) <= this._map.options.tapTolerance }, _simulateEvent: function (t, e) { var i = new MouseEvent(t, { bubbles: !0, cancelable: !0, view: window, screenX: e.screenX, screenY: e.screenY, clientX: e.clientX, clientY: e.clientY }); i._simulated = !0, e.target.dispatchEvent(i) } }); H.addInitHook("addHandler", "tapHold", gr), H.mergeOptions({ touchZoom: I.touch, bounceAtZoomLimits: !0 }); var _r = kt.extend({ addHooks: function () { Z(this._map._container, "leaflet-touch-zoom"), D(this._map._container, "touchstart", this._onTouchStart, this) }, removeHooks: function () { Q(this._map._container, "leaflet-touch-zoom"), Y(this._map._container, "touchstart", this._onTouchStart, this) }, _onTouchStart: function (t) { var e = this._map; if (!(!t.touches || t.touches.length !== 2 || e._animatingZoom || this._zooming)) { var i = e.mouseEventToContainerPoint(t.touches[0]), n = e.mouseEventToContainerPoint(t.touches[1]); this._centerPoint = e.getSize()._divideBy(2), this._startLatLng = e.containerPointToLatLng(this._centerPoint), e.options.touchZoom !== "center" && (this._pinchStartLatLng = e.containerPointToLatLng(i.add(n)._divideBy(2))), this._startDist = i.distanceTo(n), this._startZoom = e.getZoom(), this._moved = !1, this._zooming = !0, e._stop(), D(document, "touchmove", this._onTouchMove, this), D(document, "touchend touchcancel", this._onTouchEnd, this), st(t) } }, _onTouchMove: function (t) { if (!(!t.touches || t.touches.length !== 2 || !this._zooming)) { var e = this._map, i = e.mouseEventToContainerPoint(t.touches[0]), n = e.mouseEventToContainerPoint(t.touches[1]), a = i.distanceTo(n) / this._startDist; if (this._zoom = e.getScaleZoom(a, this._startZoom), !e.options.bounceAtZoomLimits && (this._zoom < e.getMinZoom() && a < 1 || this._zoom > e.getMaxZoom() && a > 1) && (this._zoom = e._limitZoom(this._zoom)), e.options.touchZoom === "center") { if (this._center = this._startLatLng, a === 1) return } else { var c = i._add(n)._divideBy(2)._subtract(this._centerPoint); if (a === 1 && c.x === 0 && c.y === 0) return; this._center = e.unproject(e.project(this._pinchStartLatLng, this._zoom).subtract(c), this._zoom) } this._moved || (e._moveStart(!0, !1), this._moved = !0), gt(this._animRequest); var m = f(e._move, e, this._center, this._zoom, { pinch: !0, round: !1 }, void 0); this._animRequest = ct(m, this, !0), st(t) } }, _onTouchEnd: function () { if (!this._moved || !this._zooming) { this._zooming = !1; return } this._zooming = !1, gt(this._animRequest), Y(document, "touchmove", this._onTouchMove, this), Y(document, "touchend touchcancel", this._onTouchEnd, this), this._map.options.zoomAnimation ? this._map._animateZoom(this._center, this._map._limitZoom(this._zoom), !0, this._map.options.zoomSnap) : this._map._resetView(this._center, this._map._limitZoom(this._zoom)) } }); H.addInitHook("addHandler", "touchZoom", _r), H.BoxZoom = ur, H.DoubleClickZoom = dr, H.Drag = fr, H.Keyboard = mr, H.ScrollWheelZoom = pr, H.TapHold = gr, H.TouchZoom = _r, s.Bounds = J, s.Browser = I, s.CRS = At, s.Canvas = ar, s.Circle = Oi, s.CircleMarker = Fe, s.Class = jt, s.Control = St, s.DivIcon = rr, s.DivOverlay = Tt, s.DomEvent = Vo, s.DomUtil = Ho, s.Draggable = Ft, s.Evented = he, s.FeatureGroup = Mt, s.GeoJSON = Rt, s.GridLayer = be, s.Handler = kt, s.Icon = ie, s.ImageOverlay = qe, s.LatLng = K, s.LatLngBounds = ut, s.Layer = Lt, s.LayerGroup = ee, s.LineUtil = rs, s.Map = H, s.Marker = Ze, s.Mixin = Xo, s.Path = Wt, s.Point = B, s.PolyUtil = Qo, s.Polygon = ne, s.Polyline = zt, s.Popup = Ge, s.PosAnimation = Zn, s.Projection = os, s.Rectangle = hr, s.Renderer = It, s.SVG = Le, s.SVGOverlay = nr, s.TileLayer = oe, s.Tooltip = Ke, s.Transformation = ci, s.Util = ho, s.VideoOverlay = ir, s.bind = f, s.bounds = ht, s.canvas = lr, s.circle = fs, s.circleMarker = ds, s.control = ye, s.divIcon = bs, s.extend = u, s.featureGroup = cs, s.geoJSON = er, s.geoJson = gs, s.gridLayer = Ss, s.icon = hs, s.imageOverlay = _s, s.latLng = W, s.latLngBounds = et, s.layerGroup = ls, s.map = qo, s.marker = us, s.point = O, s.polygon = ps, s.polyline = ms, s.popup = xs, s.rectangle = Ps, s.setOptions = E, s.stamp = p, s.svg = cr, s.svgOverlay = ys, s.tileLayer = or, s.tooltip = ws, s.transformation = ue, s.version = h, s.videoOverlay = vs; var Ts = window.L; s.noConflict = function () { return window.L = Ts, this }, window.L = s })) })(ke, ke.exports)), ke.exports } var Ae = Bc(); const an = Bs(Ae); function ln(r, l, s) { return Object.freeze({ instance: r, context: l, container: s }) } function cn(r, l) { return l == null ? function (h, u) { const d = g.useRef(); return d.current || (d.current = r(h, u)), d } : function (h, u) { const d = g.useRef(); d.current || (d.current = r(h, u)); const f = g.useRef(h), { instance: y } = d.current; return g.useEffect(function () { f.current !== h && (l(y, h, f.current), f.current = h) }, [y, h, u]), d } } function Dc(r, l) { g.useEffect(function () { return (l.layerContainer ?? l.map).addLayer(r.instance), function () { var d; (d = l.layerContainer) == null || d.removeLayer(r.instance), l.map.removeLayer(r.instance) } }, [l, r]) } function co(r) { return function (s) { const h = on(), u = r(sn(s, h), h); return oo(h.map, s.attribution), lo(u.current, s.eventHandlers), Dc(u.current, h), u } } function Zc(r, l) { const s = cn(r, l), h = co(s); return zc(h) } function Fc(r, l) { const s = cn(r), h = Nc(s, l); return Rc(h) } function Wc(r, l) { const s = cn(r, l), h = co(s); return Ic(h) } function Hc(r, l, s) { const { opacity: h, zIndex: u } = l; h != null && h !== s.opacity && r.setOpacity(h), u != null && u !== s.zIndex && r.setZIndex(u) } function Uc() { return on().map } function Ki() { return Ki = Object.assign || function (r) { for (var l = 1; l < arguments.length; l++) { var s = arguments[l]; for (var h in s) Object.prototype.hasOwnProperty.call(s, h) && (r[h] = s[h]) } return r }, Ki.apply(this, arguments) } function Vc({ bounds: r, boundsOptions: l, center: s, children: h, className: u, id: d, placeholder: f, style: y, whenReady: p, zoom: S, ...b }, x) { const [j] = g.useState({ className: u, id: d, style: y }), [T, A] = g.useState(null); g.useImperativeHandle(x, () => (T == null ? void 0 : T.map) ?? null, [T]); const E = g.useCallback(C => { if (C !== null && T === null) { const _ = new Ae.Map(C, b); s != null && S != null ? _.setView(s, S) : r != null && _.fitBounds(r, l), p != null && _.whenReady(p), A(Ac(_)) } }, []); g.useEffect(() => () => { T == null || T.map.remove() }, [T]); const M = T ? Ht.createElement(ao, { value: T }, h) : f ?? null; return Ht.createElement("div", Ki({}, j, { ref: E }), M) } const qc = g.forwardRef(Vc), Gc = Zc(function ({ position: l, ...s }, h) { const u = new Ae.Marker(l, s); return ln(u, Mc(h, { overlayContainer: u })) }, function (l, s, h) { s.position !== h.position && l.setLatLng(s.position), s.icon != null && s.icon !== h.icon && l.setIcon(s.icon), s.zIndexOffset != null && s.zIndexOffset !== h.zIndexOffset && l.setZIndexOffset(s.zIndexOffset), s.opacity != null && s.opacity !== h.opacity && l.setOpacity(s.opacity), l.dragging != null && s.draggable !== h.draggable && (s.draggable === !0 ? l.dragging.enable() : l.dragging.disable()) }), Kc = Fc(function (l, s) { const h = new Ae.Popup(l, s.overlayContainer); return ln(h, s) }, function (l, s, { position: h }, u) { g.useEffect(function () { const { instance: f } = l; function y(S) { S.popup === f && (f.update(), u(!0)) } function p(S) { S.popup === f && u(!1) } return s.map.on({ popupopen: y, popupclose: p }), s.overlayContainer == null ? (h != null && f.setLatLng(h), f.openOn(s.map)) : s.overlayContainer.bindPopup(f), function () { var b; s.map.off({ popupopen: y, popupclose: p }), (b = s.overlayContainer) == null || b.unbindPopup(), s.map.removeLayer(f) } }, [l, s, u, h]) }), Yc = Wc(function ({ url: l, ...s }, h) { const u = new Ae.TileLayer(l, sn(s, h)); return ln(u, h) }, function (l, s, h) { Hc(l, s, h); const { url: u } = s; u != null && u !== h.url && l.setUrl(u) }), $c = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=", Jc = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC"; let Xc = an.icon({ iconUrl: $c, shadowUrl: Jc, iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41] }); an.Marker.prototype.options.icon = Xc; const Pe = r => new an.Icon({ iconUrl: `https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-${r}.png`, shadowUrl: "https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png", iconSize: [25, 41], iconAnchor: [12, 41], popupAnchor: [1, -34], shadowSize: [41, 41] }), Xe = { red: Pe("red"), orange: Pe("orange"), blue: Pe("blue"), green: Pe("green"), grey: Pe("grey") }, Qc = ({ lat: r, lng: l }) => { const s = Uc(); return g.useEffect(() => { r && l && s.setView([r, l]) }, [r, l, s]), null }, th = ({ issues: r, selectedIssueId: l, onIssueSelect: s }) => { const [h, u] = g.useState([19.076, 72.8777]); g.useEffect(() => { var f, y; if (l && r) { const p = r.find(S => S.id === l); (f = p == null ? void 0 : p.location) != null && f.lat && u([p.location.lat, p.location.lng]) } else if (r && r.length > 0) { const p = r[0]; (y = p == null ? void 0 : p.location) != null && y.lat && u([p.location.lat, p.location.lng]) } }, [l, r]); const d = f => f.status === "completed" ? Xe.green : f.riskLevel === "Crisis" || f.priority === "High" ? Xe.red : f.riskLevel === "Critical" ? Xe.orange : Xe.blue; return o.jsxs("div", { className: "card", style: { padding: 0, height: "100%", borderRadius: "1rem", overflow: "hidden", position: "relative", zIndex: 1, background: "#f8fafc" }, children: [o.jsxs(qc, { center: h, zoom: 13, style: { height: "100%", width: "100%" }, zoomControl: !1, children: [o.jsx(Yc, { attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OSM</a>', url: "https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png" }), r.map(f => { var y; return ((y = f.location) == null ? void 0 : y.lat) && o.jsx(Gc, { position: [f.location.lat, f.location.lng], icon: d(f), eventHandlers: { click: () => s && s(f.id) }, children: o.jsx(Kc, { children: o.jsxs("div", { style: { fontSize: "0.9rem", color: "#0f172a" }, children: [o.jsx("h4", { style: { margin: "0 0 0.25rem 0", fontWeight: 600 }, children: f.title }), o.jsx("div", { style: { marginBottom: "0.25rem", color: "#64748b" }, children: f.location.address }), o.jsxs("div", { style: { display: "flex", gap: "0.5rem", alignItems: "center" }, children: [o.jsx("span", { className: `badge badge-${f.status}`, children: f.status }), f.riskLevel && o.jsx("span", { style: { fontSize: "0.75rem", color: "#ef4444", fontWeight: 700 }, children: f.riskLevel })] })] }) }) }, f.id) }), o.jsx(Qc, { lat: h[0], lng: h[1] })] }), o.jsxs("div", { className: "glass-panel", style: { position: "absolute", bottom: "1.5rem", left: "1.5rem", zIndex: 1e3, padding: "0.75rem", background: "rgba(255, 255, 255, 0.9)", borderColor: "rgba(0,0,0,0.1)", backdropFilter: "blur(8px)", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.1)" }, children: [o.jsx("div", { style: { fontSize: "0.75rem", fontWeight: 700, color: "#64748b", marginBottom: "0.5rem", letterSpacing: "0.05em" }, children: "LIVE STATUS" }), o.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", fontSize: "0.8rem", color: "#334155" }, children: [o.jsx("div", { style: { width: 8, height: 8, borderRadius: "50%", background: "#ef4444", boxShadow: "0 0 4px #ef4444" } }), " Critical"] }), o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", fontSize: "0.8rem", color: "#334155" }, children: [o.jsx("div", { style: { width: 8, height: 8, borderRadius: "50%", background: "#f97316" } }), " Major"] }), o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", fontSize: "0.8rem", color: "#334155" }, children: [o.jsx("div", { style: { width: 8, height: 8, borderRadius: "50%", background: "#3b82f6" } }), " Active"] }), o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", fontSize: "0.8rem", color: "#334155" }, children: [o.jsx("div", { style: { width: 8, height: 8, borderRadius: "50%", background: "#10b981" } }), " Solved"] })] })] })] }) }, eh = ({ issues: r = [] }) => { const l = r.filter(d => d.status !== "completed" && d.status !== "resolved" && d.status !== "rejected").length, s = r.filter(d => (d.priority === "High" || d.riskLevel === "Critical") && d.status !== "rejected").length, h = r.filter(d => { var f; return ((f = d.aiAnalysis) == null ? void 0 : f.isReal) === !1 }).length, u = [{ id: 1, label: "Active Issues", value: l.toString(), sub: "Total Open", icon: Hl, color: l > 5 ? "#DC2626" : "#3B82F6" }, { id: 2, label: "AI Fakes Blocked", value: h.toString(), sub: "Auto-Rejected", icon: nn, color: "#7C3AED" }, { id: 3, label: "Critical Alerts", value: s.toString(), sub: "Requires Action", icon: rn, color: s > 0 ? "#DC2626" : "#10B981" }, { id: 4, label: "Resolved", value: "14", sub: "Success Rate", icon: Fl, color: "#10B981" }, { id: 5, label: "Field Teams", value: "3", sub: "Currently Active", icon: ro, color: "#3B82F6" }, { id: 6, label: "Avg Response", value: "4.2h", sub: "-15% this week", icon: ni, color: "#3B82F6" }]; return o.jsxs("div", { children: [o.jsxs("div", { className: "flex justify-between items-center mb-4", children: [o.jsx("h3", { className: "text-sm font-bold uppercase text-gray-500", style: { letterSpacing: "1px" }, children: "System Metrics" }), o.jsx("span", { className: "text-xs text-gray-400 font-mono", children: "T-MINUS 24H" })] }), o.jsx("div", { className: "cc-metrics-grid", children: u.map(d => o.jsxs("div", { className: "cc-metric-card", style: { background: "white", border: "1px solid #E5E7EB", color: "#111827", boxShadow: "0 1px 2px rgba(0,0,0,0.05)" }, children: [o.jsxs("div", { className: "cc-metric-header", children: [o.jsx(d.icon, { size: 20, color: d.color }), o.jsxs("span", { style: { fontSize: "11px", color: "#6B7280" }, children: ["/", d.value.replace(/[^0-9]/g, "")] })] }), o.jsxs("div", { children: [o.jsx("div", { className: "cc-metric-value", style: { color: "#111827" }, children: d.value }), o.jsx("div", { className: "cc-metric-label", style: { color: "#4B5563" }, children: d.label }), o.jsx("div", { className: "cc-metric-sub", style: { color: d.color, opacity: 1 }, children: d.sub })] })] }, d.id)) })] }) }, ih = ({ issues: r = [] }) => { const s = r.filter(h => h.riskLevel === "Crisis" || h.riskLevel === "Critical" || h.priority === "High").sort((h, u) => h.riskLevel === "Crisis" && u.riskLevel !== "Crisis" ? -1 : u.riskLevel === "Crisis" && h.riskLevel !== "Crisis" ? 1 : new Date(u.reportedAt) - new Date(h.reportedAt)).map(h => { var f, y, p; const u = Math.floor((new Date - new Date(h.reportedAt)) / 6e4); let d = u < 60 ? `T+${u}m` : `T+${Math.floor(u / 60)}h`; return { id: h.id, title: h.title.toUpperCase(), location: ((f = h.location) == null ? void 0 : f.address) || "UNKNOWN SECTOR", sector: ((y = h.sector) == null ? void 0 : y.toUpperCase()) || "GENERAL", time: d, status: h.riskLevel === "Crisis" ? "CRITICAL" : "WARNING", impacts: ((p = h.aiAnalysis) == null ? void 0 : p.impacts) || [`NON-COMPLIANCE DETECTED: ${h.sector}`, "IMMEDIATE INTERVENTION REQUIRED"], team: h.assignedTo ? "UNIT DEPLOYED" : "AWAITING DISPATCH" } }); return o.jsxs("div", { className: "cc-emergency-section", style: { background: "#FEF2F2", border: "1px solid #FECACA", borderRadius: "8px", color: "#991B1B", boxShadow: "0 1px 3px rgba(0,0,0,0.1)" }, children: [o.jsxs("div", { className: "cc-emergency-header", style: { borderBottom: "1px solid #7f1d1d", paddingBottom: "12px", marginBottom: "15px" }, children: [o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "10px", color: "#ef4444", textTransform: "uppercase", letterSpacing: "1px" }, children: [o.jsx(rn, { size: 20, className: "animate-pulse" }), o.jsxs("span", { children: ["Critical Incidents (", s.length, ")"] })] }), o.jsx("div", { style: { fontSize: "10px", color: "#9ca3af", fontFamily: "monospace" }, children: "STATUS: URGENT ACTION REQUIRED" })] }), o.jsx("div", { className: "cc-emergency-list", children: s.length === 0 ? o.jsxs("div", { style: { padding: "2rem", textAlign: "center", color: "#4b5563", fontFamily: "monospace" }, children: [o.jsx("div", { children: "ALL SECTORS STABLE" }), o.jsx("div", { style: { fontSize: "10px", marginTop: "5px" }, children: "NO CRITICAL ALERTS" })] }) : s.map(h => o.jsxs("div", { className: "cc-alert-card", style: { background: "#1f2937", border: "1px solid #374151", borderLeft: `4px solid ${h.status === "CRITICAL" ? "#ef4444" : "#f59e0b"}`, marginBottom: "10px", boxShadow: "none" }, children: [o.jsxs("div", { className: "cc-alert-header", style: { marginBottom: "8px" }, children: [o.jsxs("div", { className: "flex items-center gap-2", children: [o.jsxs("span", { style: { color: h.status === "CRITICAL" ? "#ef4444" : "#f59e0b", fontWeight: 800, fontSize: "11px", letterSpacing: "0.5px" }, children: ["[", h.status, "]"] }), o.jsx("span", { style: { fontWeight: 700, fontSize: "13px", color: "white" }, children: h.title })] }), o.jsx("span", { style: { fontFamily: "monospace", background: "#374151", color: "#d1d5db", padding: "2px 6px", borderRadius: "4px", fontSize: "10px" }, children: h.time })] }), o.jsxs("div", { style: { fontSize: "11px", color: "#9ca3af", marginBottom: "10px", fontFamily: "monospace" }, children: ["ðŸ“ ", h.location] }), o.jsxs("div", { className: "cc-alert-details", style: { background: "rgba(0,0,0,0.2)", padding: "8px", borderRadius: "4px" }, children: [o.jsx("div", { style: { fontSize: "10px", color: "#6b7280", marginBottom: "4px", textTransform: "uppercase" }, children: "Strategy Protocol:" }), o.jsx("ul", { style: { paddingLeft: "0", listStyle: "none", margin: 0 }, children: h.impacts.map((u, d) => o.jsxs("li", { style: { marginBottom: "2px", fontSize: "11px", color: "#e5e7eb", display: "flex", alignItems: "center", gap: "6px" }, children: [o.jsx(Tl, { size: 10, color: "#6b7280" }), " ", u] }, d)) })] }), o.jsxs("div", { style: { marginTop: "10px", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "6px" }, children: [o.jsx(Gi, { size: 12, color: h.team === "UNIT DEPLOYED" ? "#10b981" : "#f59e0b" }), o.jsx("span", { style: { fontSize: "11px", fontWeight: 600, color: h.team === "UNIT DEPLOYED" ? "#10b981" : "#f59e0b" }, children: h.team })] }), h.status === "CRITICAL" && o.jsx("button", { style: { background: "#7f1d1d", color: "#fca5a5", border: "1px solid #ef4444", padding: "4px 10px", fontSize: "10px", fontWeight: "bold", borderRadius: "4px", textTransform: "uppercase", cursor: "pointer" }, children: "Authorize Action" })] })] }, h.id)) })] }) }, nh = () => [{ id: "S-101", label: "Main Water Pressure", type: "pressure", value: 85, unit: "PSI", status: "normal", trend: "stable" }, { id: "S-102", label: "Grid Load (Sector 4)", type: "power", value: 92, unit: "%", status: "warning", trend: "rising" }, { id: "S-103", label: "Air Quality Index", type: "env", value: 154, unit: "AQI", status: "warning", trend: "rising" }, { id: "S-104", label: "River Level", type: "water", value: 3.2, unit: "m", status: "normal", trend: "stable" }, { id: "S-105", label: "Traffic Flow (Hwy 5)", type: "traffic", value: 12, unit: "km/h", status: "critical", trend: "falling" }], rh = ({ color: r }) => o.jsx("div", { style: { height: "40px", marginTop: "12px", position: "relative", overflow: "hidden" }, children: o.jsxs("svg", { viewBox: "0 0 100 40", width: "100%", height: "100%", preserveAspectRatio: "none", children: [o.jsx("defs", { children: o.jsxs("linearGradient", { id: `grad-${r}`, x1: "0%", y1: "0%", x2: "0%", y2: "100%", children: [o.jsx("stop", { offset: "0%", stopColor: r, stopOpacity: "0.2" }), o.jsx("stop", { offset: "100%", stopColor: r, stopOpacity: "0" })] }) }), o.jsx("path", { d: "M0,35 Q10,25 20,30 T40,20 T60,25 T80,10 L100,15 L100,40 L0,40 Z", fill: `url(#grad-${r})` }), o.jsx("path", { d: "M0,35 Q10,25 20,30 T40,20 T60,25 T80,10 L100,15", fill: "none", stroke: r, strokeWidth: "2" })] }) }), oh = () => { const l = nh().map(s => ({ ...s, sub: `${s.type.toUpperCase()} â€¢ ${s.id}`, color: s.status === "critical" ? "#ef4444" : s.status === "warning" ? "#f59e0b" : "#10b981" })); return o.jsxs("div", { className: "cc-infra-section", style: { background: "white", border: "1px solid #E5E7EB", borderRadius: "8px", color: "#111827", marginTop: "24px", boxShadow: "0 1px 3px rgba(0,0,0,0.05)" }, children: [o.jsxs("div", { className: "cc-infra-header", style: { color: "#92400E", borderBottom: "1px solid #FEF3C7", paddingBottom: "12px", marginBottom: "15px" }, children: [o.jsx(Lc, { size: 18 }), " Infrastructure Health - Live Monitoring"] }), o.jsx("div", { className: "cc-infra-scroll", children: l.map(s => o.jsxs("div", { className: "cc-sensor-card", style: { background: "#FAFAFA", border: `1px solid ${s.color}40`, borderLeft: `4px solid ${s.color}`, minWidth: "260px", color: "#111827" }, children: [o.jsx("div", { style: { fontSize: "14px", fontWeight: 600, color: "#111827", marginBottom: "2px" }, children: s.label }), o.jsx("div", { style: { fontSize: "10px", fontWeight: 600, color: "#6B7280", textTransform: "uppercase" }, children: s.sub }), o.jsxs("div", { className: "flex items-end gap-2 mt-4", children: [o.jsx("span", { style: { fontSize: "28px", fontWeight: 700, lineHeight: 1, color: s.color }, children: s.value }), o.jsx("span", { style: { fontSize: "12px", fontWeight: 500, color: "#4B5563", marginBottom: "4px" }, children: s.unit })] }), o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "4px", fontSize: "11px", fontWeight: 700, color: s.color, marginTop: "8px", textTransform: "uppercase" }, children: [s.status === "critical" ? o.jsx(Ll, { size: 14 }) : s.status === "warning" ? o.jsx(Ml, { size: 14 }) : o.jsx(nc, { size: 14 }), s.status] }), o.jsx(rh, { color: s.color })] }, s.id)) })] }) }, sh = ({ issues: r = [], onVerify: l, onReject: s }) => { Jt(); const h = r.filter(u => u.source === "citizen" && (u.status === "pending" || u.status === "in-progress") && !u.aiAnalysis).slice(0, 5); return o.jsxs("div", { style: { background: "white", borderRadius: "var(--radius-lg)", border: "1px solid #E5E7EB", padding: "1.5rem", height: "100%", color: "#111827", boxShadow: "0 1px 3px rgba(0,0,0,0.05)" }, children: [o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem", marginBottom: "1.5rem", borderBottom: "1px solid #F3F4F6", paddingBottom: "12px" }, children: [o.jsx(ro, { className: "text-blue-600", size: 24 }), o.jsx("h3", { style: { fontSize: "1.125rem", fontWeight: 700, color: "#111827", textTransform: "uppercase", letterSpacing: "0.5px" }, children: "Citizen Reports" })] }), o.jsx("div", { style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: h.length === 0 ? o.jsx("div", { style: { textAlign: "center", color: "#6B7280", padding: "2rem" }, children: "No pending reports to verify." }) : h.map(u => o.jsx(ah, { report: u, onVerify: () => l(u.id), onReject: () => s(u.id) }, u.id)) })] }) }, ah = ({ report: r, onVerify: l, onReject: s }) => { const [h, u] = g.useState(!1), d = async () => { u(!0), setTimeout(() => { l(), u(!1) }, 1500) }; return o.jsxs("div", { style: { display: "flex", gap: "1rem", padding: "1rem", borderRadius: "var(--radius-md)", background: "#F9FAFB", border: "1px solid #E5E7EB", transition: "transform 0.2s" }, children: [o.jsx("div", { style: { width: "80px", height: "80px", flexShrink: 0, background: "#E5E7EB", borderRadius: "8px", border: "1px solid #D1D5DB", display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center", color: "#6B7280" }, children: r.imageUrl ? o.jsx("img", { src: r.imageUrl, style: { width: "100%", height: "100%", objectFit: "cover", borderRadius: "8px" } }) : o.jsxs(o.Fragment, { children: [o.jsx(Il, { size: 20 }), o.jsx("span", { style: { fontSize: "10px", marginTop: "4px" }, children: "Image" })] }) }), o.jsxs("div", { style: { flex: 1 }, children: [o.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: "0.25rem" }, children: [o.jsx("h4", { style: { fontWeight: 700, fontSize: "0.95rem", color: "#111827", margin: 0 }, children: r.title }), o.jsx("span", { style: { fontSize: "0.7rem", padding: "2px 8px", background: "#EFF6FF", color: "#2563EB", borderRadius: "4px", fontWeight: 600, border: "1px solid #DBEAFE" }, children: "NEW" })] }), o.jsxs("p", { style: { fontSize: "0.8rem", color: "#4B5563", marginBottom: "0.75rem", lineHeight: "1.4" }, children: [(r.description || "No description available").substring(0, 60), "..."] }), o.jsxs("div", { style: { display: "flex", gap: "0.75rem" }, children: [o.jsx("button", { onClick: d, disabled: h, style: { padding: "6px 12px", fontSize: "0.8rem", fontWeight: 600, borderRadius: "4px", background: "#2563EB", border: "none", color: "white", cursor: "pointer", display: "flex", alignItems: "center", gap: "4px" }, children: h ? o.jsx(o.Fragment, { children: o.jsx("span", { children: "Scanning..." }) }) : o.jsxs(o.Fragment, { children: [o.jsx(no, { size: 14 }), " Verify"] }) }), o.jsx("button", { onClick: s, style: { padding: "6px 12px", fontSize: "0.8rem", fontWeight: 500, borderRadius: "6px", background: "white", border: "1px solid #FCA5A5", color: "#DC2626", cursor: "pointer" }, children: "Reject" })] })] })] }) }, lh = () => { const { issues: r, setIssues: l } = Ur() || { issues: [], setIssues: () => { } }, [s, h] = Ht.useState("ALL"), u = Ht.useMemo(() => s === "ALL" ? r : r.filter(d => { var f; return ((f = d.sector) == null ? void 0 : f.toUpperCase()) === s }), [r, s]); return o.jsxs("div", { className: "flex flex-col h-full bg-white", children: [o.jsxs("div", { className: "px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-white sticky top-0 z-20", children: [o.jsx("div", { children: o.jsxs("div", { className: "flex items-center gap-3", children: [o.jsx("div", { className: "p-2 bg-blue-600 rounded-lg shadow-lg shadow-blue-500/30", children: o.jsx("svg", { width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "white", strokeWidth: "2.5", children: o.jsx("path", { d: "M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" }) }) }), o.jsxs("div", { children: [o.jsx("h1", { className: "text-2xl font-bold text-gray-900 tracking-tight leading-none", children: "City Command Center" }), o.jsx("p", { className: "text-xs font-semibold text-gray-500 uppercase tracking-wider mt-1", children: "Intelligent Operations â€¢ Emergency â€¢ Maintenance" })] })] }) }), o.jsxs("div", { className: "flex items-center gap-4", children: [o.jsxs("div", { className: "flex items-center gap-2 px-3 py-1.5 bg-green-50 text-green-700 rounded-full border border-green-200", children: [o.jsx("div", { className: "w-2 h-2 bg-green-500 rounded-full animate-pulse" }), o.jsx("span", { className: "text-xs font-bold", children: "SYSTEM ONLINE" })] }), o.jsx("div", { className: "h-8 w-px bg-gray-200" }), o.jsxs("div", { className: "flex items-center gap-3", children: [o.jsxs("select", { value: s, onChange: d => h(d.target.value), className: "bg-white border border-gray-300 text-gray-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5", style: { fontWeight: 600 }, children: [o.jsx("option", { value: "ALL", children: "All Sectors" }), o.jsx("option", { value: "WATER", children: "Water Supply" }), o.jsx("option", { value: "POWER", children: "Power Grid" }), o.jsx("option", { value: "ROADS", children: "Roads & Traffic" }), o.jsx("option", { value: "WASTE", children: "Waste Management" })] }), o.jsx("div", { className: "h-8 w-px bg-gray-200" }), o.jsxs("div", { className: "text-right hidden md:block", children: [o.jsx("div", { className: "text-sm font-bold text-gray-900", children: "Admin Authority" }), o.jsx("div", { className: "text-xs text-gray-500", children: "Ward A-4 Control" })] }), o.jsx("div", { className: "w-10 h-10 rounded-full bg-slate-200 flex items-center justify-center border border-slate-300", children: o.jsx("span", { className: "font-bold text-slate-600", children: "AA" }) })] })] })] }), o.jsxs("div", { className: "cc-container pt-6", children: [o.jsx("div", { className: "cc-left-col", children: o.jsx(th, { issues: u }) }), o.jsxs("div", { className: "cc-right-col", children: [o.jsx(eh, { issues: u }), o.jsx("div", { style: { marginBottom: "1rem" }, children: o.jsx(sh, { issues: u, onVerify: d => { const f = r.map(y => y.id === d ? { ...y, status: "in-progress", aiAnalysis: { ...y.aiAnalysis, isReal: !0 } } : y); l(f) }, onReject: d => { const f = r.map(y => y.id === d ? { ...y, status: "rejected" } : y); l(f) } }) }), o.jsx(ih, { issues: u }), o.jsx(oh, {})] })] })] }) }, ch = () => { const r = Jt(), [l, s] = g.useState(ai), [h, u] = g.useState(!1), [d, f] = g.useState("all"), [y, p] = g.useState("all"), [S, b] = g.useState(""), [x, j] = g.useState({ key: "reportedAt", direction: "desc" }), { issues: T } = Ur() || {}; g.useEffect(() => { T && T.length > 0 && s(T) }, [T]); const A = g.useMemo(() => { let C = [...l]; if (d !== "all" && (C = C.filter(_ => _.status === d)), y !== "all" && (C = C.filter(_ => _.sector === y)), S) { const _ = S.toLowerCase(); C = C.filter(P => P.title.toLowerCase().includes(_) || P.id.toLowerCase().includes(_) || P.location.address.toLowerCase().includes(_)) } return C.sort((_, P) => _[x.key] < P[x.key] ? x.direction === "asc" ? -1 : 1 : _[x.key] > P[x.key] ? x.direction === "asc" ? 1 : -1 : 0), C }, [d, y, S, x]), E = C => { let _ = "asc"; x.key === C && x.direction === "asc" && (_ = "desc"), j({ key: C, direction: _ }) }, M = C => { var _; return ((_ = $t.find(P => P.id === C)) == null ? void 0 : _.label) || C }; return o.jsxs("div", { className: "animate-fade-in flex-col h-full", children: [o.jsxs("header", { className: "page-header", children: [o.jsxs("div", { children: [o.jsx("h1", { className: "page-title", children: "Issue Management" }), o.jsx("p", { className: "text-muted", children: "Track, verify, and resolve civic complaints." })] }), o.jsx("button", { className: "btn btn-primary", onClick: () => r("/issues/new"), children: "+ Log Manual Issue" })] }), o.jsxs("div", { className: "data-grid-container", children: [o.jsxs("div", { style: { padding: "16px 24px", borderBottom: "1px solid var(--cc-border)", background: "#F9FAFB" }, className: "flex-row items-center gap-md", children: [o.jsxs("div", { style: { position: "relative", flex: 1, minWidth: "240px" }, children: [o.jsx(kr, { size: 16, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)" }, className: "text-muted" }), o.jsx("input", { type: "text", placeholder: "Search issues...", value: S, onChange: C => b(C.target.value), className: "input-std", style: { paddingLeft: "40px" } })] }), o.jsxs("div", { className: "flex-row gap-sm", children: [o.jsxs("div", { style: { position: "relative" }, children: [o.jsxs("select", { value: d, onChange: C => f(C.target.value), className: "input-std", style: { paddingRight: "32px", cursor: "pointer", appearance: "none" }, children: [o.jsx("option", { value: "all", children: "All Statuses" }), o.jsx("option", { value: "pending", children: "Pending" }), o.jsx("option", { value: "in-progress", children: "In Progress" }), o.jsx("option", { value: "completed", children: "Completed" })] }), o.jsx(ql, { size: 14, style: { position: "absolute", right: "12px", top: "50%", transform: "translateY(-50%)", pointerEvents: "none" }, className: "text-muted" })] }), o.jsxs("select", { value: y, onChange: C => p(C.target.value), className: "input-std", style: { cursor: "pointer" }, children: [o.jsx("option", { value: "all", children: "All Sectors" }), $t.map(C => o.jsx("option", { value: C.id, children: C.label }, C.id))] })] })] }), o.jsx("div", { style: { overflow: "auto", flex: 1 }, children: o.jsxs("table", { className: "data-grid", children: [o.jsx("thead", { children: o.jsx("tr", { children: [{ key: "id", label: "ID", width: "100px" }, { key: "title", label: "Issue Details", flex: !0 }, { key: "ai", label: "Verification", width: "140px" }, { key: "sector", label: "Sector", width: "150px" }, { key: "risk", label: "Risk Level", width: "130px" }, { key: "status", label: "Status", width: "120px" }, { key: "reportedAt", label: "Reported", width: "100px" }, { key: "action", label: "", width: "50px" }].map(C => o.jsx("th", { style: { width: C.width || "auto", cursor: C.flex ? "pointer" : "default" }, onClick: () => C.flex && E(C.key), children: o.jsxs("div", { className: "flex-row items-center gap-sm", children: [C.label, C.flex && o.jsx(jl, { size: 12 })] }) }, C.key)) }) }), o.jsxs("tbody", { children: [A.map(C => { var _; return o.jsxs("tr", { onClick: () => r(`/issues/${C.id}`), children: [o.jsx("td", { className: "font-bold", style: { fontFamily: "monospace", color: "var(--cc-info)" }, children: C.id }), o.jsxs("td", { children: [o.jsx("div", { style: { fontWeight: 600, color: "var(--cc-text-primary)", marginBottom: "4px" }, children: C.title }), o.jsx("div", { className: "text-muted", style: { fontSize: "12px" }, children: C.location.address })] }), o.jsx("td", { children: C.aiAnalysis ? o.jsx("span", { className: `badge ${C.aiAnalysis.isReal ? "badge-completed" : "badge-rejected"}`, children: C.aiAnalysis.isReal ? "REAL" : "FAKE" }) : o.jsx("span", { className: "text-muted", style: { fontSize: "12px", fontStyle: "italic" }, children: "Pending" }) }), o.jsx("td", { children: o.jsxs("span", { className: "flex-row items-center gap-sm", style: { fontSize: "13px" }, children: [o.jsx("div", { style: { width: 6, height: 6, borderRadius: "50%", background: ((_ = $t.find(P => P.id === C.sector)) == null ? void 0 : _.color) || "gray" } }), M(C.sector)] }) }), o.jsx("td", { children: o.jsx("span", { className: `badge badge-${C.status}`, children: C.status.replace("-", " ") }) }), o.jsx("td", { children: o.jsx("div", { className: "flex-row items-center gap-xs", children: o.jsx("span", { style: { padding: "4px 8px", borderRadius: "4px", fontSize: "12px", fontWeight: 700, textTransform: "uppercase", backgroundColor: C.riskLevel === "Crisis" ? "#FEF2F2" : C.riskLevel === "Critical" ? "#FFF7ED" : "#F0FDF4", color: C.riskLevel === "Crisis" ? "#DC2626" : C.riskLevel === "Critical" ? "#EA580C" : "#16A34A", border: `1px solid ${C.riskLevel === "Crisis" ? "#FECACA" : C.riskLevel === "Critical" ? "#FED7AA" : "#BBF7D0"}` }, children: C.riskLevel || "Normal" }) }) }), o.jsx("td", { className: "text-muted", style: { whiteSpace: "nowrap", fontSize: "13px" }, children: new Date(C.reportedAt).toLocaleDateString() }), o.jsx("td", { style: { textAlign: "right" }, children: o.jsx(Ol, { size: 18, className: "text-muted" }) })] }, C.id) }), A.length === 0 && o.jsx("tr", { children: o.jsxs("td", { colSpan: "8", style: { padding: "64px", textAlign: "center" }, children: [o.jsx("div", { style: { background: "#F3F4F6", width: 64, height: 64, borderRadius: "50%", display: "grid", placeItems: "center", margin: "0 auto 16px auto" }, children: o.jsx(kr, { size: 24, className: "text-muted" }) }), o.jsx("p", { style: { fontWeight: 500, marginBottom: "8px" }, children: "No issues found" }), o.jsx("p", { className: "text-muted", style: { fontSize: "13px" }, children: "Try adjusting your search or filters." })] }) })] })] }) }), o.jsxs("div", { style: { padding: "12px 24px", borderTop: "1px solid var(--cc-border)", background: "#F9FAFB", fontSize: "12px" }, className: "flex-row justify-between text-muted", children: [o.jsxs("span", { children: ["Showing ", A.length, " issues"] }), o.jsx("span", { children: "Page 1 of 1" })] })] })] }) }, hh = [{ id: "CAT_10", name: "Environmental & Ecological Impact", keywords: ["groundwater", "contamination", "river", "lake", "pollution", "soil", "wildlife", "tree", "air pollution", "chemical", "spill", "oil", "fuel", "fish death", "sewage", "wetland", "ecological", "protected zone", "ecosystem", "climate"], score: 30, escalation: "Pollution Control Board", impact: "Ecological Crisis" }, { id: "CAT_11", name: "Financial & Economic Impact", keywords: ["lakh", "loss", "shutdown", "market", "supply chain", "tourism", "industrial", "insurance", "liability", "compensation", "litigation", "budget", "overrun", "write-off", "penalty", "investor", "corruption", "fund"], score: 25, escalation: "Finance Dept", impact: "Economic Risk" }, { id: "CAT_12", name: "Reputation & Public Trust", keywords: ["viral", "influencer", "opposition", "political", "trust", "failure", "apology", "protest", "media", "press", "sentiment", "kpi", "scandal", "trending"], score: 20, escalation: "Public Relations / Commissioner", impact: "Reputational Risk" }, { id: "CAT_13", name: "Fraud & Data Integrity", keywords: ["fake image", "duplicate", "bot", "spam", "insider", "manipulation", "conflict of interest", "spoof", "timestamp", "inconsistent", "motive", "suspicious"], score: 0, action: "downgrade_confidence", impact: "Data Integrity Flag" }, { id: "CAT_14", name: "Cascading Failure & Systemic Risk", keywords: ["chain reaction", "multi-department", "transport", "power", "water", "healthcare", "hospital", "fire", "interlock", "drain", "road collapse", "flood", "mixing", "smart city", "network", "destabilization", "disaster"], score: 35, escalation: "Disaster Management Cell", impact: "Systemic Failure Risk" }, { id: "CAT_15", name: "Temporal Severity Dynamics", keywords: ["growth rate", "doubling", "irreversible", "window closing", "exponential", "safety margin", "buffer exhausted", "deadline", "urgent", "spreading"], score: 20, escalation: "Rapid Response Team", impact: "Time-Critical" }, { id: "CAT_16", name: "Social Equity & Human Impact", keywords: ["marginalized", "disability", "access", "women", "child", "daily wage", "shelter", "homeless", "food", "vulnerable", "slum", "low-income"], score: 25, escalation: "Social Welfare Dept", impact: "Human Rights/Equity" }, { id: "CAT_17", name: "Infrastructure Criticality", keywords: ["tier-1", "redundancy", "maintenance", "failure probability", "capacity", "construction", "vendor", "blacklisted", "collapse history", "critical asset", "main line"], score: 25, escalation: "Chief Engineer", impact: "Critical Infrastructure" }, { id: "CAT_18", name: "AI Confidence Factors", keywords: ["conflicting", "clarity", "unclear", "noise", "uncertainty", "override", "manual verification"], score: 0, action: "flag_uncertainty", impact: "Low Confidence" }, { id: "CAT_19", name: "Cross-Jurisdiction Dependencies", keywords: ["state agency", "central", "railway", "airport", "defense", "army", "navy", "national highway", "nhai"], score: 15, escalation: "External Liaison Officer", impact: "Jurisdictional Issue" }, { id: "CAT_20", name: "Post-Resolution Risk", keywords: ["recurrence", "unresolved", "root cause", "patch", "temporary", "follow-up", "audit"], score: 10, escalation: "Audit & Vigilance", impact: "Chronic/Recurrent" }], uh = (r, l = []) => { var M, C, _, P; let s = 0; const h = []; let u = [], d = null, f = 0, p = { high: 30, medium: 20, low: 10 }[(M = r.severity) == null ? void 0 : M.toLowerCase()] || 10; const S = ["death", "injury", "blood", "electrocution", "fire", "explosion", "collapse", "drowning"], b = (r.description + " " + (r.title || "") + " " + (((_ = (C = r.metadata) == null ? void 0 : C.device) == null ? void 0 : _.userAgent) || "")).toLowerCase(); S.some(R => b.includes(R)) && (p = 50, u.push("Detected immediate risk to life/safety."), d = "Disaster Management"), s += p, h.push({ name: "Base Severity", value: p, type: "base" }), hh.forEach(R => { R.keywords.some(G => b.includes(G)) && (R.action === "downgrade_confidence" ? (f -= .4, h.push({ name: R.name, value: -99, type: "warning" }), u.push(`Possible ${R.name.toLowerCase()} suspected.`)) : R.action === "flag_uncertainty" ? (f -= .2, u.push(`Data uncertainty detected (${R.name}).`)) : (s += R.score, h.push({ name: R.name, value: R.score, type: "risk" }), u.push(`${R.impact} detected.`), R.escalation && (!d || R.score > 20) && (d = R.escalation))) }), l.filter(R => R.status === "critical" || R.status === "warning").length > 0 && (s += 20, h.push({ name: "IoT Sensor Confirmation", value: 20, type: "sensor" }), u.push("Verified by nearby critical sensor alerts.")); let j = ((P = r.aiAnalysis) == null ? void 0 : P.confidence) || .8; j = Math.max(0, Math.min(1, j + f)), r.aiAnalysis && !r.aiAnalysis.isReal || j < .4 ? (s = 0, u = ["Flagged as AI-generated, Fake, or Low Confidence. Priority dropped to zero."], h.push({ name: "Fraud/Confidence Failure", value: -100, type: "penalty" }), d = "Vigilance Cell") : j > .9 && (s += 5, h.push({ name: "High Confidence Bonus", value: 5, type: "ai" })), s = Math.max(0, Math.min(100, s)); let T = "Operational", A = "var(--color-emerald-500)"; s >= 85 ? (T = "Crisis", A = "#ef4444", d || (d = "Municipal Commissioner")) : s >= 60 ? (T = "Critical", A = "#f97316", d || (d = "Zonal Head")) : s >= 40 && (T = "Moderate", A = "#eab308"); let E = "Standard maintenance request."; if (u.length > 0) { const R = [...new Set(u)]; s >= 60 ? E = `Priority escalated: ${R.slice(0, 2).join(" + ")}.` : E = R.join(" ") } return { score: s, label: T, color: A, breakdown: h, advancedAnalysis: { riskLevel: T, explanation: E, confidence: parseFloat(j.toFixed(2)), escalation: d || "Sector Officer" } } }, dh = () => { var C; const { id: r } = Sa(), l = Jt(), [s, h] = g.useState(null), [u, d] = g.useState([]), [f, y] = g.useState(!0), [p, S] = g.useState(""); g.useEffect(() => { (async () => { try { await new Promise(R => setTimeout(R, 300)); const P = ai.find(R => R.id === r); P ? h(P) : console.error("Issue not found in mock data:", r), d([]) } catch (P) { console.error("Failed to fetch data", P) } finally { y(!1) } })() }, [r]); const b = g.useMemo(() => s ? Pc(s.location.lat, s.location.lng, s.sector) : [], [s]), x = g.useMemo(() => s ? uh(s, b) : null, [s, b]); if (f) return o.jsx("div", { style: { padding: "2rem" }, children: "Loading..." }); if (!s) return o.jsx("div", { style: { padding: "2rem" }, children: "Issue not found" }); const j = u.length > 0 ? u.map(_ => ({ note: _.note || `Status changed to ${_.newStatus}`, timestamp: _.timestamp })) : s.timeline || [], T = () => { const _ = { note: "AI Priority Accepted. Status updated to In Progress.", timestamp: new Date().toISOString(), user: "Admin", newStatus: "in-progress" }; d(P => [_, ...P]), h(P => ({ ...P, status: "in-progress" })) }, A = () => { const _ = prompt("Enter new priority (Low/Medium/High):", "Medium"); if (_) { const P = { note: `Priority overridden to ${_} by Admin.`, timestamp: new Date().toISOString(), user: "Admin" }; d(R => [P, ...R]), h(R => ({ ...R, priority: _ })) } }, E = () => { if (!p.trim()) return; const _ = { note: p, timestamp: new Date().toISOString(), user: "Admin", type: "comment" }; d(P => [_, ...P]), S("") }, M = () => { const _ = { note: "Attached file: site_photo_v2.jpg", timestamp: new Date().toISOString(), user: "Admin", type: "system" }; d(P => [_, ...P]) }; return o.jsxs("div", { className: "animate-fade-in", children: [o.jsxs("button", { onClick: () => l("/issues"), className: "btn btn-ghost", style: { marginBottom: "1rem", paddingLeft: 0, display: "flex", alignItems: "center", gap: "0.5rem" }, children: [o.jsx(Pl, { size: 16 }), " Back to Issues"] }), o.jsx("header", { style: { marginBottom: "2rem" }, children: o.jsxs("div", { style: { display: "flex", gap: "1rem", alignItems: "start" }, children: [o.jsxs("div", { style: { flex: 1 }, children: [o.jsxs("div", { style: { display: "flex", gap: "1rem", alignItems: "center", marginBottom: "0.5rem" }, children: [o.jsx("span", { className: "badge", style: { background: "var(--color-bg-surface)", border: "1px solid var(--color-border)" }, children: s.id }), o.jsx("span", { className: `badge badge-${s.status}`, children: s.status.replace("-", " ") })] }), o.jsx("h1", { style: { fontSize: "2rem", marginBottom: "0.5rem" }, children: s.title }), o.jsxs("div", { style: { display: "flex", gap: "1.5rem", color: "var(--color-text-muted)", fontSize: "0.9rem" }, children: [o.jsxs("span", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [o.jsx(io, { size: 16 }), " ", s.location.address] }), o.jsxs("span", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [o.jsx(eo, { size: 16 }), " Reported: ", new Date(s.reportedAt).toLocaleDateString()] })] })] }), s.severity && o.jsxs("div", { style: { textAlign: "right" }, children: [o.jsx("div", { style: { fontSize: "0.875rem", color: "var(--color-text-muted)", marginBottom: "0.25rem" }, children: "Severity" }), o.jsxs("div", { style: { display: "inline-flex", alignItems: "center", gap: "0.5rem", padding: "0.5rem 1rem", borderRadius: "var(--radius-md)", background: s.severity === "high" ? "rgba(239, 68, 68, 0.1)" : "rgba(245, 158, 11, 0.1)", color: s.severity === "high" ? "var(--color-red-500)" : "var(--color-amber-600)", fontWeight: 600 }, children: [o.jsx(rn, { size: 18 }), " ", s.severity.toUpperCase()] })] })] }) }), o.jsxs("div", { style: { display: "grid", gridTemplateColumns: "2fr 1fr", gap: "2rem" }, children: [o.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2rem" }, children: [x && o.jsxs("div", { className: "card", style: { padding: 0, overflow: "hidden", border: "1px solid var(--color-border)" }, children: [o.jsxs("div", { style: { padding: "1rem 1.5rem", background: "var(--color-bg-surface)", borderBottom: "1px solid var(--color-border)", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [o.jsx("div", { style: { color: "var(--color-primary)" }, children: o.jsx(Gi, { size: 20 }) }), o.jsx("h3", { style: { fontSize: "1rem", margin: 0, color: "var(--color-text-primary)" }, children: "AI DECISION SUPPORT" })] }), o.jsxs("div", { style: { padding: "1.5rem" }, children: [o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "2rem", marginBottom: "2rem" }, children: [o.jsx("div", { style: { width: 80, height: 80, borderRadius: "50%", background: `conic-gradient(${x.color} ${x.score}%, #E5E7EB 0)`, display: "grid", placeItems: "center", position: "relative" }, children: o.jsx("div", { style: { width: 68, height: 68, borderRadius: "50%", background: "white", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center" }, children: o.jsx("span", { style: { fontSize: "1.5rem", fontWeight: 800, lineHeight: 1, color: x.color }, children: Math.round(x.score) }) }) }), o.jsxs("div", { children: [o.jsx("div", { style: { fontSize: "0.75rem", fontWeight: 700, color: "var(--color-text-muted)", letterSpacing: "0.05em" }, children: "PRIORITY LEVEL" }), o.jsx("div", { style: { fontSize: "1.75rem", fontWeight: 800, color: x.color }, children: x.advancedAnalysis.riskLevel || x.label })] })] }), o.jsx("div", { style: { width: "100%", height: 1, background: "#E5E7EB", marginBottom: "1.5rem" } }), o.jsxs("div", { style: { marginBottom: "2rem" }, children: [o.jsx("div", { style: { fontSize: "0.75rem", fontWeight: 700, color: "var(--color-text-muted)", marginBottom: "1rem", textTransform: "uppercase" }, children: "WHY THIS SCORE?" }), o.jsxs("ul", { style: { margin: 0, paddingLeft: "1rem", listStyle: "disc", color: "var(--color-text-secondary)", fontSize: "0.9rem", lineHeight: "1.6" }, children: [o.jsxs("li", { style: { marginBottom: "0.5rem" }, children: [o.jsx("strong", { children: "Analysis:" }), " ", x.advancedAnalysis.explanation] }), x.breakdown.filter(_ => Math.abs(_.value) > 0).map((_, P) => o.jsxs("li", { children: [o.jsxs("span", { style: { textTransform: "uppercase", fontSize: "0.8rem", fontWeight: 600 }, children: [_.name, ":"] }), o.jsxs("span", { style: { marginLeft: "0.5rem", fontFamily: "monospace", fontWeight: 700, color: _.value > 0 && _.type === "risk" ? "#DC2626" : "#059669" }, children: [_.value > 0 ? "+" : "", _.value, " pts"] })] }, P))] })] }), o.jsxs("div", { style: { background: "#F9FAFB", borderRadius: "var(--radius-md)", padding: "1rem", marginBottom: "1.5rem" }, children: [o.jsx("div", { style: { fontSize: "0.75rem", fontWeight: 700, color: "var(--color-text-muted)", marginBottom: "0.75rem", textTransform: "uppercase" }, children: "SUGGESTED ACTION" }), o.jsxs("div", { style: { display: "flex", justifyContent: "space-between", fontSize: "0.9rem" }, children: [o.jsxs("div", { children: [o.jsx("div", { style: { color: "var(--color-text-muted)", fontSize: "0.8rem" }, children: "Team:" }), o.jsx("div", { style: { fontWeight: 600 }, children: x.advancedAnalysis.escalation })] }), o.jsxs("div", { style: { textAlign: "right" }, children: [o.jsx("div", { style: { color: "var(--color-text-muted)", fontSize: "0.8rem" }, children: "Est. Time:" }), o.jsx("div", { style: { fontWeight: 600 }, children: x.score > 80 ? "24 Hours" : x.score > 50 ? "72 Hours" : "7 Days" })] })] })] }), o.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [o.jsx("button", { onClick: T, className: "btn", style: { flex: 1, background: "var(--color-emerald-500)", color: "white", border: "none" }, children: "Accept" }), o.jsx("button", { onClick: A, className: "btn", style: { flex: 1, background: "white", border: "1px solid var(--color-border)", color: "var(--color-text-primary)" }, children: "Override" })] })] })] }), s.evidenceCheck && o.jsxs("div", { className: "card", style: { borderLeft: `4px solid ${s.evidenceCheck.isInconsistent ? "var(--color-red-500)" : "var(--color-emerald-500)"}` }, children: [o.jsxs("h3", { style: { display: "flex", alignItems: "center", gap: "0.5rem", marginBottom: "1rem", color: s.evidenceCheck.isInconsistent ? "var(--color-red-500)" : "var(--color-emerald-500)" }, children: [s.evidenceCheck.isInconsistent ? o.jsx(nn, { size: 20 }) : o.jsx(Dl, { size: 20 }), "Evidence Consistency Check"] }), o.jsxs("div", { style: { display: "flex", gap: "2rem", alignItems: "center", marginBottom: "1rem" }, children: [o.jsxs("div", { children: [o.jsx("div", { style: { fontSize: "0.875rem", color: "var(--color-text-muted)" }, children: "Consistency Score" }), o.jsxs("div", { style: { fontSize: "1.5rem", fontWeight: 700, color: s.evidenceCheck.consistencyScore < 50 ? "var(--color-red-500)" : "var(--color-emerald-500)" }, children: [s.evidenceCheck.consistencyScore, "%"] })] }), o.jsxs("div", { style: { flex: 1 }, children: [o.jsx("div", { style: { fontSize: "0.875rem", color: "var(--color-text-muted)" }, children: "Validation Status" }), o.jsx("div", { style: { fontWeight: 500 }, children: s.evidenceCheck.isInconsistent ? "Inconsistent Data Detected" : "Evidence Verified Consistent" })] })] }), s.evidenceCheck.flags && s.evidenceCheck.flags.length > 0 && o.jsxs("div", { style: { background: "rgba(0,0,0,0.2)", padding: "1rem", borderRadius: "var(--radius-md)" }, children: [o.jsx("div", { style: { fontSize: "0.875rem", fontWeight: 600, marginBottom: "0.5rem", color: "var(--color-text-muted)" }, children: "Flagged Inconsistencies:" }), o.jsx("ul", { style: { margin: 0, paddingLeft: "1.5rem", color: "var(--color-red-400)" }, children: s.evidenceCheck.flags.map((_, P) => o.jsx("li", { children: _ }, P)) })] }), o.jsxs("div", { style: { marginTop: "1rem", fontSize: "0.75rem", color: "var(--color-text-muted)" }, children: ["Validated at: ", new Date(s.evidenceCheck.validatedAt).toLocaleString()] })] }), o.jsxs("div", { className: "card", children: [o.jsx("h3", { style: { marginBottom: "1rem" }, children: "Description" }), o.jsx("p", { style: { color: "var(--color-text-secondary)", lineHeight: "1.6" }, children: s.description }), o.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: "2rem", marginTop: "1.5rem", paddingTop: "1.5rem", borderTop: "1px solid var(--color-border)" }, children: [o.jsxs("div", { children: [o.jsx("div", { style: { fontSize: "0.75rem", fontWeight: 700, color: "var(--color-text-muted)", marginBottom: "0.25rem" }, children: "SECTOR" }), o.jsx("div", { style: { fontWeight: 600 }, children: ((C = $t.find(_ => _.id === s.sector)) == null ? void 0 : C.label) || s.sector })] }), o.jsxs("div", { children: [o.jsx("div", { style: { fontSize: "0.75rem", fontWeight: 700, color: "var(--color-text-muted)", marginBottom: "0.25rem" }, children: "SEVERITY" }), o.jsx("div", { style: { fontWeight: 600 }, children: s.severity })] }), o.jsxs("div", { children: [o.jsx("div", { style: { fontSize: "0.75rem", fontWeight: 700, color: "var(--color-text-muted)", marginBottom: "0.25rem" }, children: "ASSIGNED TO" }), o.jsx("div", { style: { fontWeight: 600 }, children: s.assignedTo ? `Staff ${s.assignedTo}` : "Unassigned" })] })] })] }), o.jsxs("div", { className: "card", children: [o.jsx("h3", { style: { marginBottom: "1.5rem" }, children: "Activity & Comments" }), o.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem", marginBottom: "2rem" }, children: [o.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [o.jsx("div", { style: { width: 32, height: 32, borderRadius: "50%", background: "#F3F4F6", display: "grid", placeItems: "center", fontSize: "12px" }, children: "ðŸ¤–" }), o.jsxs("div", { style: { flex: 1 }, children: [o.jsxs("div", { style: { fontSize: "0.85rem", fontWeight: 600, marginBottom: "0.25rem", display: "flex", justifyContent: "space-between" }, children: [o.jsx("span", { children: "System" }), o.jsx("span", { style: { color: "var(--color-text-muted)", fontWeight: 400 }, children: new Date(s.reportedAt).toLocaleDateString() })] }), o.jsx("div", { style: { fontSize: "0.9rem", color: "var(--color-text-secondary)", background: "#F9FAFB", padding: "0.75rem", borderRadius: "0 8px 8px 8px" }, children: "Issue reported via Citizen App." })] })] }), j.map((_, P) => o.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [o.jsx("div", { style: { width: 32, height: 32, borderRadius: "50%", background: _.user === "Admin" ? "var(--color-primary)" : "#10B981", display: "grid", placeItems: "center", color: "white", fontSize: "12px" }, children: _.user === "Admin" ? o.jsx(ri, { size: 16 }) : o.jsx(Gi, { size: 16 }) }), o.jsxs("div", { style: { flex: 1 }, children: [o.jsxs("div", { style: { fontSize: "0.85rem", fontWeight: 600, marginBottom: "0.25rem", display: "flex", justifyContent: "space-between" }, children: [o.jsx("span", { children: _.user === "Admin" ? "Admin" : "Activity Log" }), o.jsx("span", { style: { color: "var(--color-text-muted)", fontWeight: 400 }, children: new Date(_.timestamp).toLocaleDateString() })] }), o.jsx("div", { style: { fontSize: "0.9rem", color: "var(--color-text-secondary)", background: _.user === "Admin" ? "#F0F9FF" : "#F9FAFB", padding: "0.75rem", borderRadius: "0 8px 8px 8px" }, children: _.note })] })] }, P))] }), o.jsxs("div", { style: { display: "flex", gap: "1rem", alignItems: "start" }, children: [o.jsx("div", { style: { width: 32, height: 32, borderRadius: "50%", background: "#1e293b", color: "white", display: "grid", placeItems: "center" }, children: o.jsx(ri, { size: 16 }) }), o.jsxs("div", { style: { flex: 1 }, children: [o.jsx("textarea", { className: "input-std", placeholder: "Add an internal note or update...", style: { width: "100%", minHeight: "80px", marginBottom: "0.75rem", resize: "vertical" }, value: p, onChange: _ => S(_.target.value) }), o.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [o.jsxs("div", { style: { display: "flex", gap: "0.5rem" }, children: [o.jsx("button", { onClick: M, className: "btn btn-ghost", style: { fontSize: "0.8rem", padding: "0.25rem 0.5rem" }, children: "Attach File" }), o.jsx("button", { className: "btn btn-ghost", style: { fontSize: "0.8rem", padding: "0.25rem 0.5rem", color: "var(--color-primary)" }, children: "âœ¨ AI Draft" })] }), o.jsx("button", { onClick: E, className: "btn btn-primary", style: { padding: "0.5rem 1.5rem" }, children: "Post Comment" })] })] })] })] }), o.jsxs("div", { className: "card", children: [o.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: [o.jsx("h3", { children: "Real-time Sensor Readings" }), o.jsx("span", { style: { fontSize: "0.875rem", color: "var(--color-text-muted)" }, children: "Vicinity: 500m" })] }), b.length > 0 ? o.jsx("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(200px, 1fr))", gap: "1rem" }, children: b.map(_ => o.jsxs("div", { style: { padding: "1rem", background: "var(--color-bg-body)", borderRadius: "var(--radius-md)", border: _.status === "normal" ? "1px solid transparent" : `1px solid ${_.status === "critical" ? "var(--color-red-500)" : "var(--color-amber-500)"}` }, children: [o.jsx("div", { style: { fontSize: "0.8rem", color: "var(--color-text-muted)", marginBottom: "0.5rem" }, children: _.label }), o.jsxs("div", { style: { fontSize: "1.5rem", fontWeight: 700, marginBottom: "0.25rem", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [o.jsxs("span", { children: [_.value, " ", o.jsx("span", { style: { fontSize: "1rem", fontWeight: 400, color: "var(--color-text-muted)" }, children: _.unit })] }), _.trend && o.jsxs("span", { style: { fontSize: "0.75rem", color: "var(--color-text-muted)", background: "var(--color-border)", padding: "2px 6px", borderRadius: 4, fontWeight: 600 }, children: [_.trend === "rising" ? "â†‘" : _.trend === "falling" ? "â†“" : "â†’", " ", _.trend.toUpperCase()] })] }), o.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", fontSize: "0.8rem" }, children: [o.jsx("div", { style: { width: 8, height: 8, borderRadius: "50%", background: _.status === "normal" ? "var(--color-emerald-500)" : _.status === "warning" ? "var(--color-amber-500)" : "var(--color-red-500)" } }), o.jsx("span", { style: { textTransform: "capitalize" }, children: _.status })] })] }, _.id)) }) : o.jsx("div", { style: { padding: "2rem", textAlign: "center", color: "var(--color-text-muted)", background: "var(--color-bg-body)", borderRadius: "var(--radius-md)" }, children: "No IoT sensors detected in this sector/location." })] })] }), o.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [o.jsxs("div", { className: "card", children: [o.jsx("h3", { style: { marginBottom: "1rem", fontSize: "1rem" }, children: "Timeline" }), o.jsx("div", { style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: j.map((_, P) => o.jsxs("div", { style: { display: "flex", gap: "0.75rem" }, children: [o.jsxs("div", { style: { display: "flex", flexDirection: "column", alignItems: "center" }, children: [o.jsx("div", { style: { width: 10, height: 10, borderRadius: "50%", background: "var(--color-primary)", marginTop: 4 } }), P !== j.length - 1 && o.jsx("div", { style: { width: 2, flex: 1, background: "var(--color-border)", marginTop: 4 } })] }), o.jsxs("div", { children: [o.jsx("div", { style: { fontSize: "0.9rem", fontWeight: 500 }, children: _.note }), o.jsx("div", { style: { fontSize: "0.75rem", color: "var(--color-text-muted)" }, children: new Date(_.timestamp).toLocaleString() })] })] }, P)) })] }), o.jsxs("div", { className: "card", children: [o.jsx("h3", { style: { marginBottom: "1rem", fontSize: "1rem" }, children: "Assigned Team" }), s.assignedTo ? o.jsxs("div", { style: { display: "flex", gap: "0.75rem", alignItems: "center" }, children: [o.jsx("div", { style: { width: 40, height: 40, borderRadius: "50%", background: "var(--color-bg-surface)", border: "1px solid var(--color-border)" } }), o.jsxs("div", { children: [o.jsxs("div", { style: { fontSize: "0.9rem", fontWeight: 500 }, children: ["Field Staff ", s.assignedTo] }), o.jsx("div", { style: { fontSize: "0.75rem", color: "var(--color-text-muted)" }, children: "Deployed" })] })] }) : o.jsx("div", { style: { color: "var(--color-text-muted)", fontSize: "0.9rem", fontStyle: "italic" }, children: "No team assigned yet." })] })] })] })] }) }, ph = ({ children: r }) => localStorage.getItem("user") ? r : o.jsx(Kr, { to: "/login", replace: !0 }); function gh() { return o.jsx(cl, { basename: "/", children: o.jsxs(Da, { children: [o.jsx(Nt, { path: "/login", element: o.jsx(Ec, {}) }), o.jsxs(Nt, { path: "/", element: o.jsx(ph, { children: o.jsx(Tc, {}) }), children: [o.jsx(Nt, { index: !0, element: o.jsx(lh, {}) }), o.jsx(Nt, { path: "issues", element: o.jsx(ch, {}) }), o.jsx(Nt, { path: "issues/:id", element: o.jsx(dh, {}) }), o.jsx(Nt, { path: "*", element: o.jsx(Kr, { to: "/", replace: !0 }) })] })] }) }) } class _h extends Ht.Component { constructor(l) { super(l), this.state = { hasError: !1, error: null, errorInfo: null } } static getDerivedStateFromError(l) { return { hasError: !0 } } componentDidCatch(l, s) { console.error("Uncaught error:", l, s), this.setState({ error: l, errorInfo: s }) } render() { return this.state.hasError ? o.jsxs("div", { style: { padding: "2rem", color: "red", fontFamily: "monospace" }, children: [o.jsx("h1", { children: "Something went wrong." }), o.jsxs("details", { style: { whiteSpace: "pre-wrap" }, children: [this.state.error && this.state.error.toString(), o.jsx("br", {}), this.state.errorInfo && this.state.errorInfo.componentStack] })] }) : this.props.children } } Ds.createRoot(document.getElementById("root")).render(o.jsx(Ht.StrictMode, { children: o.jsx(_h, { children: o.jsx(gh, {}) }) }));
